<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.31.0">
    <meta name="project" content="Documentation v2.3.0">


    <title>USB creation — Documentation v2.3.0</title>
    <link rel="stylesheet" href="dist/html-elixir-3ZLIM5JF.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-43PMFBC7.js"></script>
    <script src="dist/sidebar_items-0FD74F65.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-CILPWI2Q.js"></script>

<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://kaisenlinux.org/documentation/" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Documentation" />
        </a>

      <div>
        <a href="https://kaisenlinux.org/documentation/" class="sidebar-projectName" translate="no">
Documentation
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v2.3.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Guides
        </button>
      </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">
      <div class="top-search">
        <div class="search-settings">
          <form class="search-bar" action="search.html">
            <label class="search-label">
              <span class="sr-only">Search documentation of Documentation</span>
              <input name="q" type="text" class="search-input" placeholder="Search Documentation (press /)" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
            </label>
            <button type="submit" class="search-button" aria-label="Submit Search">
              <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
            </button>
            <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
              <i class="ri-close-line ri-lg" title="Cancel search"></i>
            </button>
          </form>
          <button class="icon-settings display-settings">
            <i class="ri-settings-3-line"></i>
            <span class="sr-only">Settings</span>
          </button>
        </div>
      </div>
      <div class="autocomplete">
      </div>

<h1>


  <span>How to USB creation</span>
</h1>

<h2 id="simple-method-and-supported-any-system" class="section-heading">
  <a href="#simple-method-and-supported-any-system" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Simple method and supported any system</span>
</h2>
<p>You can use the <a href="https://www.balena.io/etcher/">balenaEtcher tool</a>.</p><p>This tool is available on Windows, MacOS and GNU/Linux. The tool is graphical and extremely intuitive. It is a simple and efficient method to create a bootable USB stick for GNU/Linux system quickly.</p><h2 id="method-with-cli" class="section-heading">
  <a href="#method-with-cli" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Method with CLI</span>
</h2>
<p>Suppose here that the command <code class="inline">sudo fdisk -l</code> tells us that our USB key is the device <code class="inline">sdb</code>.</p><ul><li>So we will type this command:</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo dd if=iso_path/iso_file.iso of=/dev/sdb bs=4M
</span></code></pre><p>At the end of the process, you will have a bootable USB stick.</p><h2 id="other-method-or-tools" class="section-heading">
  <a href="#other-method-or-tools" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Other method or tools</span>
</h2>
<p>You can use other tools or methods to create your Kaisen Live bootable USB drive, however, note that the two methods mentioned above have been tested and approved by our team. Some problems have been reported to us following the use of Rufus, in particular for installation on certain configurations.</p><h2 id="create-live-usb-key-with-persistence" class="section-heading">
  <a href="#create-live-usb-key-with-persistence" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Create live USB key with persistence</span>
</h2>
<h3 id="prerequisite" class="section-heading">
  <a href="#prerequisite" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><strong>Prerequisite</strong></span>
</h3>
<p>WARNING: A USB flash drive configured to support live persistent will not work with Apple hardware, probably due to their specific BIOS.</p><p>We recommend that you have at least a 64GB USB drive to take full advantage of this feature. 
Check with the command <code class="inline">sudo fdisk -l</code> what your key is called. Here we will assume that our USB stick is <code class="inline">/dev/sdb</code>.</p><h3 id="usb-key-with-persistence-creation" class="section-heading">
  <a href="#usb-key-with-persistence-creation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">USB key with persistence creation</span>
</h3>
<p>This documentation was made with ISO SR but also works with KDE, LXQT, MATE and XFCE.<br/>Make sure you are in the same folder as the ISO to do all this!!! The dd command will erase your entire device, make sure you have backed up the important content.  </p><ul><li>Create a bootable Kaisen USB drive with the following command:</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo dd if=kaisenlinuxrolling2.2-amd64-SR.iso of=/dev/sdb bs=4M status=progress
</span></code></pre><p>Normally two partitions were created by dd. You can check this with the sudo fdisk -l command. You need to create a third to add persistence to it.</p><ul><li>To do this, type the following commands (always in the same folder where the ISO is):</li></ul><pre><code class="makeup bash" translate="no"><span class="">end=50GiB (if key is 64GiB, for security we will put the key ending at 50GiB plus the size of the ISO so 4GiB)
</span><span class="">read start _ &lt;&lt;&lt; $(du -bcm kaisenlinuxrolling2.2-amd64-SR.iso | tail -1); echo $start
</span><span class="">sudo parted /dev/sdb mkpart primary ${start}MiB $end
</span></code></pre><p>You should now have 3 partitions on your <code class="inline">/dev/sdb</code> device.</p><ul><li>Then do this for create filesystems and partition label:<br/>The <code class="inline">mkfs.ext4</code> command below will ask a question (on the size of the blocks). Just press enter to use the default settings (not affected here).</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo mkfs.ext4 -L persistence /dev/sdb3
</span><span class="">sudo e2label /dev/sdb3 persistence
</span></code></pre><p>To take into account this new persistence partition, we should have a file named persistence.conf at the root of this partition with in this file marked: <code class="inline">/ union</code></p><ul><li>We are going to proceed like this:</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo mkdir -p /mnt/persistence
</span><span class="">sudo mount /dev/sdb3 /mnt/persistence
</span><span class="">echo &quot;/ union&quot; | sudo tee /mnt/persistence/persistence.conf
</span><span class="">sudo umount /mnt/persistence
</span></code></pre><p><strong>Your key is now ready!</strong></p><p>Restart a live Kaisen with the persistence option enabled. To test that the persistence is functional, for example change the theme of the graphical interface then restart your live session by always choosing &quot;persistence&quot;. If the theme you modified has been kept instead of the default one, the persistence is functional.</p><h2 id="create-live-usb-key-with-encrypted-persistence" class="section-heading">
  <a href="#create-live-usb-key-with-encrypted-persistence" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Create live USB key with encrypted persistence</span>
</h2>
<h3 id="prerequisite-1" class="section-heading">
  <a href="#prerequisite-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text"><strong>Prerequisite</strong></span>
</h3>
<p>WARNING: A USB flash drive configured to support live persistent will not work with Apple hardware, probably due to their specific BIOS.</p><p>We recommend that you have at least a 64GB USB drive to take full advantage of this feature. 
Check with the command <code class="inline">sudo fdisk -l</code> what your key is called. Here we will assume that our USB stick is <code class="inline">/dev/sdb</code>.</p><h3 id="usb-key-with-encrypted-persistence-creation" class="section-heading">
  <a href="#usb-key-with-encrypted-persistence-creation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">USB key with encrypted persistence creation</span>
</h3>
<p>This documentation was made with ISO SR but also works with KDE, LXQT, MATE and XFCE.<br/>Make sure you are in the same folder as the ISO to do all this!!! The dd command will erase your entire device, make sure you have backed up the important content.  </p><ul><li>Create a bootable Kaisen USB drive with the following command:</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo dd if=kaisenlinuxrolling2.2-amd64-SR.iso of=/dev/sdb bs=4M status=progress
</span></code></pre><p>Normally two partitions were created by dd. You can check this with the <code class="inline">sudo fdisk -l</code> command. You need to create a third to add persistence to it.</p><ul><li>To do this, type the following commands (always in the same folder where the ISO is):</li></ul><pre><code class="makeup bash" translate="no"><span class="">end=50GiB (if key is 64GiB, for security we will put the key ending at 50GiB plus the size of the ISO so 4GiB)
</span><span class="">read start _ &lt;&lt;&lt; $(du -bcm kaisenlinuxrolling2.2-amd64-SR.iso | tail -1); echo $start
</span><span class="">sudo parted /dev/sdb mkpart primary ${start}MiB $end
</span></code></pre><p>You should now have 3 partitions on your <code class="inline">/dev/sdb</code> device.<br/>WARNING: do not forget the passphrase to unlock the partition, otherwise you will have to completely redo your key and your data cannot be recovered. You have been warned.</p><pre><code class="makeup bash" translate="no"><span class="">sudo cryptsetup --verbose --verify-passphrase luksFormat /dev/sdb3
</span><span class="">sudo cryptsetup luksOpen /dev/sdb3 kaisen-usb-persistent
</span></code></pre><p>Then do this for create filesystems and partition label:
The <code class="inline">mkfs.ext4</code> command below will ask a question (on the size of the blocks). Just press enter to use the default settings (not affected here).</p><pre><code class="makeup bash" translate="no"><span class="">sudo mkfs.ext4 -L persistence /dev/mapper/kaisen-usb-persistent
</span><span class="">sudo e2label /dev/mapper/kaisen-usb-persistent persistence
</span></code></pre><p>To take into account this new persistence partition, we should have a file named persistence.conf at the root of this partition with in this file marked: <code class="inline">/ union</code></p><ul><li>We are going to proceed like this:</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo mkdir -p /mnt/kaisen-usb-persistent
</span><span class="">sudo mount /dev/mapper/kaisen-usb-persistent /mnt/kaisen-usb-persistent
</span><span class="">echo &quot;/ union&quot; | sudo tee /mnt/kaisen-usb-persistent/persistence.conf
</span><span class="">sudo umount /dev/mapper/kaisen-usb-persistent
</span></code></pre><ul><li>Let's close the encrypted channel:</li></ul><pre><code class="makeup bash" translate="no"><span class="">sudo cryptsetup luksClose /dev/mapper/kaisen-usb-persistent
</span></code></pre><p><strong>Your key is now ready!</strong></p><p>Restart a live Kaisen with the encrypted persistence option enabled. To test that the persistence is functional, for example change the theme of the graphical interface then restart your live session by always choosing &quot;encrypted persistence&quot;.  If the theme you modified has been kept instead of the default one, encrypted persistence is functional.<br/>Caution, the keyboard will be in QWERTY.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="variant.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
List of the differents ISO
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="hardware.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Hardware requirements
        </span>
      </a>

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.31.0) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</main>
</div>


  </body>
</html>

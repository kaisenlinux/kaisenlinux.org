<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Manpages v3.0.0">


    <title>podman-troubleshooting — Manpages v3.0.0</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-65F766E3.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>
<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Manpages" />
        </a>

      <div>
        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v3.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="MANUALS"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Manpages</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>podman-troubleshooting</h1>


  </div>


<p>podman-troubleshooting(7)                                                      Miscellaneous Information Manual                                                      podman-troubleshooting(7)</p><p>Troubleshooting
A list of common issues and solutions for Podman</p><hr class="medium"/><ol><li><p>Variety of issues - Validate Version
 A large number of issues reported against Podman are often found to already be fixed in more current versions of the project.  Before reporting an issue, please verify the version you
 are running with podman version and compare it to the latest release documented on the top of Podman's ⟨README.md⟩.</p><p> If they differ, please update your version of PODMAN to the latest possible and retry your command before reporting the issue.</p></li></ol><hr class="medium"/><ol start="2"><li>Can't use volume mount, get permission denied
 $ podman run -v ~/mycontent:/content fedora touch /content/file
 touch: cannot touch '/content/file': Permission denied</li></ol><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">caused</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">SELinux</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespaces</span><span class="o">.</span><span class="w">

   </span><span class="nc">Labeling</span><span class="w">  </span><span class="n">systems</span><span class="w">  </span><span class="n">like</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="kn">require</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">proper</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">placed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Without</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">label</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">prevent</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">run</span><span class="err">‐</span><span class="w">
   </span><span class="n">ning</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">OS</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">suffixes</span><span class="w"> </span><span class="ss">:z</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ss">:Z</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">mount</span><span class="o">.</span><span class="w"> </span><span class="nc">These</span><span class="w"> </span><span class="n">suffixes</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">relabel</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shared</span><span class="w">  </span><span class="n">volumes</span><span class="o">.</span><span class="w">
   </span><span class="nc">The</span><span class="w">  </span><span class="n">z</span><span class="w">  </span><span class="n">option</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">share</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w"> </span><span class="nc">As</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">label</span><span class="o">.</span><span class="w"> </span><span class="nc">Shared</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">containers</span><span class="w">
   </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="o">/</span><span class="n">write</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="nc">Z</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">unshared</span><span class="w"> </span><span class="n">label</span><span class="o">.</span><span class="w">  </span><span class="nc">Only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">volume</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="n">mycontent</span><span class="ss">:/</span><span class="n">content</span><span class="ss">:Z</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">file</span><span class="w">

   </span><span class="nc">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">Do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">relabel</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w">  </span><span class="nc">Relabeling</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">confined</span><span class="w"> </span><span class="n">services</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">your</span><span class="w">  </span><span class="n">machine</span><span class="w">  </span><span class="n">to</span><span class="w">
   </span><span class="n">fail</span><span class="o">.</span><span class="w">  </span><span class="nc">For</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">recommend</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="n">disabled</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="o">--</span><span class="n">security</span><span class="o">-</span><span class="n">opt</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="n">disable</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">disable</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">security</span><span class="o">-</span><span class="n">opt</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="n">disable</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="err">~</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">file</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="p">,</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">root</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">though</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fix</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Jupyter</span><span class="w"> </span><span class="nc">Note</span><span class="err">‐</span><span class="w">
   </span><span class="n">book</span><span class="w">  </span><span class="n">image</span><span class="w">  </span><span class="p" data-group-id="6101791767-1">(</span><span class="n">which</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="s">&quot;jovyan&quot;</span><span class="p" data-group-id="6101791767-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Postgres</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="p" data-group-id="6101791767-2">(</span><span class="n">which</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="s">&quot;postgres&quot;</span><span class="p" data-group-id="6101791767-2">)</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="k">case</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespaces</span><span class="p">,</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="s">&quot;$PWD&quot;</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">jovyan</span><span class="o">/</span><span class="n">work</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">jupyter</span><span class="o">/</span><span class="n">scipy</span><span class="o">-</span><span class="n">notebook</span></code></pre><hr class="medium"/><ol start="3"><li>No such image or Bare keys cannot contain ':'
 When doing a podman pull or podman build command and a &quot;common&quot; image cannot be pulled, it is likely that the /etc/containers/registries.conf file is either not installed or  possibly
 misconfigured.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w">
   </span><span class="nc">STEP</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">alpine</span><span class="w">
   </span><span class="n">error</span><span class="w"> </span><span class="ss">building</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="ss">container</span><span class="p">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="s">&quot;alpine&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="ss">registry</span><span class="p">:</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">known</span><span class="w">

   </span><span class="ow">or</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">fedora</span><span class="w">
   </span><span class="n">error</span><span class="w"> </span><span class="n">pulling</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="ss">&quot;fedora&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="ss">fedora</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">getting</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">registries</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">try</span><span class="p">:</span><span class="w"> </span><span class="nc">Near</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="p" data-group-id="9880156859-1">(</span><span class="n">last</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">parsed</span><span class="w"> </span><span class="sc">&#39;&#39;</span><span class="p" data-group-id="9880156859-1">)</span><span class="p">:</span><span class="w"> </span><span class="nc">Bare</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="sc">&#39;:&#39;</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="err">•</span><span class="w"> </span><span class="nc">Verify</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">exists</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="ow">not</span><span class="p">,</span><span class="w"> </span><span class="n">verify</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">installed</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Verify</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unqualified</span><span class="o">-</span><span class="n">search</span><span class="o">-</span><span class="n">registries</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">reachable</span><span class="o">.</span><span class="w">

            </span><span class="err">•</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">unqualified</span><span class="o">-</span><span class="n">search</span><span class="o">-</span><span class="n">registries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8896170522-1">[</span><span class="s">&quot;registry.fedoraproject.org&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;quay.io&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;registry.access.redhat.com&quot;</span><span class="p" data-group-id="8896170522-1">]</span></code></pre><hr class="medium"/><ol start="4"><li>http: server gave HTTP response to HTTPS client
 When  doing  a  Podman command such as build, commit, pull, or push to a registry, TLS verification is turned on by default.  If encryption is not used with those commands, this error
 can occur.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">myalpine</span><span class="ss">:latest</span><span class="w">
   </span><span class="nc">Getting</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">signatures</span><span class="w">
   </span><span class="nc">Get</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">v2</span><span class="ss">/</span><span class="p">:</span><span class="w"> </span><span class="ss">http</span><span class="p">:</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">gave</span><span class="w"> </span><span class="nc">HTTP</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">HTTPS</span><span class="w"> </span><span class="n">client</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="nc">TLS</span><span class="w"> </span><span class="n">verification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">turned</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">communicating</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">registries</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="nc">Podman</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kn">require</span><span class="w"> </span><span class="n">encryption</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">build</span><span class="p">,</span><span class="w"> </span><span class="n">commit</span><span class="p">,</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="ow">and</span><span class="w">
   </span><span class="n">push</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">unless</span><span class="w"> </span><span class="nc">TLS</span><span class="w"> </span><span class="n">verification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">turned</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">  </span><span class="ss">NOTE</span><span class="p">:</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">recommended</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">communicate</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="nc">TLS</span><span class="w"> </span><span class="n">verification</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Turn</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="nc">TLS</span><span class="w"> </span><span class="n">verification</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">I</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="o">--</span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="o">=</span><span class="no">false</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">myalpine</span><span class="ss">:latest</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">workaround</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="p" data-group-id="3429377715-1">[</span><span class="mi">1</span><span class="p" data-group-id="3429377715-1">]</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">registry</span><span class="o">-</span><span class="nc">NAME</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="p" data-group-id="3429377715-2">(</span><span class="n">replacing</span><span class="w"> </span><span class="nc">NAME</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">registry</span><span class="p" data-group-id="3429377715-2">)</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">following</span><span class="w">  </span><span class="n">content</span><span class="w">
   </span><span class="p" data-group-id="3429377715-3">(</span><span class="n">replacing</span><span class="w"> </span><span class="nc">FULLY.QUALIFIED.NAME.OF.REGISTRY</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">registry</span><span class="p" data-group-id="3429377715-3">)</span><span class="p">:</span><span class="w">

   </span><span class="p" data-group-id="3429377715-4">[</span><span class="p" data-group-id="3429377715-5">[</span><span class="n">registry</span><span class="p" data-group-id="3429377715-5">]</span><span class="p" data-group-id="3429377715-4">]</span><span class="w">
   </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;FULLY.QUALIFIED.NAME.OF.REGISTRY&quot;</span><span class="w">
   </span><span class="n">insecure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="p" data-group-id="3429377715-6">[</span><span class="mi">1</span><span class="p" data-group-id="3429377715-6">]</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Mac</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nc">Windows</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">registry</span><span class="err">—</span><span class="n">conf</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">cautiously</span><span class="o">.</span></code></pre><hr class="medium"/><ol start="5"><li>rootless containers cannot ping hosts
 When using the ping command from a non-root container, the command may fail because of a lack of privileges.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="o">-</span><span class="nc">W10</span><span class="w"> </span><span class="o">-</span><span class="n">c1</span><span class="w"> </span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="w">
   </span><span class="nc">PING</span><span class="w"> </span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="p" data-group-id="1216664501-1">(</span><span class="mf">209.132</span><span class="o">.</span><span class="mf">183.105</span><span class="p" data-group-id="1216664501-1">)</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">bytes</span><span class="w">

   </span><span class="o">--</span><span class="o">-</span><span class="w"> </span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="n">statistics</span><span class="w"> </span><span class="o">--</span><span class="o">-</span><span class="w">
   </span><span class="mi">1</span><span class="w"> </span><span class="n">packets</span><span class="w"> </span><span class="n">transmitted</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">packets</span><span class="w"> </span><span class="n">received</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">%</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="n">loss</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="n">necessary</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">unprivileged</span><span class="w"> </span><span class="n">pings</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">  </span><span class="nc">Be</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">ipv4</span><span class="o">/</span><span class="n">ping_group_range</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

   </span><span class="c1"># sysctl -w &quot;net.ipv4.ping_group_range=0 2000000&quot;</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">persistent</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="err">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sysctl</span><span class="o">.</span><span class="n">d</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">net</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">ping_group_range</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="err">$</span><span class="nc">MAX_UID</span><span class="o">.</span></code></pre><hr class="medium"/><ol start="6"><li>Build hangs when the Dockerfile contains the useradd command
 When the Dockerfile contains a command like RUN useradd -u 99999000 -g users newuser the build can hang.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w">  </span><span class="n">you</span><span class="w">  </span><span class="n">are</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">useradd</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">large</span><span class="w"> </span><span class="nc">UID</span><span class="o">/</span><span class="nc">GID</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">large</span><span class="w"> </span><span class="n">sparse</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">lastlog</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">hang</span><span class="w"> </span><span class="n">forever</span><span class="o">.</span><span class="w">  </span><span class="nc">Go</span><span class="w"> </span><span class="n">lan</span><span class="err">‐</span><span class="w">
   </span><span class="n">guage</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">sparse</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">correctly</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">lead</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">huge</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w"> </span><span class="n">looked</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w"> </span><span class="nc">RUN</span><span class="w"> </span><span class="n">useradd</span><span class="w"> </span><span class="o">-</span><span class="n">u</span><span class="w"> </span><span class="mi">99999000</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">newuser</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="n">init</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="nc">RUN</span><span class="w"> </span><span class="n">useradd</span><span class="w">  </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="n">init</span><span class="w">  </span><span class="o">-</span><span class="n">u</span><span class="w">  </span><span class="mi">99999000</span><span class="w">  </span><span class="o">-</span><span class="n">g</span><span class="w">
   </span><span class="n">users</span><span class="w"> </span><span class="n">newuser</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="n">useradd</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lastlog</span><span class="w"> </span><span class="n">file</span><span class="o">.</span></code></pre><ol start="7"><li>Permission denied when running Podman commands
 When rootless Podman attempts to execute a container on a non exec home directory a permission error will be raised.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">Buildah</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">noexec</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">centos</span><span class="p">:</span><span class="mi">7</span><span class="w">
   </span><span class="n">standard_init_linux</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">203</span><span class="p">:</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">caused</span><span class="w"> </span><span class="s">&quot;permission denied&quot;</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Since</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">administrator</span><span class="w">  </span><span class="n">of</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">noexec</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">work</span><span class="w"> </span><span class="n">around</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">manually</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">noexec</span><span class="w"> </span><span class="n">mount</span><span class="o">.</span><span class="w"> </span><span class="nc">Simply</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">conf</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="w">  </span><span class="p" data-group-id="8040906980-1">(</span><span class="n">creating</span><span class="w">
   </span><span class="n">the</span><span class="w">  </span><span class="n">directory</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">necessary</span><span class="p" data-group-id="8040906980-1">)</span><span class="o">.</span><span class="w"> </span><span class="nc">Specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">graphroot</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">noexec</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">read</span><span class="o">/</span><span class="n">write</span><span class="w"> </span><span class="n">privileges</span><span class="o">.</span><span class="w">  </span><span class="nc">You</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">writable</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">conf</span><span class="w">
   </span><span class="p" data-group-id="8040906980-2">[</span><span class="n">storage</span><span class="p" data-group-id="8040906980-2">]</span><span class="w">
     </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;overlay&quot;</span><span class="w">
     </span><span class="n">runroot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/run/user/1000&quot;</span><span class="w">
     </span><span class="n">graphroot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/execdir/myuser/storage&quot;</span><span class="w">
     </span><span class="p" data-group-id="8040906980-3">[</span><span class="n">storage</span><span class="o">.</span><span class="n">options</span><span class="p" data-group-id="8040906980-3">]</span><span class="w">
       </span><span class="n">mount_program</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/bin/fuse-overlayfs&quot;</span></code></pre><ol start="8"><li>Permission denied when running systemd within a Podman container
 When running systemd as PID 1 inside of a container on an SELinux separated machine, it needs to write to the cgroup file system.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Systemd</span><span class="w"> </span><span class="n">gets</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">denied</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">attempting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">AVC</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">audit</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">journal</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Newer</span><span class="w"> </span><span class="n">versions</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="p" data-group-id="2157815436-1">(</span><span class="mf">2.0</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">greater</span><span class="p" data-group-id="2157815436-1">)</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">labels</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">cgroup</span><span class="w">  </span><span class="n">file</span><span class="w">  </span><span class="n">system</span><span class="o">.</span><span class="w">
   </span><span class="nc">This</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">container</span><span class="o">-</span><span class="n">selinux</span><span class="o">-</span><span class="mf">2.132</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">newer</span><span class="w"> </span><span class="n">versions</span><span class="o">.</span><span class="w">

   </span><span class="nc">Prior</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">container_manage_cgroup</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w"> </span><span class="nc">Turn</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">boolean</span><span class="p">,</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">systems</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">allow</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">properly</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">Only</span><span class="w"> </span><span class="k" data-group-id="2157815436-2">do</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">systems</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">older</span><span class="w"> </span><span class="n">versions</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">Podman</span><span class="o">.</span><span class="w">

   </span><span class="c1"># setsebool -P container_manage_cgroup true</span></code></pre><ol start="9"><li>Newuidmap missing when running rootless Podman commands
 Rootless Podman requires the newuidmap and newgidmap programs to be installed.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">Buildah</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">complaining</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">newuidmap</span><span class="w"> </span><span class="n">executable</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">ti</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">sh</span><span class="w">
   </span><span class="n">command</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="ss">IDs</span><span class="p">:</span><span class="w"> </span><span class="ss">exec</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;newuidmap&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="err">$</span><span class="nc">PATH</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Install</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">shadow</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">includes</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">executables</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nc">RHEL</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">CentOS</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mf">7.7</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">available</span><span class="o">.</span></code></pre><ol start="10"><li>rootless setup user: invalid argument
Rootless Podman requires the user running it to have a range of UIDs listed in /etc/subuid and /etc/subgid.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">mapped</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespace</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">ti</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="mi">1000000</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">hi</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="ss">failed</span><span class="p">:</span><span class="w"> </span><span class="n">container_linux</span><span class="o">.</span><span class="n">go</span><span class="p">:</span><span class="mi">344</span><span class="p">:</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">caused</span><span class="w"> </span><span class="s">&quot;setup user: invalid argument&quot;</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">look</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w">
   </span><span class="n">johndoe</span><span class="p">:</span><span class="mi">100000</span><span class="p">:</span><span class="mi">65536</span><span class="w">
   </span><span class="n">test</span><span class="p">:</span><span class="mi">165536</span><span class="p">:</span><span class="mi">65536</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nc">USERNAME</span><span class="ss">:UID</span><span class="ss">:RANGE</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">listed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">getpwent</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">uid</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">johndoe</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="mi">100000</span><span class="o">-</span><span class="mi">165535</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">his</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">UIDs</span><span class="p">,</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">overlapping</span><span class="w"> </span><span class="nc">UIDs</span><span class="p">,</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">potentially</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">attack</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">addition</span><span class="p">,</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">that</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">range</span><span class="w">
   </span><span class="n">of</span><span class="w">  </span><span class="nc">UIDs</span><span class="w">  </span><span class="n">you</span><span class="w"> </span><span class="n">allocate</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">cover</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">requires</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="n">subuids</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">con</span><span class="err">‐</span><span class="w">
   </span><span class="n">tainer</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="mi">1000000</span><span class="p">,</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="mi">1000000</span><span class="w"> </span><span class="n">subuids</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usermod</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">kill</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pause</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">system</span><span class="w">  </span><span class="n">migrate</span><span class="w">  </span><span class="n">com</span><span class="err">‐</span><span class="w">
   </span><span class="n">mand</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">kill</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pause</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="w">

   </span><span class="c1"># usermod --add-subuids 200000-201000 --add-subgids 200000-201000 johndoe</span><span class="w">
   </span><span class="c1"># grep johndoe /etc/subuid /etc/subgid</span><span class="w">
   </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="ss">:johndoe</span><span class="p">:</span><span class="mi">200000</span><span class="p">:</span><span class="mi">1001</span><span class="w">
   </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="ss">:johndoe</span><span class="p">:</span><span class="mi">200000</span><span class="p">:</span><span class="mi">1001</span></code></pre><ol start="11"><li><p>Changing the location of the Graphroot leads to permission denied
When I change the graphroot storage location in storage.conf, the next time I run Podman, I get an error like:</p><h1>podman run -p 5000:5000 -it centos bash</h1><p>bash: error while loading shared libraries: /lib64/libc.so.6: cannot apply additional memory protection after relocation: Permission denied</p><p>For example, the admin sets up a spare disk to be mounted at /src/containers, and points storage.conf at this directory.</p></li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">SELinux</span><span class="w">  </span><span class="n">blocks</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">arbitrary</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="n">storage</span><span class="o">.</span><span class="w">  </span><span class="nc">These</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">labeled</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">contain</span><span class="err">‐</span><span class="w">
   </span><span class="n">ers</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Tell</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">equivalence</span><span class="w"> </span><span class="n">record</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">contain</span><span class="err">‐</span><span class="w">
   </span><span class="n">ers</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="w">

   </span><span class="c1"># semanage fcontext -a -e /var/lib/containers /srv/containers</span><span class="w">
   </span><span class="c1"># restorecon -R -v /srv/containers</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">semanage</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">labeling</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">containers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">restorecon</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">labels</span><span class="w">  </span><span class="n">to</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w">

   </span><span class="nc">Now</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">label</span><span class="o">.</span></code></pre><ol start="12"><li>Anonymous image pull fails with 'invalid username/password'
Pulling an anonymous image that doesn't require authentication can result in an invalid username/password error.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w">  </span><span class="n">you</span><span class="w">  </span><span class="n">pull</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">anonymous</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kn">require</span><span class="w"> </span><span class="n">credentials</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="k">receive</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">username</span><span class="o">/</span><span class="n">password</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="n">established</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">authentication</span><span class="w">
   </span><span class="n">file</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">valid</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">it</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">alpine</span><span class="ss">:latest</span><span class="w"> </span><span class="n">ls</span><span class="w">
   </span><span class="nc">Trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">alpine</span><span class="ss">:latest</span><span class="n">...</span><span class="nc">ERRO</span><span class="p" data-group-id="0816780114-1">[</span><span class="mi">0000</span><span class="p" data-group-id="0816780114-1">]</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">pulling</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">ref</span><span class="w"> </span><span class="o">//</span><span class="n">alpine</span><span class="ss">:latest</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">determining</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="nc">MIME</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">alpine</span><span class="ss">:latest</span><span class="p">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">auth</span><span class="w"> </span><span class="ss">token</span><span class="p">:</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">username</span><span class="o">/</span><span class="n">password</span><span class="w">
   </span><span class="nc">Failed</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">alpine</span><span class="ss">:latest</span><span class="p">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="ss">image</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">determining</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="nc">MIME</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">alpine</span><span class="ss">:latest</span><span class="p">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">auth</span><span class="w"> </span><span class="ss">token</span><span class="p">:</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">username</span><span class="o">/</span><span class="n">password</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">happen</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">modified</span><span class="w"> </span><span class="sc">&#39;by hand&#39;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">established</span><span class="w"> </span><span class="n">locally</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Depending</span><span class="w"> </span><span class="n">upon</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">establish</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">credentials</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">logout</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">logout</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">file</span><span class="o">.</span></code></pre><ol start="13"><li>Running Podman inside a container causes container crashes and inconsistent states
Running Podman in a container and forwarding some, but not all, of the required host directories can cause inconsistent container behavior.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">After</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">Podman</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="s">&quot;configured&quot;</span><span class="w">  </span><span class="ow">or</span><span class="w">  </span><span class="s">&quot;cre‐
   ated&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">stopped</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">recommended</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">minimum</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">/</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">volume</span><span class="o">.</span><span class="w">  </span><span class="nc">Typically</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">di</span><span class="err">‐</span><span class="w">
   </span><span class="n">rectory</span><span class="p">,</span><span class="w">  </span><span class="n">but</span><span class="w">  </span><span class="k">if</span><span class="w">  </span><span class="n">you</span><span class="w">  </span><span class="n">wish</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">share</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="k" data-group-id="6114017279-1">do</span><span class="w"> </span><span class="n">so</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k" data-group-id="6114017279-2">do</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="sc">&#39;s /var/lib/containers/storage, however, you must also mount in the host&#39;</span><span class="n">s</span><span class="w">
   </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">libpod</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="w"> </span><span class="n">directories</span><span class="o">.</span><span class="w">  </span><span class="nc">Not</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">detect</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">cleared</span><span class="p">,</span><span class="w"> </span><span class="n">leading</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">system</span><span class="w">
   </span><span class="n">restart</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">taken</span><span class="w"> </span><span class="n">place</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">states</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lose</span><span class="w"> </span><span class="n">track</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">recommend</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="err">⟨</span><span class="n">docs</span><span class="o">/</span><span class="n">tutorials</span><span class="o">/</span><span class="n">remote_client</span><span class="o">.</span><span class="n">md</span><span class="err">⟩</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">a</span><span class="w">  </span><span class="n">single</span><span class="w">  </span><span class="n">socket</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">be</span><span class="w">
   </span><span class="n">mounted</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span></code></pre><ol start="14"><li>Rootless 'podman build' fails EPERM on NFS:
NFS  enforces  file  creation  on different UIDs on the server side and does not understand user namespace, which rootless Podman requires.  When a container root process like YUM at‐
tempts to create a file owned by a different UID, NFS Server denies the creation.  NFS is also a problem for the file locks when the storage is on it.  Other distributed file  systems
(for  example: Lustre, Spectrum Scale, the General Parallel File System (GPFS)) are also not supported when running in rootless mode as these file systems do not understand user name‐
space.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">.</span><span class="w">
   </span><span class="nc">ERRO</span><span class="p" data-group-id="0389843796-1">[</span><span class="mi">0014</span><span class="p" data-group-id="0389843796-1">]</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">applying</span><span class="w"> </span><span class="ss">layer</span><span class="p">:</span><span class="w"> </span><span class="nc">ApplyLayer</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">stdout</span><span class="p">:</span><span class="w">  </span><span class="ss">stderr</span><span class="p">:</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="o">.</span><span class="ss">bash_logout</span><span class="p">:</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">denied</span><span class="w">
   </span><span class="n">error</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="ss">container</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">committing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="ss">image</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="ss">&quot;sha256:a02a4930cb5d36f3290eb84f4bfa30668ef2e9fe3a1fb73ec015fc58b9958b17&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">ApplyLayer</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">stdout</span><span class="p">:</span><span class="w">  </span><span class="ss">stderr</span><span class="p">:</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="o">.</span><span class="ss">bash_logout</span><span class="p">:</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">denied</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Choose</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">following</span><span class="p">:</span><span class="w">
     </span><span class="o">*</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">directory</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nc">NFS</span><span class="w"> </span><span class="n">share</span><span class="o">.</span><span class="w">
       </span><span class="o">*</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w">
       </span><span class="o">*</span><span class="w"> </span><span class="nc">Edit</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">containers</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">volume_path</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w"> </span><span class="p" data-group-id="3609005749-1">(</span><span class="nc">Copy</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">containers</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">contain</span><span class="err">‐</span><span class="w">
   </span><span class="n">ers</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span><span class="p" data-group-id="3609005749-1">)</span><span class="w">
     </span><span class="o">*</span><span class="w"> </span><span class="nc">Otherwise</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span></code></pre><ol start="15"><li>Rootless 'podman build' fails when using OverlayFS:
The  Overlay  file system (OverlayFS) requires the ability to call the mknod command when creating whiteout files when extracting an image.  However, a rootless user does not have the
privileges to use mknod in this capacity.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">storage</span><span class="o">-</span><span class="n">driver</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="o">.</span><span class="w">
   </span><span class="nc">STEP</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">ubuntu</span><span class="ss">:xenial</span><span class="w">
   </span><span class="nc">Getting</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">signatures</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="n">edf72af6d627</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="mi">3</span><span class="n">e4f86211d23</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="mi">8</span><span class="n">d3eac894db4</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="n">f7277927d38a</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="mi">5</span><span class="n">e13f8dd4c</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Writing</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">destination</span><span class="w">
   </span><span class="nc">Storing</span><span class="w"> </span><span class="n">signatures</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="ss">container</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">committing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="ss">image</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="ss">&quot;sha256:8d3eac894db4dc4154377ad28643dfe6625ff0e54bcfa63e0d04921f1a8ef7f8&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="n">file</span><span class="p" data-group-id="4631725679-1">(</span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="4631725679-1">)</span><span class="p">:</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">permitted</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">.</span><span class="w">
   </span><span class="nc">ERRO</span><span class="p" data-group-id="4631725679-2">[</span><span class="mi">0014</span><span class="p" data-group-id="4631725679-2">]</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">applying</span><span class="w"> </span><span class="ss">layer</span><span class="p">:</span><span class="w"> </span><span class="nc">ApplyLayer</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">stdout</span><span class="p">:</span><span class="w">  </span><span class="ss">stderr</span><span class="p">:</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="o">.</span><span class="ss">bash_logout</span><span class="p">:</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">denied</span><span class="w">
   </span><span class="n">error</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="ss">container</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="n">committing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="ss">image</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="ss">&quot;sha256:a02a4930cb5d36f3290eb84f4bfa30668ef2e9fe3a1fb73ec015fc58b9958b17&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">ApplyLayer</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">stdout</span><span class="p">:</span><span class="w">  </span><span class="ss">stderr</span><span class="p">:</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="o">.</span><span class="ss">bash_logout</span><span class="p">:</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">denied</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Choose</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">following</span><span class="p">:</span><span class="w">
     </span><span class="o">*</span><span class="w"> </span><span class="nc">Complete</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">privileged</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="w">
     </span><span class="o">*</span><span class="w"> </span><span class="nc">Install</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="n">fuse</span><span class="o">-</span><span class="n">overlayfs</span><span class="o">.</span><span class="w">
       </span><span class="o">*</span><span class="w"> </span><span class="nc">Install</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fuse</span><span class="o">-</span><span class="n">overlayfs</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="nc">Linux</span><span class="w"> </span><span class="nc">Distribution</span><span class="o">.</span><span class="w">
       </span><span class="o">*</span><span class="w"> </span><span class="nc">Add</span><span class="w"> </span><span class="n">mount_program</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/usr/bin/fuse-overlayfs&quot;</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="p" data-group-id="4537966148-1">[</span><span class="n">storage</span><span class="o">.</span><span class="n">options</span><span class="p" data-group-id="4537966148-1">]</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="n">file</span><span class="o">.</span></code></pre><ol start="16"><li>RHEL 7 and CentOS 7 based init images don't work with cgroup v2
The systemd version shipped in RHEL 7 and CentOS 7 doesn't have support for cgroup v2.  Support for cgroup v2 requires version 230 of systemd or newer, which was never shipped or sup‐
ported on RHEL 7 or CentOS 7.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="c1"># podman run --name test -d registry.access.redhat.com/rhel7-init:latest &amp;&amp; sleep 10 &amp;&amp; podman exec test systemctl status</span><span class="w">
   </span><span class="n">c8567461948439bce72fad3076a91ececfb7b14d469bfa5fbc32c6403185beff</span><span class="w">
   </span><span class="nc">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="nc">D</span><span class="o">-</span><span class="nc">Bus</span><span class="w"> </span><span class="ss">connection</span><span class="p">:</span><span class="w"> </span><span class="nc">Operation</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">permitted</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">non</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="ss">code</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">OCI</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">error</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="err">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">either</span><span class="p">:</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">v1</span><span class="o">.</span><span class="w"> </span><span class="nc">On</span><span class="w"> </span><span class="nc">Fedora</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w">

   </span><span class="c1"># dnf install -y grubby</span><span class="w">
   </span><span class="c1"># grubby --update-kernel=ALL --args=”systemd.unified_cgroup_hierarchy=0&quot;</span><span class="w">
   </span><span class="c1"># reboot</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">systemd</span><span class="o">.</span></code></pre><ol start="17"><li>rootless containers exit once the user session exits
You need to set lingering mode through loginctl to prevent user processes to be killed once the user session completed.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Once</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">logs</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">exit</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="c1"># loginctl enable-linger $UID</span></code></pre><ol start="18"><li>podman run fails with bpf create: permission denied error
The Kernel Lockdown patches deny eBPF programs when Secure Boot is enabled in the BIOS. Matthew Garrett's post describes the relationship between Lockdown and  Secure  Boot  and  Jan-
Philip Gehrcke's connects this with eBPF. RH bug 1768125 contains some additional details.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Attempts</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="ow">in</span><span class="w">

   </span><span class="c1">#### Solution</span><span class="w">

   </span><span class="nc">One</span><span class="w"> </span><span class="n">workaround</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">disable</span><span class="w"> </span><span class="nc">Secure</span><span class="w"> </span><span class="nc">Boot</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="nc">BIOS</span><span class="o">.</span><span class="w">

   </span><span class="c1">### 19) error creating libpod runtime: there might not be enough IDs available in the namespace</span><span class="w">

   </span><span class="nc">Unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">images</span><span class="w">

   </span><span class="c1">#### Symptom</span><span class="w">

   </span><span class="err">`</span><span class="err">`</span><span class="err">`</span><span class="n">console</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">unshare</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">uid_map</span><span class="w">
         </span><span class="mi">0</span><span class="w">       </span><span class="mi">1000</span><span class="w">          </span><span class="mi">1</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">migrate</span><span class="w">

   </span><span class="nc">Original</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">returns</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">unshare</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">uid_map</span><span class="w">
         </span><span class="mi">0</span><span class="w">       </span><span class="mi">1000</span><span class="w">          </span><span class="mi">1</span><span class="w">
         </span><span class="mi">1</span><span class="w">     </span><span class="mi">100000</span><span class="w">      </span><span class="mi">65536</span><span class="w">

   </span><span class="nc">Reference</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">man</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">detail</span><span class="o">.</span></code></pre><ol start="20"><li>Passed-in devices or files can't be accessed in rootless container
As a non-root user you have group access rights to a device or files that you want to pass into a rootless container with --device=... or --volume=...</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Any</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">rejected</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s">&quot;Permission denied&quot;</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w">  </span><span class="n">runtime</span><span class="w">  </span><span class="n">uses</span><span class="w"> </span><span class="n">setgroups</span><span class="p" data-group-id="2338293516-1">(</span><span class="mi">2</span><span class="p" data-group-id="2338293516-1">)</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">loses</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">root</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">has</span><span class="o">.</span><span class="w"> </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">group</span><span class="o">-</span><span class="n">add</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">groups</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">supplementary</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">access</span><span class="w">
   </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Currently</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">crun</span><span class="w"> </span><span class="nc">OCI</span><span class="w"> </span><span class="n">runtime</span><span class="o">.</span></code></pre><ol start="21"><li>A rootless container running in detached mode is closed at logout
When running a container with a command like podman run --detach httpd as a rootless user, the container is closed upon logout and is not kept running.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">session</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">detached</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">stopped</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">kept</span><span class="w"> </span><span class="n">running</span><span class="o">.</span><span class="w">  </span><span class="nc">As</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w">  </span><span class="n">these</span><span class="w">  </span><span class="n">same</span><span class="w">  </span><span class="n">containers</span><span class="w">  </span><span class="n">would</span><span class="w">
   </span><span class="n">survive</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">logout</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">continue</span><span class="w"> </span><span class="n">running</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w">  </span><span class="n">systemd</span><span class="w">  </span><span class="n">notes</span><span class="w">  </span><span class="n">that</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">associated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w">
   </span><span class="n">command</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="ss">out</span><span class="p">:</span><span class="w"> </span><span class="n">loginctl</span><span class="w"> </span><span class="n">enable</span><span class="o">-</span><span class="n">linger</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">revert</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">linger</span><span class="w"> </span><span class="n">functionality</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">loginctl</span><span class="w"> </span><span class="n">disable</span><span class="o">-</span><span class="n">linger</span><span class="o">.</span><span class="w">

   </span><span class="nc">LOGINCTL</span><span class="p" data-group-id="5060391459-1">(</span><span class="mi">1</span><span class="p" data-group-id="5060391459-1">)</span><span class="p">,</span><span class="w"> </span><span class="nc">SYSTEMD</span><span class="p" data-group-id="5060391459-2">(</span><span class="mi">1</span><span class="p" data-group-id="5060391459-2">)</span></code></pre><ol start="22"><li>Containers default detach keys conflict with shell history navigation
Podman defaults to ctrl-p,ctrl-q to detach from a running containers. The bash and zsh shells default to ctrl-p for the displaying of the previous command.  This  causes  issues  when
running a shell inside of a container.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">With</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">detach</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">combo</span><span class="w"> </span><span class="n">ctrl</span><span class="o">-</span><span class="n">p</span><span class="p">,</span><span class="n">ctrl</span><span class="o">-</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">history</span><span class="w"> </span><span class="n">navigation</span><span class="w"> </span><span class="p" data-group-id="4202912838-1">(</span><span class="n">tested</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">zsh</span><span class="p" data-group-id="4202912838-1">)</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">ctrl</span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">command</span><span class="p">,</span><span class="w">
   </span><span class="ow">or</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="k">else</span><span class="o">.</span><span class="w">  </span><span class="nc">Conmon</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">detach</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">Adding</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w">  </span><span class="n">it</span><span class="w">  </span><span class="n">to</span><span class="w">
   </span><span class="n">be</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">along</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">character</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">ctrl</span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mi">2</span><span class="n">nd</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">command</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">detach_keys</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ctrl</span><span class="o">-</span><span class="n">q</span><span class="p">,</span><span class="n">ctrl</span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">detach</span><span class="o">-</span><span class="n">keys</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">ti</span><span class="w"> </span><span class="o">--</span><span class="n">detach</span><span class="o">-</span><span class="n">keys</span><span class="w"> </span><span class="n">ctrl</span><span class="o">-</span><span class="n">q</span><span class="p">,</span><span class="n">ctrl</span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">sh</span><span class="w">

   </span><span class="nc">To</span><span class="w">  </span><span class="n">make</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">containers</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="n">directory</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">users</span><span class="w">
   </span><span class="n">containers</span><span class="o">.</span><span class="n">conf</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="p">&gt;&gt;</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">config</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">containers</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="p" data-group-id="0853467607-1">&lt;&lt;</span><span class="w"> </span><span class="c">_eof</span><span class="w">
   </span><span class="p" data-group-id="0853467607-2">[</span><span class="n">engine</span><span class="p" data-group-id="0853467607-2">]</span><span class="w">
   </span><span class="n">detach_keys</span><span class="o">=</span><span class="s">&quot;ctrl-q,ctrl-q&quot;</span><span class="w">
   </span><span class="c">_eof</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">effect</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">wide</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">containers</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span></code></pre><ol start="23"><li>Container with exposed ports won't run in a pod
A container with ports that have been published with the --publish or -p option can not be run within a pod.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">srcview</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">3434</span><span class="p">:</span><span class="mi">3434</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">7080</span><span class="p">:</span><span class="mi">7080</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">3370</span><span class="p">:</span><span class="mi">3370</span><span class="w">                        </span><span class="mi">4</span><span class="n">b2f4611fa2cbd60b3899b936368c2b3f4f0f68bc8e6593416e0ab8ecb0a3f1d</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">pod</span><span class="w"> </span><span class="n">srcview</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">src</span><span class="o">-</span><span class="n">expose</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">3434</span><span class="p">:</span><span class="mi">3434</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="s">&quot;${PWD}:/var/opt/localrepo&quot;</span><span class="ss">:Z</span><span class="p">,</span><span class="n">ro</span><span class="w"> </span><span class="n">sourcegraph</span><span class="o">/</span><span class="n">src</span><span class="o">-</span><span class="n">expose</span><span class="ss">:latest</span><span class="w"> </span><span class="n">serve</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">localrepo</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">bindings</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">namespace</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="n">limitation</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pod</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">necessary</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">publish</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">published</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="w">
   </span><span class="n">itself</span><span class="o">.</span><span class="w">  </span><span class="nc">Pod</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">stacks</span><span class="w"> </span><span class="n">act</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">stack</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">variety</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">programs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">sharing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="ow">and</span><span class="w">  </span><span class="nc">IP</span><span class="w">
   </span><span class="n">address</span><span class="p">,</span><span class="w">  </span><span class="ow">and</span><span class="w">  </span><span class="n">associated</span><span class="w">  </span><span class="n">ports</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">binds</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">port</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="kn">use</span><span class="o">.</span><span class="w"> </span><span class="nc">Containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">communicate</span><span class="w">
   </span><span class="n">over</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">port</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">symptom</span><span class="w"> </span><span class="n">section</span><span class="p">,</span><span class="w"> </span><span class="n">dropping</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">3434</span><span class="p">:</span><span class="mi">3434</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">complete</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">that</span><span class="w">
   </span><span class="n">port</span><span class="o">.</span><span class="w">  </span><span class="nc">For</span><span class="w"> </span><span class="ss">example</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">pod</span><span class="w"> </span><span class="n">srcview</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">src</span><span class="o">-</span><span class="n">expose</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="s">&quot;${PWD}:/var/opt/localrepo&quot;</span><span class="ss">:Z</span><span class="p">,</span><span class="n">ro</span><span class="w"> </span><span class="n">sourcegraph</span><span class="o">/</span><span class="n">src</span><span class="o">-</span><span class="n">expose</span><span class="ss">:latest</span><span class="w"> </span><span class="n">serve</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">localrepo</span></code></pre><ol start="24"><li>Podman container images fail with fuse: device not found when run
Some container images require that the fuse kernel module is loaded in the kernel before they will run with the fuse filesystem in play.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">quay</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">podman</span><span class="p">,</span><span class="w"> </span><span class="n">quay</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">containers</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubi8</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="ss">returned</span><span class="p">:</span><span class="w">

   </span><span class="nc">ERRO</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">unmounting</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">/</span><span class="n">overlay</span><span class="o">/</span><span class="mi">30</span><span class="n">c058cdadc888177361dd14a7ed7edab441c58525b341df321f07bc11440e68</span><span class="o">/</span><span class="ss">merged</span><span class="p">:</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">argument</span><span class="w">
   </span><span class="n">error</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ss">&quot;1ae176ca72b3da7c70af31db7434bcf6f94b07dbc0328bc7e4e8fc9579d0dc2e&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ss">&quot;1ae176ca72b3da7c70af31db7434bcf6f94b07dbc0328bc7e4e8fc9579d0dc2e&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">/</span><span class="n">overlay</span><span class="o">/</span><span class="mi">30</span><span class="n">c058cdadc888177361dd14a7ed7edab441c58525b341df321f07bc11440e68</span><span class="o">/</span><span class="ss">merged</span><span class="p">:</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">fuse</span><span class="o">-</span><span class="ss">overlayfs</span><span class="p">:</span><span class="w"> </span><span class="ss">fuse</span><span class="p">:</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="p">,</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="sc">&#39;modprobe fuse&#39;</span><span class="w"> </span><span class="n">first</span><span class="w">
   </span><span class="n">fuse</span><span class="o">-</span><span class="ss">overlayfs</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="ss">mount</span><span class="p">:</span><span class="w"> </span><span class="nc">No</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">device</span><span class="w">
   </span><span class="p">:</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="w">
   </span><span class="nc">ERRO</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">encounter</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ss">fuse</span><span class="p">:</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fuse</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w">   </span><span class="nc">Use</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">command</span><span class="w">
   </span><span class="n">modprobe</span><span class="w"> </span><span class="n">fuse</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">afterwards</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">modules</span><span class="o">.</span><span class="n">load</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w">
   </span><span class="n">man</span><span class="w"> </span><span class="n">modules</span><span class="o">-</span><span class="n">load</span><span class="o">.</span><span class="n">d</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">details</span><span class="o">.</span></code></pre><ol start="25"><li>podman run --rootfs link/to//read/only/dir does not work
An  error such as &quot;OCI runtime error&quot; on a read-only filesystem or the error &quot;{image} is not an absolute path or is a symlink&quot; are often times indicators for this issue.  For more de‐
tails, review this issue ⟨<a href="https://github.com/containers/podman/issues/5895%E2%9F%A9">https://github.com/containers/podman/issues/5895⟩</a>.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Rootless</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">certain</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">exist</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="o">.</span><span class="w">  </span><span class="nc">Podman</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="o">.</span><span class="n">conf</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">descriptors</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">mount</span><span class="w"> </span><span class="n">volumes</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">them</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">read</span><span class="o">/</span><span class="n">write</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">FDs</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">forward</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">rootfs</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">--</span><span class="n">rootfs</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">rootfs</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="nc">After</span><span class="w"> </span><span class="n">that</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="ss">time</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="o">--</span><span class="n">rootfs</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">rootfs</span><span class="w"> </span><span class="n">...</span><span class="o">.</span><span class="w">

   </span><span class="nc">Another</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nc">Overlay</span><span class="w"> </span><span class="nc">Rootfs</span><span class="w"> </span><span class="ss">Mount</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rootfs</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">rootfs</span><span class="ss">:O</span><span class="w"> </span><span class="n">...</span><span class="o">.</span><span class="w">

   </span><span class="nc">Modifications</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">destroyed</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">finishes</span><span class="w"> </span><span class="n">executing</span><span class="p">,</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">unmounted</span><span class="o">.</span></code></pre><ol start="26"><li>Running containers with resource limits fails with a permissions error
On some systemd-based systems, non-root users do not have resource limit delegation permissions. This causes setting resource limits to fail.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">following</span><span class="p">:</span><span class="w">

   </span><span class="o">--</span><span class="n">cpus</span><span class="p">,</span><span class="w"> </span><span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">period</span><span class="p">,</span><span class="w"> </span><span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">quota</span><span class="p">,</span><span class="w"> </span><span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="ss">shares</span><span class="p">:</span><span class="w">

   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">OCI</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="ss">crun</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="err">`</span><span class="n">cpu</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">available</span><span class="w">

   </span><span class="o">--</span><span class="n">cpuset</span><span class="o">-</span><span class="n">cpus</span><span class="p">,</span><span class="w"> </span><span class="o">--</span><span class="n">cpuset</span><span class="o">-</span><span class="ss">mems</span><span class="p">:</span><span class="w">

   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">OCI</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="ss">crun</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="err">`</span><span class="n">cpuset</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">available</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">delegation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">enabled</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">user</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">verify</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">delegation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">enabled</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">command</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="s">&quot;/sys/fs/cgroup/user.slice/user-$(id -u).slice/user@$(id -u).service/cgroup.controllers&quot;</span><span class="w">

   </span><span class="nc">Example</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="ss">be</span><span class="p">:</span><span class="w">

   </span><span class="n">memory</span><span class="w"> </span><span class="n">pids</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">cpu</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">cpuset</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">listed</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="nc">CPU</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">CPUSET</span><span class="w"> </span><span class="n">limits</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="nc">CPU</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">CPUSET</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">delegation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">user</span><span class="err">@</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">delegate</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">contents</span><span class="p">:</span><span class="w">

   </span><span class="p" data-group-id="2889369191-1">[</span><span class="nc">Service</span><span class="p" data-group-id="2889369191-1">]</span><span class="w">
   </span><span class="nc">Delegate</span><span class="o">=</span><span class="n">memory</span><span class="w"> </span><span class="n">pids</span><span class="w"> </span><span class="n">cpu</span><span class="w"> </span><span class="n">cpuset</span><span class="w">

   </span><span class="nc">After</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="ow">in</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="nc">CPU</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">CPUSET</span><span class="w"> </span><span class="n">limits</span><span class="o">.</span></code></pre><ol start="27"><li><p>exec container process '/bin/sh': Exec format error (or another binary than bin/sh)
This can happen when running a container from an image for another architecture than the one you are running on.</p><p>For example, if a remote repository only has, and thus send you, a linux/arm64 OS/ARCH but you run on linux/amd64 (as happened  in  <a href="https://github.com/openMF/community-app/issues/3323">https://github.com/openMF/community-app/issues/3323</a>
due to <a href="https://github.com/timbru31/docker-ruby-node/issues/564">https://github.com/timbru31/docker-ruby-node/issues/564</a>).</p></li><li><p> Error:  failed  to  create sshClient: Connection to bastion host (ssh://user@host:22/run/user/.../podman/podman.sock) failed.: ssh: handshake failed: ssh: unable to authenticate, at‐
tempted methods [none publickey], no supported methods remain
In some situations where the client is not on the same machine as where the podman daemon is running the client key could be using a cipher not supported by the host.  This  indicates
an issue with one's SSH config. Until remedied using podman over ssh with a pre-shared key will be impossible.</p></li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w">  </span><span class="n">accepted</span><span class="w">  </span><span class="n">ciphers</span><span class="w">  </span><span class="n">per</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">crypto</span><span class="o">-</span><span class="n">policies</span><span class="o">/</span><span class="n">back</span><span class="o">-</span><span class="n">ends</span><span class="o">/</span><span class="n">openssh</span><span class="o">.</span><span class="n">config</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">public</span><span class="o">/</span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">transferred</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">ssh</span><span class="w">
   </span><span class="n">authentication</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">confirm</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">attempting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">podman</span><span class="o">-</span><span class="n">remote</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">simultaneously</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">journalctl</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">watching</span><span class="w"> </span><span class="k">for</span><span class="w">  </span><span class="n">the</span><span class="w">
   </span><span class="n">error</span><span class="w"> </span><span class="ss">userauth_pubkey</span><span class="p">:</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">PubkeyAcceptedAlgorithms</span><span class="w"> </span><span class="p" data-group-id="4043153797-1">[</span><span class="n">preauth</span><span class="p" data-group-id="4043153797-1">]</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="ss">ecdsa</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ecdsa</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">podman</span><span class="w">

   </span><span class="nc">Then</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="ss">over</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">podman</span><span class="o">.</span><span class="n">pub</span><span class="w"> </span><span class="n">user</span><span class="na">@host</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">re</span><span class="o">-</span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="p" data-group-id="3202725742-1">(</span><span class="n">removing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">necessary</span><span class="p" data-group-id="3202725742-1">)</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="o">-</span><span class="n">remote</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">myuser</span><span class="w"> </span><span class="o">--</span><span class="n">identity</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="o">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">podman</span><span class="w"> </span><span class="n">ssh</span><span class="ss">://</span><span class="n">user</span><span class="na">@host</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">1000</span><span class="o">/</span><span class="n">podman</span><span class="o">/</span><span class="n">podman</span><span class="o">.</span><span class="n">sock</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ss">work</span><span class="p">:</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="o">-</span><span class="n">remote</span><span class="w"> </span><span class="n">info</span></code></pre><ol start="29"><li>Rootless CNI networking fails in RHEL with Podman v2.2.1 to v3.0.1.
A failure is encountered when trying to use networking on a rootless container in Podman v2.2.1 through v3.0.1 on RHEL.  This error does not occur on other Linux distributions.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">CNI</span><span class="w"> </span><span class="n">network</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">built</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w">  </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">CNI</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="nc">RHEL</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nc">Infra</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nc">CNI</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">slirp4netns</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">building</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Infra</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">im</span><span class="err">‐</span><span class="w">
   </span><span class="n">age</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">v2</span><span class="o">.</span><span class="mf">2.1</span><span class="w"> </span><span class="n">here</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">v3</span><span class="o">.</span><span class="mf">0.1</span><span class="w"> </span><span class="n">here</span><span class="o">.</span></code></pre><ol start="30"><li>Container related firewall rules are lost after reloading firewalld
Container network can't be reached after firewall-cmd --reload and systemctl restart firewalld Running podman network reload will fix it but it has to be done manually.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">firewall</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">lost</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">firewall</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">reloaded</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="na">@ranjithrajaram</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fix</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">issue</span><span class="w">

   </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="s">&quot;firewall-cmd --reload&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w">

   </span><span class="p" data-group-id="1850357429-1">[</span><span class="nc">Unit</span><span class="p" data-group-id="1850357429-1">]</span><span class="w">
   </span><span class="nc">Description</span><span class="o">=</span><span class="n">firewalld</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="n">reload</span><span class="w">
   </span><span class="nc">Wants</span><span class="o">=</span><span class="n">dbus</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">After</span><span class="o">=</span><span class="n">dbus</span><span class="o">.</span><span class="n">service</span><span class="w">

   </span><span class="p" data-group-id="1850357429-2">[</span><span class="nc">Service</span><span class="p" data-group-id="1850357429-2">]</span><span class="w">
   </span><span class="nc">Type</span><span class="o">=</span><span class="n">simple</span><span class="w">
   </span><span class="nc">ExecStart</span><span class="o">=</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="sc">&#39;/bin/busctl monitor --system --match &quot;interface=org.fedoraproject.FirewallD1,member=Reloaded&quot; --match &quot;interface=org.fedoraproject.FirewallD1,member=PropertiesChanged&quot; | while read -r line ; do podman network reload --all ; done&#39;</span><span class="w">

   </span><span class="p" data-group-id="1850357429-3">[</span><span class="nc">Install</span><span class="p" data-group-id="1850357429-3">]</span><span class="w">
   </span><span class="nc">WantedBy</span><span class="o">=</span><span class="n">default</span><span class="o">.</span><span class="n">target</span><span class="w">

   </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="s">&quot;systemctl restart firewalld&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w">

   </span><span class="p" data-group-id="1850357429-4">[</span><span class="nc">Unit</span><span class="p" data-group-id="1850357429-4">]</span><span class="w">
   </span><span class="nc">Description</span><span class="o">=</span><span class="n">podman</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">reload</span><span class="w">
   </span><span class="nc">Wants</span><span class="o">=</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">After</span><span class="o">=</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">PartOf</span><span class="o">=</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="w">

   </span><span class="p" data-group-id="1850357429-5">[</span><span class="nc">Service</span><span class="p" data-group-id="1850357429-5">]</span><span class="w">
   </span><span class="nc">Type</span><span class="o">=</span><span class="n">simple</span><span class="w">
   </span><span class="nc">RemainAfterExit</span><span class="o">=</span><span class="n">yes</span><span class="w">
   </span><span class="nc">ExecStart</span><span class="o">=</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">podman</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="w">

   </span><span class="p" data-group-id="1850357429-6">[</span><span class="nc">Install</span><span class="p" data-group-id="1850357429-6">]</span><span class="w">
   </span><span class="nc">WantedBy</span><span class="o">=</span><span class="n">default</span><span class="o">.</span><span class="n">target</span><span class="w">

   </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">busctl</span><span class="w"> </span><span class="n">monitor</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="sc">&#39;t get machine-readable output on RHEL 8.  Since it doesn&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">busctl</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">mentioned</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="na">@yrro</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="nc">RHEL</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">one</span><span class="o">-</span><span class="n">liner</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="n">script</span><span class="o">.</span><span class="w">

   </span><span class="p" data-group-id="1850357429-7">[</span><span class="nc">Unit</span><span class="p" data-group-id="1850357429-7">]</span><span class="w">
   </span><span class="nc">Description</span><span class="o">=</span><span class="nc">Redo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="nc">NAT</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">reloads</span><span class="w">
   </span><span class="nc">Wants</span><span class="o">=</span><span class="n">dbus</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">After</span><span class="o">=</span><span class="n">dbus</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">Requires</span><span class="o">=</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="w">

   </span><span class="p" data-group-id="1850357429-8">[</span><span class="nc">Service</span><span class="p" data-group-id="1850357429-8">]</span><span class="w">
   </span><span class="nc">Type</span><span class="o">=</span><span class="n">simple</span><span class="w">
   </span><span class="nc">ExecStart</span><span class="o">=</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s">&quot;dbus-monitor --profile --system &#39;type=signal,sender=org.freedesktop.DBus,path=/org/freedesktop/DBus,interface=org.freedesktop.DBus,member=NameAcquired,arg0=org.fedoraproject.FirewallD1&#39; &#39;type=signal,path=/org/fedoraproject/FirewallD1,interface=org.fedoraproject.FirewallD1,member=Reloaded&#39; | sed -u &#39;/^#/d&#39; | while read -r type timestamp serial sender destination path interface member _junk; do if [[ $type = &#39;#&#39;* ]]; then continue; elif [[ $interface = org.freedesktop.DBus &amp;&amp; $member = NameAcquired ]]; then echo &#39;firewalld started&#39;; podman network reload --all; elif [[ $interface = org.fedoraproject.FirewallD1 &amp;&amp; $member = Reloaded ]]; then echo &#39;firewalld reloaded&#39;; podman network reload --all; fi; done&quot;</span><span class="w">
   </span><span class="nc">Restart</span><span class="o">=</span><span class="nc">Always</span><span class="w">

   </span><span class="p" data-group-id="1850357429-9">[</span><span class="nc">Install</span><span class="p" data-group-id="1850357429-9">]</span><span class="w">
   </span><span class="nc">WantedBy</span><span class="o">=</span><span class="n">default</span><span class="o">.</span><span class="n">target</span><span class="w">

   </span><span class="n">busctl</span><span class="o">-</span><span class="n">monitor</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">almost</span><span class="w"> </span><span class="n">usable</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">RHEL</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">bogus</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="n">up</span><span class="p">,</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="p" data-group-id="1850357429-10">(</span><span class="ow">in</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">only</span><span class="w">  </span><span class="n">machine</span><span class="o">-</span><span class="n">readable</span><span class="w">  </span><span class="n">format</span><span class="p" data-group-id="1850357429-10">)</span><span class="w">  </span><span class="n">indistinguishable</span><span class="w">
   </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">NameOwnerChanged</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="n">up</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">reload</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">starts</span><span class="o">.</span><span class="w">

   </span><span class="nc">Apart</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">python3</span><span class="w"> </span><span class="n">code</span><span class="o">.</span><span class="w">

   </span><span class="p" data-group-id="1850357429-11">[</span><span class="nc">Unit</span><span class="p" data-group-id="1850357429-11">]</span><span class="w">
   </span><span class="nc">Description</span><span class="o">=</span><span class="nc">Redo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="nc">NAT</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">reloads</span><span class="w">
   </span><span class="nc">Wants</span><span class="o">=</span><span class="n">dbus</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">Requires</span><span class="o">=</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="w">
   </span><span class="nc">After</span><span class="o">=</span><span class="n">dbus</span><span class="o">.</span><span class="n">service</span><span class="w">

   </span><span class="p" data-group-id="1850357429-12">[</span><span class="nc">Service</span><span class="p" data-group-id="1850357429-12">]</span><span class="w">
   </span><span class="nc">Type</span><span class="o">=</span><span class="n">simple</span><span class="w">
   </span><span class="nc">ExecStart</span><span class="o">=</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python</span><span class="w">  </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">podman</span><span class="o">-</span><span class="n">redo</span><span class="o">-</span><span class="n">nat</span><span class="o">.</span><span class="n">py</span><span class="w">
   </span><span class="nc">Restart</span><span class="o">=</span><span class="n">always</span><span class="w">

   </span><span class="p" data-group-id="1850357429-13">[</span><span class="nc">Install</span><span class="p" data-group-id="1850357429-13">]</span><span class="w">
   </span><span class="nc">WantedBy</span><span class="o">=</span><span class="n">default</span><span class="o">.</span><span class="n">target</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">reloads</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">twice</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">restart</span><span class="w"> </span><span class="n">firewalld</span><span class="o">.</span><span class="w">

   </span><span class="kn">import</span><span class="w"> </span><span class="n">dbus</span><span class="w">
   </span><span class="n">from</span><span class="w"> </span><span class="n">gi</span><span class="o">.</span><span class="n">repository</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nc">GLib</span><span class="w">
   </span><span class="n">from</span><span class="w"> </span><span class="n">dbus</span><span class="o">.</span><span class="n">mainloop</span><span class="o">.</span><span class="n">glib</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nc">DBusGMainLoop</span><span class="w">
   </span><span class="kn">import</span><span class="w"> </span><span class="n">subprocess</span><span class="w">
   </span><span class="kn">import</span><span class="w"> </span><span class="n">sys</span><span class="w">

   </span><span class="c1"># I&#39;m a bit confused on the return values in the code</span><span class="w">
   </span><span class="c1"># Not sure if they are needed.</span><span class="w">

   </span><span class="kd">def</span><span class="w"> </span><span class="nf">reload_podman_network</span><span class="p" data-group-id="1850357429-14">(</span><span class="p" data-group-id="1850357429-14">)</span><span class="p">:</span><span class="w">
       </span><span class="ss">try</span><span class="p">:</span><span class="w">
           </span><span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p" data-group-id="1850357429-15">(</span><span class="p" data-group-id="1850357429-16">[</span><span class="s">&quot;podman&quot;</span><span class="p">,</span><span class="s">&quot;network&quot;</span><span class="p">,</span><span class="s">&quot;reload&quot;</span><span class="p">,</span><span class="s">&quot;--all&quot;</span><span class="p" data-group-id="1850357429-16">]</span><span class="p">,</span><span class="n">timeout</span><span class="o">=</span><span class="mi">90</span><span class="p" data-group-id="1850357429-15">)</span><span class="w">
           </span><span class="c1"># I&#39;m not sure about this part</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="1850357429-17">(</span><span class="s">&quot;podman network reload done</span><span class="se">\n</span><span class="s">&quot;</span><span class="p" data-group-id="1850357429-17">)</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p" data-group-id="1850357429-18">(</span><span class="p" data-group-id="1850357429-18">)</span><span class="w">
       </span><span class="n">except</span><span class="w"> </span><span class="n">subprocess</span><span class="o">.</span><span class="nc">TimeoutExpired</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ss">t</span><span class="p">:</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="1850357429-19">(</span><span class="n">f</span><span class="s">&quot;Podman reload failed due to Timeout {t}&quot;</span><span class="p" data-group-id="1850357429-19">)</span><span class="w">
       </span><span class="n">except</span><span class="w"> </span><span class="n">subprocess</span><span class="o">.</span><span class="nc">CalledProcessError</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ss">e</span><span class="p">:</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="1850357429-20">(</span><span class="n">f</span><span class="s">&quot;Podman reload failed due to {e}&quot;</span><span class="p" data-group-id="1850357429-20">)</span><span class="w">
       </span><span class="n">except</span><span class="w"> </span><span class="nc">Exception</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ss">e</span><span class="p">:</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="1850357429-21">(</span><span class="n">f</span><span class="s">&quot;Podman reload failed with an Unhandled Exception {e}&quot;</span><span class="p" data-group-id="1850357429-21">)</span><span class="w">

       </span><span class="n">return</span><span class="w"> </span><span class="nc">False</span><span class="w">

   </span><span class="kd">def</span><span class="w"> </span><span class="nf">signal_handler</span><span class="p" data-group-id="1850357429-22">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="o">*</span><span class="n">kwargs</span><span class="p" data-group-id="1850357429-22">)</span><span class="p">:</span><span class="w">
       </span><span class="k">if</span><span class="w"> </span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="1850357429-23">(</span><span class="sc">&#39;member&#39;</span><span class="p" data-group-id="1850357429-23">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;Reloaded&quot;</span><span class="p">:</span><span class="w">
           </span><span class="n">reload_podman_network</span><span class="p" data-group-id="1850357429-24">(</span><span class="p" data-group-id="1850357429-24">)</span><span class="w">
       </span><span class="n">elif</span><span class="w"> </span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="1850357429-25">(</span><span class="sc">&#39;member&#39;</span><span class="p" data-group-id="1850357429-25">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;NameOwnerChanged&quot;</span><span class="p">:</span><span class="w">
           </span><span class="n">reload_podman_network</span><span class="p" data-group-id="1850357429-26">(</span><span class="p" data-group-id="1850357429-26">)</span><span class="w">
       </span><span class="ss">else</span><span class="p">:</span><span class="w">
           </span><span class="n">return</span><span class="w"> </span><span class="nc">None</span><span class="w">
       </span><span class="n">return</span><span class="w"> </span><span class="nc">None</span><span class="w">

   </span><span class="kd">def</span><span class="w"> </span><span class="nf">signal_listener</span><span class="p" data-group-id="1850357429-27">(</span><span class="p" data-group-id="1850357429-27">)</span><span class="p">:</span><span class="w">
       </span><span class="ss">try</span><span class="p">:</span><span class="w">
           </span><span class="nc">DBusGMainLoop</span><span class="p" data-group-id="1850357429-28">(</span><span class="n">set_as_default</span><span class="o">=</span><span class="nc">True</span><span class="p" data-group-id="1850357429-28">)</span><span class="c1"># Define the loop.</span><span class="w">
           </span><span class="n">loop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">GLib.MainLoop</span><span class="p" data-group-id="1850357429-29">(</span><span class="p" data-group-id="1850357429-29">)</span><span class="w">
           </span><span class="n">system_bus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbus</span><span class="o">.</span><span class="nc">SystemBus</span><span class="p" data-group-id="1850357429-30">(</span><span class="p" data-group-id="1850357429-30">)</span><span class="w">
           </span><span class="c1"># Listens to systemctl restart firewalld with a filter added, will cause podman network to be reloaded twice</span><span class="w">
           </span><span class="n">system_bus</span><span class="o">.</span><span class="n">add_signal_receiver</span><span class="p" data-group-id="1850357429-31">(</span><span class="n">signal_handler</span><span class="p">,</span><span class="n">dbus_interface</span><span class="o">=</span><span class="sc">&#39;org.freedesktop.DBus&#39;</span><span class="p">,</span><span class="n">arg0</span><span class="o">=</span><span class="sc">&#39;org.fedoraproject.FirewallD1&#39;</span><span class="p">,</span><span class="n">member_keyword</span><span class="o">=</span><span class="sc">&#39;member&#39;</span><span class="p" data-group-id="1850357429-31">)</span><span class="w">
           </span><span class="c1"># Listens to firewall-cmd --reload</span><span class="w">
           </span><span class="n">system_bus</span><span class="o">.</span><span class="n">add_signal_receiver</span><span class="p" data-group-id="1850357429-32">(</span><span class="n">signal_handler</span><span class="p">,</span><span class="n">dbus_interface</span><span class="o">=</span><span class="sc">&#39;org.fedoraproject.FirewallD1&#39;</span><span class="p">,</span><span class="n">signal_name</span><span class="o">=</span><span class="sc">&#39;Reloaded&#39;</span><span class="p">,</span><span class="n">member_keyword</span><span class="o">=</span><span class="sc">&#39;member&#39;</span><span class="p" data-group-id="1850357429-32">)</span><span class="w">
           </span><span class="n">loop</span><span class="o">.</span><span class="n">run</span><span class="p" data-group-id="1850357429-33">(</span><span class="p" data-group-id="1850357429-33">)</span><span class="w">
       </span><span class="n">except</span><span class="w"> </span><span class="ss">KeyboardInterrupt</span><span class="p">:</span><span class="w">
           </span><span class="n">loop</span><span class="o">.</span><span class="n">quit</span><span class="p" data-group-id="1850357429-34">(</span><span class="p" data-group-id="1850357429-34">)</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p" data-group-id="1850357429-35">(</span><span class="mi">0</span><span class="p" data-group-id="1850357429-35">)</span><span class="w">
       </span><span class="n">except</span><span class="w"> </span><span class="nc">Exception</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ss">e</span><span class="p">:</span><span class="w">
           </span><span class="n">loop</span><span class="o">.</span><span class="n">quit</span><span class="p" data-group-id="1850357429-36">(</span><span class="p" data-group-id="1850357429-36">)</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="1850357429-37">(</span><span class="n">f</span><span class="s">&quot;Error occurred {e}&quot;</span><span class="p" data-group-id="1850357429-37">)</span><span class="w">
           </span><span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p" data-group-id="1850357429-38">(</span><span class="mi">1</span><span class="p" data-group-id="1850357429-38">)</span><span class="w">

   </span><span class="k">if</span><span class="w"> </span><span class="c">__name__</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;__main__&quot;</span><span class="p">:</span><span class="w">
       </span><span class="n">signal_listener</span><span class="p" data-group-id="1850357429-39">(</span><span class="p" data-group-id="1850357429-39">)</span></code></pre><ol start="31"><li>Podman run fails with ERRO[0000] XDG_RUNTIME_DIR directory /run/user/0 is not owned by the current user or Error: creating tmpdir: mkdir /run/user/1000: permission denied.
A failure is encountered when performing podman run with a warning XDG_RUNTIME_DIR is pointing to a path which is not writable. Most likely podman will fail.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">invoked</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">cgroupv2</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">session</span><span class="o">.</span><span class="w">

   </span><span class="nc">Example</span><span class="w"> </span><span class="n">cases</span><span class="w">

   </span><span class="c1"># su user1 -c &#39;podman images&#39;</span><span class="w">
   </span><span class="nc">ERRO</span><span class="p" data-group-id="0489726761-1">[</span><span class="mi">0000</span><span class="p" data-group-id="0489726761-1">]</span><span class="w"> </span><span class="nc">XDG_RUNTIME_DIR</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s">&quot;/run/user/0&quot;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">owned</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">user</span><span class="w">

   </span><span class="c1"># su - user1 -c &#39;podman images&#39;</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="ss">tmpdir</span><span class="p">:</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">1000</span><span class="p">:</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">denied</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Podman</span><span class="w">  </span><span class="n">expects</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">valid</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootless</span><span class="o">+</span><span class="n">cgroupv2</span><span class="w"> </span><span class="kn">use</span><span class="o">-</span><span class="k">case</span><span class="o">.</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">present</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">cases</span><span class="p">,</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">figure</span><span class="w">
   </span><span class="n">out</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nc">XDG_RUNTIME_DIR</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">pointing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">writable</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="n">fail</span><span class="o">.</span><span class="w"> </span><span class="nc">Typical</span><span class="w"> </span><span class="n">scenarios</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">seen</span><span class="w">  </span><span class="ow">when</span><span class="w">  </span><span class="n">users</span><span class="w">  </span><span class="n">are</span><span class="w">
   </span><span class="n">trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">su</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="sc">&#39;&lt;podman-command&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">badly</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">session</span><span class="o">.</span><span class="w">

   </span><span class="ss">Alternatives</span><span class="p">:</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Execute</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">run</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="ss">session</span><span class="p">:</span><span class="w">

     </span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">machine</span><span class="o">=</span><span class="n">username</span><span class="err">@</span><span class="w"> </span><span class="o">--</span><span class="n">quiet</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="o">--</span><span class="n">collect</span><span class="w"> </span><span class="o">--</span><span class="n">pipe</span><span class="w"> </span><span class="o">--</span><span class="n">wait</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">alpine</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">hello</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Start</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">interactive</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">machinectl</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="err">@</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="nc">Podman</span><span class="w">

     </span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w">
     </span><span class="c1"># machinectl shell username@</span><span class="w">
     </span><span class="nc">Connected</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w"> </span><span class="nc">Press</span><span class="w"> </span><span class="o">^</span><span class="p">]</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="mi">1</span><span class="n">s</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">session</span><span class="o">.</span><span class="w">
     </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">alpine</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">hello</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Start</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="na">@localhost</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="nc">Podman</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Before</span><span class="w"> </span><span class="n">invoking</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">loginctl</span><span class="w"> </span><span class="n">enable</span><span class="o">-</span><span class="n">linger</span><span class="w"> </span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span></code></pre><ol start="32"><li>127.0.0.1:7777 port already bound
After deleting a VM on macOS, the initialization of subsequent VMs fails.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">After</span><span class="w">  </span><span class="n">deleting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="nc">VM</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">macOS</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">rm</span><span class="p">,</span><span class="w"> </span><span class="n">attempting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="nc">VM</span><span class="w"> </span><span class="n">leads</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">7777</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">al</span><span class="err">‐</span><span class="w">
   </span><span class="n">ready</span><span class="w"> </span><span class="n">bound</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hanging</span><span class="w"> </span><span class="n">gv</span><span class="o">-</span><span class="n">proxy</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">question</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">mentioned</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">7777</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">command</span><span class="w">
   </span><span class="n">kill</span><span class="w"> </span><span class="o">-</span><span class="mi">9</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="3833570103-1">(</span><span class="n">lsof</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="p">:</span><span class="mi">7777</span><span class="p" data-group-id="3833570103-1">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">identify</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hanging</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">prevents</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nc">VM</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">port</span><span class="o">.</span></code></pre><ol start="33"><li>The sshd process fails to run inside of the container.
Symptom
The sshd process running inside the container fails with the error &quot;Error writing /proc/self/loginuid&quot;.</li></ol><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">loginuid</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">initialized</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">CAP_AUDIT_CONTROL</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w">  </span><span class="n">happens</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">loginuid</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">initialized</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="nc">Podman</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="o">-</span><span class="n">remote</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">run</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">...</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="nc">CAP_AU</span><span class="err">‐</span><span class="w">
   </span><span class="nc">DIT_WRITE</span><span class="o">.</span></code></pre><ol start="34"><li>Container creates a file that is not owned by the user's regular UID
After running a container with rootless Podman, the non-root user sees a numerical UID and GID instead of a username and groupname.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">listing</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">permissions</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">--</span><span class="n">volume</span><span class="w"> </span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">dir</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">rather</span><span class="w">  </span><span class="n">than</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">corresponding</span><span class="w">
   </span><span class="n">username</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">groupname</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">subordinate</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w">

   </span><span class="nc">An</span><span class="w"> </span><span class="n">example</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">777</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">.</span><span class="o">/</span><span class="n">dir1</span><span class="ss">:/</span><span class="n">dir1</span><span class="ss">:Z</span><span class="w">
                </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="mi">2003</span><span class="p">:</span><span class="mi">2003</span><span class="w">
                </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s">&quot;touch /dir1/a; chmod 600 /dir1/a&quot;</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w">
   </span><span class="o">-</span><span class="n">rw</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">102002</span><span class="w"> </span><span class="mi">102002</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nc">Jan</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="mi">19</span><span class="p">:</span><span class="mi">35</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">less</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w">
   </span><span class="ss">less</span><span class="p">:</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Permission</span><span class="w"> </span><span class="n">denied</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="p">,</span><span class="w"> </span><span class="n">chown</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="o">.</span><span class="w"> </span><span class="nc">Instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">less</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">prepend</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">pod</span><span class="err">‐</span><span class="w">
   </span><span class="n">man</span><span class="w">  </span><span class="n">unshare</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="p">,</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">unshare</span><span class="w"> </span><span class="n">less</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">unshare</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ownership</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span><span class="n">user</span><span class="sc">&#39;s UID and GID, run podman unshare chown 0:0
   dir1/a.  A file having the ownership 0:0 in the user namespace is owned by the regular user on the host. To use Bash features, such as variable expansion and  globbing,  you  need  to
   wrap the command with bash -c, e.g.  podman unshare bash -c &#39;</span><span class="n">ls</span><span class="w"> </span><span class="err">$</span><span class="nc">HOME</span><span class="o">/</span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="o">*</span><span class="sc">&#39;.

   Would  it  have  been  possible  to  run  Podman  in  another  way  so  that  your  regular  user  would  have become the owner of the file? Yes, you can use the option --userns keep-
   id:uid=$uid,gid=$gid to change how UIDs and GIDs are mapped between the container and the host. Let&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">out</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">shows</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="mi">102002</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="mi">102002</span><span class="o">.</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">variables</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">uid_from_ls</span><span class="o">=</span><span class="mi">102002</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">gid_from_ls</span><span class="o">=</span><span class="mi">102002</span><span class="w">

   </span><span class="nc">Set</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lowest</span><span class="w"> </span><span class="n">subordinate</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">lowest_subuid</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="2875474925-1">(</span><span class="n">podman</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">--</span><span class="n">format</span><span class="w"> </span><span class="s">&quot;{{ (index .Host.IDMappings.UIDMap 1).HostID }}&quot;</span><span class="p" data-group-id="2875474925-1">)</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">lowest_subgid</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="2875474925-2">(</span><span class="n">podman</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">--</span><span class="n">format</span><span class="w"> </span><span class="s">&quot;{{ (index .Host.IDMappings.GIDMap 1).HostID }}&quot;</span><span class="p" data-group-id="2875474925-2">)</span><span class="w">

   </span><span class="nc">Compute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">uid</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="2875474925-3">(</span><span class="p" data-group-id="2875474925-4">(</span><span class="w"> </span><span class="err">$</span><span class="n">uid_from_ls</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">$</span><span class="n">lowest_subuid</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2875474925-4">)</span><span class="p" data-group-id="2875474925-3">)</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">gid</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="2875474925-5">(</span><span class="p" data-group-id="2875474925-6">(</span><span class="w"> </span><span class="err">$</span><span class="n">gid_from_ls</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">$</span><span class="n">lowest_subgid</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2875474925-6">)</span><span class="p" data-group-id="2875474925-5">)</span><span class="w">

   </span><span class="p" data-group-id="2875474925-7">(</span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">computation</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">range</span><span class="p" data-group-id="2875474925-7">)</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="w">
   </span><span class="mi">2003</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="err">$</span><span class="n">gid</span><span class="w">
   </span><span class="mi">2003</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">computation</span><span class="w"> </span><span class="n">shows</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">2003</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">2003</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">surprise</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">before</span><span class="w">  </span><span class="k">with</span><span class="w">  </span><span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="mi">2003</span><span class="p">:</span><span class="mi">2003</span><span class="p">,</span><span class="w">  </span><span class="n">but</span><span class="w">  </span><span class="n">the</span><span class="w">
   </span><span class="n">same</span><span class="w"> </span><span class="n">computation</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">whenever</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">

   </span><span class="nc">Run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">again</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GIDs</span><span class="w"> </span><span class="n">mapped</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">777</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w">
     </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">.</span><span class="o">/</span><span class="n">dir1</span><span class="ss">:/</span><span class="n">dir1</span><span class="ss">:Z</span><span class="w">
     </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="p">:</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="o">--</span><span class="n">userns</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="ss">:uid</span><span class="o">=</span><span class="err">$</span><span class="n">uid</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="err">$</span><span class="n">gid</span><span class="w">
        </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s">&quot;touch /dir1/a; chmod 600 /dir1/a&quot;</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">u</span><span class="w">
   </span><span class="n">tester</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w">
   </span><span class="n">tester</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w">
   </span><span class="o">-</span><span class="n">rw</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">-</span><span class="o">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">tester</span><span class="w"> </span><span class="n">tester</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nc">Jan</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="mi">20</span><span class="p">:</span><span class="mi">31</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">a</span><span class="w">
   </span><span class="err">$</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">As</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">inspect</span><span class="w"> </span><span class="o">--</span><span class="n">format</span><span class="w"> </span><span class="s">&quot;user: {{.User}}&quot;</span><span class="w"> </span><span class="nc">IMAGE</span><span class="w">
   </span><span class="ss">user</span><span class="p">:</span><span class="w"> </span><span class="n">hpc</span><span class="w">

   </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">problem</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="o">.</span><span class="w">

   </span><span class="nc">Another</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">problem</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="n">root</span><span class="ss">:root</span><span class="w"> </span><span class="p" data-group-id="2875474925-8">(</span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="2875474925-8">)</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">root</span><span class="w"> </span><span class="n">owned</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="p" data-group-id="2875474925-9">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">them</span><span class="err">‐</span><span class="w">
   </span><span class="n">selves</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">switching</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">effective</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">rootless</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">files</span><span class="p" data-group-id="2875474925-9">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">troubleshooting</span><span class="w"> </span><span class="ss">tip</span><span class="p">:</span><span class="w">

   </span><span class="err">⟨</span><span class="c1">#39-podman-run-fails-with-error-unrecognized-namespace-mode-keep-iduid1000gid1000-passed⟩</span></code></pre><ol start="35"><li><p>Passed-in devices or files can't be accessed in rootless container (UID/GID mapping problem)
As a non-root user you have access rights to devices, files and directories that you want to pass into a rootless container with --device=..., --volume=... or --mount=...</p><p>Podman  by  default  maps  a non-root user inside a container to one of the user's subordinate UIDs and subordinate GIDs on the host. When the container user tries to access a file, a
&quot;Permission denied&quot; error could occur because the container user does not have the permissions of the regular user of the host.</p></li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="err">•</span><span class="w"> </span><span class="nc">Any</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">rejected</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s">&quot;Permission denied&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">device</span><span class="o">=</span><span class="o">..</span><span class="p">,</span><span class="o">--</span><span class="n">volume</span><span class="o">=</span><span class="o">..</span><span class="w"> </span><span class="ow">or</span><span class="w">  </span><span class="o">--</span><span class="n">mount</span><span class="o">=</span><span class="o">..</span><span class="p">,</span><span class="w">
            </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">700</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">.</span><span class="o">/</span><span class="n">dir1</span><span class="ss">:/</span><span class="n">dir1</span><span class="ss">:Z</span><span class="w">
                </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="mi">2003</span><span class="p">:</span><span class="mi">2003</span><span class="w">
                </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">/</span><span class="n">dir1</span><span class="w">
   </span><span class="ss">ls</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="ss">&#39;/dir1&#39;</span><span class="p">:</span><span class="w"> </span><span class="nc">Permission</span><span class="w"> </span><span class="n">denied</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">We</span><span class="w"> </span><span class="n">follow</span><span class="w"> </span><span class="n">essentially</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">troubleshooting</span><span class="w"> </span><span class="ss">tip</span><span class="p">:</span><span class="w">

   </span><span class="err">⟨</span><span class="c1">#34-container-creates-a-file-that-is-not-owned-by-the-users-regular-uid⟩</span><span class="w">

   </span><span class="n">but</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">problem</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">can</span><span class="sc">&#39;t be as easily computed by mere addition and subtraction.

   In other words, it might be more challenging to find out the UID and the GID inside the container that we want to map to the regular user on the host.

   If the --user option is used together with a numerical UID and GID to specify a rootless user, we already know the answer.

   If the --user option is used together with a username and groupname, we could look up the UID and GID in the file /etc/passwd of the container.

   If the container user is not set via --user but instead from the container image, we could inspect the container image

   $ podman image inspect --format &quot;user: {{.User}}&quot; IMAGE
   user: hpc

   and then look it up in /etc/passwd of the container.

   If the problem occurs in a container that is started to run as root but later switches to an effictive UID of a rootless user, it might be less straightforward to find out the UID and
   the GID. Reading the Containerfile, Dockerfile or the /etc/passwd could give a clue.

   To run the container with the rootless container UID and GID mapped to the user&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">follow</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="ss">steps</span><span class="p">:</span><span class="w">

   </span><span class="nc">Set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">uid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">gid</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Bash</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">uid</span><span class="o">=</span><span class="mi">2003</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">gid</span><span class="o">=</span><span class="mi">2003</span><span class="w">

   </span><span class="ow">and</span><span class="w"> </span><span class="n">run</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">dir1</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">txt</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">700</span><span class="w"> </span><span class="n">dir1</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">txt</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w">
     </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">.</span><span class="o">/</span><span class="n">dir1</span><span class="ss">:/</span><span class="n">dir1</span><span class="ss">:Z</span><span class="w">
     </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="p">:</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="o">--</span><span class="n">userns</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="ss">:uid</span><span class="o">=</span><span class="err">$</span><span class="n">uid</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">alpine</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">dir1</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">txt</span><span class="w">
   </span><span class="n">hello</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">troubleshooting</span><span class="w"> </span><span class="ss">tip</span><span class="p">:</span><span class="w">

   </span><span class="err">⟨</span><span class="c1">#39-podman-run-fails-with-error-unrecognized-namespace-mode-keep-iduid1000gid1000-passed⟩</span></code></pre><ol start="36"><li>Images in the additional stores can be deleted even if there are containers using them
When an image in an additional store is used, it is not locked thus it can be deleted even if there are containers using it.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">WARN</span><span class="p" data-group-id="6794835124-1">[</span><span class="mi">0000</span><span class="p" data-group-id="6794835124-1">]</span><span class="w"> </span><span class="nc">Can</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="s">&quot;/var/lib/containers/storage/overlay/l/7HS76F2P5N73FDUKUQAOJA3WI5&quot;</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span><span class="o">.</span><span class="w"> </span><span class="nc">Going</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">recreate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">symlinks</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">responsibility</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">deleted</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">store</span><span class="o">.</span></code></pre><ol start="37"><li>Syncing bugfixes for podman-remote or setups using Podman API
After upgrading Podman to a newer version an issue with the earlier version of Podman still presents itself while using podman-remote.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">While</span><span class="w">  </span><span class="n">running</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="nc">Podman</span><span class="p">,</span><span class="w"> </span><span class="n">issues</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">arise</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">server</span><span class="w">
   </span><span class="n">side</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">upgrading</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">fixes</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mistake</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">upgrading</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="w"> </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">suppose</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">podman</span><span class="o">-</span><span class="n">remote</span><span class="w">  </span><span class="ow">or</span><span class="w">
   </span><span class="n">uses</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">communicates</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">REST</span><span class="w"> </span><span class="nc">API</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">case</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">run</span><span class="err">‐</span><span class="w">
   </span><span class="n">ning</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">machine</span><span class="o">.</span><span class="w"> </span><span class="nc">Both</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">upgraded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">version</span><span class="o">.</span><span class="w">

   </span><span class="ss">Example</span><span class="p">:</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">bug</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">v4</span><span class="o">.</span><span class="mf">1.0</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">v4</span><span class="o">.</span><span class="mf">1.0</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">v4</span><span class="o">.</span><span class="mf">1.0</span><span class="o">.</span></code></pre><ol start="38"><li>Unexpected carriage returns are outputted on the terminal
When using the --tty (-t) flag, unexpected carriage returns are outputted on the terminal.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">prints</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">newline</span><span class="w"> </span><span class="p" data-group-id="2022030436-1">(</span><span class="err">\</span><span class="n">n</span><span class="p" data-group-id="2022030436-1">)</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">terminal</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">carriage</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">newline</span><span class="w"> </span><span class="p" data-group-id="2022030436-2">(</span><span class="err">\</span><span class="n">r</span><span class="err">\</span><span class="n">n</span><span class="p" data-group-id="2022030436-2">)</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">abc</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">od</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w">
   </span><span class="mi">0000000</span><span class="w">   </span><span class="n">a</span><span class="w">   </span><span class="n">b</span><span class="w">   </span><span class="n">c</span><span class="w">  </span><span class="err">\</span><span class="n">r</span><span class="w">  </span><span class="err">\</span><span class="n">n</span><span class="w">
   </span><span class="mi">0000005</span><span class="w">

   </span><span class="nc">When</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">expected</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">abc</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">od</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w">
   </span><span class="mi">0000000</span><span class="w">   </span><span class="n">a</span><span class="w">   </span><span class="n">b</span><span class="w">   </span><span class="n">c</span><span class="w">  </span><span class="err">\</span><span class="n">n</span><span class="w">
   </span><span class="mi">0000004</span><span class="w">

   </span><span class="nc">Extra</span><span class="w"> </span><span class="n">carriage</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">shift</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">right</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">sh</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s">&quot;echo 1; echo 2; echo 3&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">-</span><span class="nc">A</span><span class="w">
   </span><span class="mi">1</span><span class="o">^</span><span class="nc">M</span><span class="err">$</span><span class="w">
       </span><span class="mi">2</span><span class="o">^</span><span class="nc">M</span><span class="err">$</span><span class="w">
           </span><span class="mi">3</span><span class="o">^</span><span class="nc">M</span><span class="err">$</span><span class="w">
               </span><span class="err">$</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Run</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">tty</span><span class="w"> </span><span class="p" data-group-id="3859416681-1">(</span><span class="o">-</span><span class="n">t</span><span class="p" data-group-id="3859416681-1">)</span><span class="w"> </span><span class="n">flag</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">abc</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">od</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w">
   </span><span class="mi">0000000</span><span class="w">   </span><span class="n">a</span><span class="w">   </span><span class="n">b</span><span class="w">   </span><span class="n">c</span><span class="w">  </span><span class="err">\</span><span class="n">n</span><span class="w">
   </span><span class="mi">0000004</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="o">--</span><span class="n">tty</span><span class="w"> </span><span class="p" data-group-id="3859416681-2">(</span><span class="o">-</span><span class="n">t</span><span class="p" data-group-id="3859416681-2">)</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">interaction</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">termainal</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">expecting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">answer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">question</span><span class="o">.</span><span class="w">

   </span><span class="nc">Where</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">carriage</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="err">\</span><span class="n">r</span><span class="w"> </span><span class="n">come</span><span class="w"> </span><span class="n">from?</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="err">\</span><span class="n">r</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">outputted</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">terminal</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">fact</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reconfiguration</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">terminal</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="err">\</span><span class="n">r</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">away</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">fedora</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s">&quot;stty -onlcr &amp;&amp; echo abc&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">od</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w">
   </span><span class="mi">0000000</span><span class="w">   </span><span class="n">a</span><span class="w">   </span><span class="n">b</span><span class="w">   </span><span class="n">c</span><span class="w">  </span><span class="err">\</span><span class="n">n</span><span class="w">
   </span><span class="mi">0000004</span></code></pre><ol start="39"><li>Podman run fails with Error: unrecognized namespace mode keep-id:uid=1000,gid=1000 passed
Podman 4.3.0 introduced the options uid and gid that can be given to --userns keep-id which are not recognized by older versions of Podman.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">older</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="mf">4.3</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">uid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">gid</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">recognized</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="s">&quot;unrecognized namespace mode&quot;</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">raised</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">uid</span><span class="o">=</span><span class="mi">1000</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w">
     </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="p">:</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="o">--</span><span class="n">userns</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="ss">:uid</span><span class="o">=</span><span class="err">$</span><span class="n">uid</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="err">$</span><span class="n">gid</span><span class="w">
        </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">uid_map</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">unrecognized</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="ss">:uid</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="w"> </span><span class="n">passed</span><span class="w">
   </span><span class="err">$</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="o">--</span><span class="n">uidmap</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">--</span><span class="n">gidmap</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">describe</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">mapping</span><span class="o">.</span><span class="w">

   </span><span class="nc">Run</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">uid</span><span class="o">=</span><span class="mi">1000</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">subuidSize</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="9987167903-1">(</span><span class="p" data-group-id="9987167903-2">(</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="9987167903-3">(</span><span class="n">podman</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">--</span><span class="n">format</span><span class="w"> </span><span class="s">&quot;{{ range
      .Host.IDMappings.UIDMap }}+{{.Size }}{{end }}&quot;</span><span class="w"> </span><span class="p" data-group-id="9987167903-3">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p" data-group-id="9987167903-2">)</span><span class="p" data-group-id="9987167903-1">)</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">subgidSize</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="9987167903-4">(</span><span class="p" data-group-id="9987167903-5">(</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="9987167903-6">(</span><span class="n">podman</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">--</span><span class="n">format</span><span class="w"> </span><span class="s">&quot;{{ range
      .Host.IDMappings.GIDMap }}+{{.Size }}{{end }}&quot;</span><span class="w"> </span><span class="p" data-group-id="9987167903-6">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p" data-group-id="9987167903-5">)</span><span class="p" data-group-id="9987167903-4">)</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w">
     </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="p">:</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="o">--</span><span class="n">uidmap</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="err">$</span><span class="n">uid</span><span class="w">
     </span><span class="o">--</span><span class="n">uidmap</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="w">
     </span><span class="o">--</span><span class="n">uidmap</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="9987167903-7">(</span><span class="p" data-group-id="9987167903-8">(</span><span class="err">$</span><span class="n">uid</span><span class="o">+</span><span class="mi">1</span><span class="p" data-group-id="9987167903-8">)</span><span class="p" data-group-id="9987167903-7">)</span><span class="p">:</span><span class="err">$</span><span class="p" data-group-id="9987167903-9">(</span><span class="p" data-group-id="9987167903-10">(</span><span class="err">$</span><span class="n">uid</span><span class="o">+</span><span class="mi">1</span><span class="p" data-group-id="9987167903-10">)</span><span class="p" data-group-id="9987167903-9">)</span><span class="p">:</span><span class="err">$</span><span class="p" data-group-id="9987167903-11">(</span><span class="p" data-group-id="9987167903-12">(</span><span class="err">$</span><span class="n">subuidSize</span><span class="o">-</span><span class="err">$</span><span class="n">uid</span><span class="p" data-group-id="9987167903-12">)</span><span class="p" data-group-id="9987167903-11">)</span><span class="w">
     </span><span class="o">--</span><span class="n">gidmap</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="o">--</span><span class="n">gidmap</span><span class="w"> </span><span class="err">$</span><span class="n">gid</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="w">
     </span><span class="o">--</span><span class="n">gidmap</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="9987167903-13">(</span><span class="p" data-group-id="9987167903-14">(</span><span class="err">$</span><span class="n">gid</span><span class="o">+</span><span class="mi">1</span><span class="p" data-group-id="9987167903-14">)</span><span class="p" data-group-id="9987167903-13">)</span><span class="p">:</span><span class="err">$</span><span class="p" data-group-id="9987167903-15">(</span><span class="p" data-group-id="9987167903-16">(</span><span class="err">$</span><span class="n">gid</span><span class="o">+</span><span class="mi">1</span><span class="p" data-group-id="9987167903-16">)</span><span class="p" data-group-id="9987167903-15">)</span><span class="p">:</span><span class="err">$</span><span class="p" data-group-id="9987167903-17">(</span><span class="p" data-group-id="9987167903-18">(</span><span class="err">$</span><span class="n">subgidSize</span><span class="o">-</span><span class="err">$</span><span class="n">gid</span><span class="p" data-group-id="9987167903-18">)</span><span class="p" data-group-id="9987167903-17">)</span><span class="w">
        </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">uid_map</span><span class="w">
            </span><span class="mi">0</span><span class="w">          </span><span class="mi">1</span><span class="w">       </span><span class="mi">1000</span><span class="w">
         </span><span class="mi">1000</span><span class="w">          </span><span class="mi">0</span><span class="w">          </span><span class="mi">1</span><span class="w">
         </span><span class="mi">1001</span><span class="w">       </span><span class="mi">1001</span><span class="w">      </span><span class="mi">64536</span><span class="w">

   </span><span class="n">which</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="ss">:uid</span><span class="o">=</span><span class="err">$</span><span class="n">uid</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="err">$</span><span class="n">gid</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="mf">4.3</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="p" data-group-id="9987167903-19">(</span><span class="ow">or</span><span class="w"> </span><span class="n">greater</span><span class="p" data-group-id="9987167903-19">)</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">uid</span><span class="o">=</span><span class="mi">1000</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="w">
   </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w">
     </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="err">$</span><span class="n">uid</span><span class="p">:</span><span class="err">$</span><span class="n">gid</span><span class="w">
     </span><span class="o">--</span><span class="n">userns</span><span class="w"> </span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="ss">:uid</span><span class="o">=</span><span class="err">$</span><span class="n">uid</span><span class="p">,</span><span class="n">gid</span><span class="o">=</span><span class="err">$</span><span class="n">gid</span><span class="w">
        </span><span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">uid_map</span><span class="w">
            </span><span class="mi">0</span><span class="w">          </span><span class="mi">1</span><span class="w">       </span><span class="mi">1000</span><span class="w">
         </span><span class="mi">1000</span><span class="w">          </span><span class="mi">0</span><span class="w">          </span><span class="mi">1</span><span class="w">
         </span><span class="mi">1001</span><span class="w">       </span><span class="mi">1001</span><span class="w">      </span><span class="mi">64536</span><span class="w">

   </span><span class="nc">Replace</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">uid_map</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">gid_map</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">mapping</span><span class="o">.</span></code></pre><ol start="40"><li>Podman fails to find expected image with error locating pulled image , image not known
When trying to do a Podman command that pulls an image from local storage or a remote repository, an error is raised saying &quot;image not known&quot; or &quot;error locating pulled  image&quot;.   Even
though the image had been verified before the Podman command was invoked.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">After</span><span class="w"> </span><span class="n">verifying</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">locally</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">repository</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">referencing</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">manner</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

   </span><span class="c1"># ls Containerfile</span><span class="w">
   </span><span class="nc">FROM</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubi8</span><span class="o">-</span><span class="n">minimal</span><span class="ss">:latest</span><span class="w">
   </span><span class="nc">MAINTAINER</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="nc">Community</span><span class="w">
   </span><span class="nc">USER</span><span class="w"> </span><span class="n">root</span><span class="w">

   </span><span class="c1"># podman build .</span><span class="w">
   </span><span class="nc">STEP</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubi8</span><span class="o">-</span><span class="n">minimal</span><span class="w">
   </span><span class="nc">Trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubi8</span><span class="o">-</span><span class="n">minimal</span><span class="ss">:latest</span><span class="n">...</span><span class="w">
   </span><span class="nc">Getting</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">signatures</span><span class="w">
   </span><span class="nc">Checking</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">signatures</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="n">a6577091999b</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Copying</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">abb1ba1bce</span><span class="w"> </span><span class="n">done</span><span class="w">
   </span><span class="nc">Writing</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">destination</span><span class="w">
   </span><span class="nc">Storing</span><span class="w"> </span><span class="n">signatures</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="ss">container</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">locating</span><span class="w"> </span><span class="n">pulled</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="s">&quot;registry.access.redhat.com/ubi8-minimal:latest&quot;</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ss">storage</span><span class="p">:</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubi8</span><span class="o">-</span><span class="n">minimal</span><span class="ss">:latest</span><span class="p">:</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">known</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">general</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">timing</span><span class="w"> </span><span class="n">issue</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">efficient</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">possible</span><span class="p">,</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">locks</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">established</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">critical</span><span class="w"> </span><span class="n">sections</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">code</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w">
   </span><span class="n">pulling</span><span class="w">  </span><span class="n">an</span><span class="w">  </span><span class="n">image</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">repository</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">lock</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">released</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">acquired</span><span class="o">/</span><span class="n">read</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">an</span><span class="err">‐</span><span class="w">
   </span><span class="n">other</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">harmful</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">prune</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">rmi</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="p">,</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">first</span><span class="w">  </span><span class="n">process</span><span class="w">
   </span><span class="n">can</span><span class="w"> </span><span class="n">acquire</span><span class="w"> </span><span class="n">it</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">arise</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w">  </span><span class="n">maintainers</span><span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">considered</span><span class="w"> </span><span class="n">heavier</span><span class="o">-</span><span class="n">duty</span><span class="w"> </span><span class="n">locks</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">close</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">timing</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="w"> </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">slowdown</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">encounter</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">considered</span><span class="w"> </span><span class="n">worth</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">cost</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">completely</span><span class="w"> </span><span class="n">closing</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">small</span><span class="w"> </span><span class="n">timing</span><span class="w"> </span><span class="n">window</span><span class="o">.</span></code></pre><ol start="41"><li>A podman build step with --mount=type=secret fails with operation not permitted
Executing a step in a Dockerfile/Containerfile which mounts secrets using --mount=type=secret fails with &quot;operation not permitted&quot; when running on a host filesystem mounted  with  no‐
suid and when using the runc runtime.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w">  </span><span class="nc">RUN</span><span class="w">  </span><span class="n">line</span><span class="w">  </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="o">/</span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">--</span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="n">secret</span><span class="p">,</span><span class="n">id</span><span class="o">=</span><span class="nc">MY_USER</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">dnf</span><span class="o">/</span><span class="n">vars</span><span class="o">/</span><span class="nc">MY_USER</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">fails</span><span class="w">
   </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

   </span><span class="nc">STEP</span><span class="w"> </span><span class="mi">3</span><span class="o">/</span><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="nc">RUN</span><span class="w"> </span><span class="o">--</span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="n">secret</span><span class="p">,</span><span class="n">id</span><span class="o">=</span><span class="nc">MY_USER</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">dnf</span><span class="o">/</span><span class="n">vars</span><span class="o">/</span><span class="nc">MY_USER</span><span class="w">     </span><span class="o">--</span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="n">secret</span><span class="p">,</span><span class="n">id</span><span class="o">=</span><span class="nc">MY_USER</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">dnf</span><span class="o">/</span><span class="n">vars</span><span class="o">/</span><span class="nc">MY_USER</span><span class="w">     </span><span class="n">...</span><span class="p">:</span><span class="w"> </span><span class="n">time</span><span class="o">=</span><span class="s">&quot;2023-06-13T18:04:59+02:00&quot;</span><span class="w"> </span><span class="n">level</span><span class="o">=</span><span class="n">error</span><span class="w"> </span><span class="n">msg</span><span class="o">=</span><span class="s">&quot;runc create failed: unable to start container process: error during container init: error mounting </span><span class="se">\&quot;</span><span class="s">/var/tmp/buildah2251989386/mnt/buildah-bind-target-11</span><span class="se">\&quot;</span><span class="s"> to rootfs at </span><span class="se">\&quot;</span><span class="s">/etc/dnf/vars/MY_USER</span><span class="se">\&quot;</span><span class="s">: mount /var/tmp/buildah2251989386/mnt/buildah-bind-target-11:/etc/dnf/vars/MY_USER (via /proc/self/fd/7), flags: 0x1021: operation not permitted&quot;</span><span class="w">
   </span><span class="p">:</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">1</span><span class="w">
   </span><span class="nc">ERRO</span><span class="p" data-group-id="6251943142-1">[</span><span class="mi">0002</span><span class="p" data-group-id="6251943142-1">]</span><span class="w"> </span><span class="n">did</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="ss">subprocess</span><span class="p">:</span><span class="w"> </span><span class="nc">EOF</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="err">•</span><span class="w"> </span><span class="nc">Install</span><span class="w"> </span><span class="n">crun</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">dnf</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">crun</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">crun</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="o">--</span><span class="n">runtime</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">crun</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="o">.</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="nc">Buildah</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="mi">4228</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">discussion</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">problem</span><span class="o">.</span></code></pre><ol start="42"><li>podman-in-podman builds that are file I/0 intensive are very slow
When using the overlay storage driver to do a nested podman build inside a running container, file I/O operations such as COPY of a large amount of data is very slow or can hang  com‐
pletely.</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Using</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">driver</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">COPY</span><span class="p">,</span><span class="w"> </span><span class="nc">ADD</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nc">I</span><span class="o">/</span><span class="nc">O</span><span class="w"> </span><span class="n">intensive</span><span class="w"> </span><span class="nc">RUN</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">very</span><span class="w"> </span><span class="n">slow</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">hangs</span><span class="w"> </span><span class="n">completely</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">run</span><span class="err">‐</span><span class="w">
   </span><span class="n">ning</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">container</span><span class="o">.</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">caused</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fuse</span><span class="o">-</span><span class="n">overlayfs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">writing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="w"> </span><span class="nc">Writes</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">slow</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">fuse</span><span class="o">-</span><span class="n">overlayfs</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">native</span><span class="w">
   </span><span class="n">overlay</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="ss">so</span><span class="p">:</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">privileged</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">it</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">.</span><span class="o">/</span><span class="n">nested_storage</span><span class="ss">:/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">con</span><span class="err">‐</span><span class="w">
   </span><span class="n">tainers</span><span class="o">/</span><span class="n">storage</span><span class="w">  </span><span class="n">parent</span><span class="ss">:latest</span><span class="o">.</span><span class="w">  </span><span class="nc">Ensure</span><span class="w">  </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">parent</span><span class="ss">:latest</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">storage</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">work</span><span class="o">.</span><span class="w"> </span><span class="nc">Once</span><span class="w">
   </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">native</span><span class="w"> </span><span class="n">volume</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">fall</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fuse</span><span class="o">-</span><span class="n">overlayfs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">complete</span><span class="w"> </span><span class="n">much</span><span class="w"> </span><span class="n">faster</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">don</span><span class="sc">&#39;t have access to the parent run process, such as in a CI environment, then the second option is to change the storage driver to vfs in the parent image by changing changing
   this line in your storage.conf file: driver = &quot;vfs&quot;. You may have to run podman system reset for this to take effect. You know it&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">changed</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">graphDriverName</span><span class="w"> </span><span class="n">out</span><span class="err">‐</span><span class="w">
   </span><span class="n">puts</span><span class="w"> </span><span class="ss">graphDriverName</span><span class="p">:</span><span class="w"> </span><span class="n">vfs</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">slower</span><span class="w"> </span><span class="n">performance</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">significantly</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">fuse</span><span class="o">-</span><span class="n">overlayfs</span></code></pre><ol start="43"><li>podman run --userns=auto fails with Error: creating container storage: not enough unused IDs in user namespace
Using --userns=auto when creating new containers does not work as long as any containers exist that were created with --userns=keep-id or --userns=nomap</li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">            </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="nc">Run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">3600</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">succeeds</span><span class="o">.</span><span class="w">

            </span><span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="nc">Run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">3600</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">succeeds</span><span class="o">.</span><span class="w">

            </span><span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="nc">Run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">3600</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">succeeds</span><span class="o">.</span><span class="w">

            </span><span class="mi">4</span><span class="o">.</span><span class="w"> </span><span class="nc">Run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">3600</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">fails</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ss">storage</span><span class="p">:</span><span class="w"> </span><span class="ow">not</span><span class="w">  </span><span class="n">enough</span><span class="w">  </span><span class="n">unused</span><span class="w">
               </span><span class="nc">IDs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Any</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">keep</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">nomap</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">deleted</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span></code></pre><ol start="44"><li><p>sudo podman run --userns=auto fails with Cannot find mappings for user containers
When rootful podman is invoked with --userns=auto, podman needs to pick subranges of subuids and subgids for the user namespace of the container.  Rootful podman ensures that the sub‐
uid and subgid ranges for such containers do not overlap, but how can rootful podman prevent other tools from accidentally using these IDs?</p><p>It's  not  possible  to block other tools that are running as root from using these IDs, but such tools would normally not use subuids and subgids that have already been assigned to a
user in /etc/subuid and /etc/subgid.</p><p>The username containers on the host has a special function for rootful Podman.  Rootful podman uses the subuids and subgids of the user containers when running --userns=auto  contain‐
ers.  The  user  containers  has no need for these subuids and subgids because no processes should be started as the user containers.  In other words, the user containers is a special
user that only exists on the system to reserve subuids and subgids for rootful podman.</p><p>containers is the default username but it can be changed by setting the option root-auto-userns-user in the file /etc/containers/storage.conf</p></li></ol><p>   Symptom</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Run</span><span class="w"> </span><span class="n">rootful</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w">

   </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">hello</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">fails</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="ss">message</span><span class="p">:</span><span class="w">

   </span><span class="nc">ERRO</span><span class="p" data-group-id="4570142767-1">[</span><span class="mi">0000</span><span class="p" data-group-id="4570142767-1">]</span><span class="w"> </span><span class="nc">Cannot</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">mappings</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ss">&quot;containers&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="s">&quot;containers&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w">
   </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ss">storage</span><span class="p">:</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">enough</span><span class="w"> </span><span class="n">unused</span><span class="w"> </span><span class="nc">IDs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="w"> </span><span class="k" data-group-id="4570142767-2">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">containers</span><span class="p">:</span></code></pre><p>   Solution</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Add</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nsswitch</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="w">  </span><span class="nc">For</span><span class="w"> </span><span class="n">details</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">subid</span><span class="p" data-group-id="9326926313-1">(</span><span class="mi">5</span><span class="p" data-group-id="9326926313-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">assigns</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">it</span><span class="p">:</span><span class="w">

            </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">useradd</span><span class="w"> </span><span class="o">--</span><span class="n">comment</span><span class="w"> </span><span class="s">&quot;Helper user to reserve subuids and subgids for Podman&quot;</span><span class="w">
                           </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">create</span><span class="o">-</span><span class="n">home</span><span class="w">
                           </span><span class="o">--</span><span class="n">shell</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nologin</span><span class="w">
                           </span><span class="n">containers</span><span class="w">

            </span><span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="nc">Check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">^</span><span class="ss">containers</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w"> </span><span class="n">containers</span><span class="p">:</span><span class="mi">720896</span><span class="p">:</span><span class="mi">65536</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">^</span><span class="ss">containers</span><span class="p">:</span><span class="w">  </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="w">  </span><span class="n">containers</span><span class="p">:</span><span class="mi">720896</span><span class="p">:</span><span class="mi">65536</span><span class="w">
               </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">useradd</span><span class="w"> </span><span class="n">assigns</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="n">subuids</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="n">subgids</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">user</span><span class="o">.</span><span class="w">  </span><span class="nc">Typically</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">bigger</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">that</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">bigger</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">more</span><span class="w">
               </span><span class="n">containers</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="n">...</span><span class="w">

            </span><span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="nc">Edit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">files</span><span class="w">  </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="n">bigger</span><span class="o">.</span><span class="w"> </span><span class="nc">Ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subuid</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k" data-group-id="9326926313-2">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">over</span><span class="err">‐</span><span class="w">
               </span><span class="n">lap</span><span class="w">  </span><span class="k">with</span><span class="w">  </span><span class="n">any</span><span class="w">  </span><span class="n">other</span><span class="w">  </span><span class="n">subuid</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subuid</span><span class="o">.</span><span class="w"> </span><span class="nc">Ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k" data-group-id="9326926313-3">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">overlap</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">subgid</span><span class="w"> </span><span class="n">ranges</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">files</span><span class="w">
               </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">subgid</span><span class="o">.</span><span class="w">

   </span><span class="nc">Test</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">again</span><span class="w">

   </span><span class="n">sudo</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">--</span><span class="n">userns</span><span class="o">=</span><span class="n">auto</span><span class="w"> </span><span class="n">alpine</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">hello</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">succeeds</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">prints</span><span class="w"> </span><span class="n">hello</span><span class="w">

                                                                                                                                                                 </span><span class="n">podman</span><span class="o">-</span><span class="n">troubleshooting</span><span class="p" data-group-id="9326926313-4">(</span><span class="mi">7</span><span class="p" data-group-id="9326926313-4">)</span></code></pre>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="podman-top.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
podman-top
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="podman-unpause.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
podman-unpause
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

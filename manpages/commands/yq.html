<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Manpages v3.0.0">


    <title>yq — Manpages v3.0.0</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-65F766E3.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>
<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Manpages" />
        </a>

      <div>
        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v3.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="MANUALS"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Manpages</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>yq</h1>


  </div>


<p>YQ(1)                                                                                                                                                                                    YQ(1)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">yq</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">portable</span><span class="w"> </span><span class="n">command</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">processor</span></code></pre><p>SYNOPSIS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">yq</span><span class="w"> </span><span class="p" data-group-id="5812522946-1">[</span><span class="n">eval</span><span class="o">/</span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="p" data-group-id="5812522946-1">]</span><span class="w"> </span><span class="p" data-group-id="5812522946-2">[</span><span class="n">expression</span><span class="p" data-group-id="5812522946-2">]</span><span class="w"> </span><span class="n">files</span><span class="o">..</span><span class="w">

   </span><span class="n">eval</span><span class="o">/</span><span class="n">e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="5812522946-3">(</span><span class="n">default</span><span class="p" data-group-id="5812522946-3">)</span><span class="w"> </span><span class="nc">Apply</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">sequence</span><span class="w">

   </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="o">/</span><span class="n">ea</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">Loads</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">once</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">a</span><span class="w"> </span><span class="n">lightweight</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">portable</span><span class="w"> </span><span class="n">command</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">processor</span><span class="o">.</span><span class="w">  </span><span class="n">yq</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">yaml</span><span class="p">,</span><span class="w"> </span><span class="n">json</span><span class="p">,</span><span class="w"> </span><span class="n">xml</span><span class="p">,</span><span class="w"> </span><span class="n">csv</span><span class="p">,</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">TOML</span><span class="w"> </span><span class="n">files</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">doesn</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">everything</span><span class="w">
   </span><span class="n">jq</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">functions</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">continuously</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">mikefarah</span><span class="o">.</span><span class="n">gitbook</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">yq</span><span class="o">/</span><span class="w"> </span><span class="c1"># QUICK GUIDE</span></code></pre><p>   Read a value:</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b[0].c&#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   Pipe from STDIN:</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="n">cat</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b[0].c&#39;</span></code></pre><p>   Update a yaml file, in place</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="sc">&#39;.a.b[0].c = &quot;cool&quot;&#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   Update using environment variables</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="nc">NAME</span><span class="o">=</span><span class="n">mike</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="sc">&#39;.a.b[0].c = strenv(NAME)&#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   Merge multiple files</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="n">yq</span><span class="w"> </span><span class="n">ea</span><span class="w"> </span><span class="sc">&#39;. as $item ireduce ({}; . * $item )&#39;</span><span class="w"> </span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="o">*</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">ea</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">evaluate</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="p" data-group-id="0602830582-1">(</span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">sequence</span><span class="o">.</span><span class="p" data-group-id="0602830582-1">)</span></code></pre><p>   Multiple updates to a yaml file</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="sc">&#39;
            .a.b[0].c = &quot;cool&quot; |
            .x.y.z = &quot;foobar&quot; |
            .person.name = strenv(NAME)
          &#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="o">.</span></code></pre><p>KNOWN ISSUES / MISSING FEATURES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">attempts</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">preserve</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">positions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">whitespace</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">much</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">possible</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">scenarios</span><span class="w"> </span><span class="p" data-group-id="1066732544-1">(</span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">go</span><span class="o">-</span><span class="n">yaml</span><span class="o">/</span><span class="n">yaml</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">v3</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">details</span><span class="p" data-group-id="1066732544-1">)</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Powershell</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="n">...</span><span class="ss">opinions</span><span class="p">:</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">mikefarah</span><span class="o">.</span><span class="n">gitbook</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">yq</span><span class="o">/</span><span class="n">usage</span><span class="o">/</span><span class="n">tips</span><span class="o">-</span><span class="ow">and</span><span class="o">-</span><span class="n">tricks</span><span class="c1">#quotes-in-windows-powershell</span></code></pre><p>BUGS / ISSUES / FEATURE REQUESTS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Please</span><span class="w"> </span><span class="n">visit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">GitHub</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mikefarah</span><span class="o">/</span><span class="n">yq</span><span class="o">/</span><span class="o">.</span></code></pre><p>HOW IT WORKS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w">  </span><span class="n">yq</span><span class="w">  </span><span class="n">expressions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">pipes</span><span class="o">.</span><span class="w">  </span><span class="nc">A</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">as</span><span class="w">
   </span><span class="n">output</span><span class="o">.</span><span class="w">  </span><span class="nc">That</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">piped</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="k">with</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p" data-group-id="0880750214-1">(</span><span class="k">if</span><span class="w"> </span><span class="n">processing</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">eval</span><span class="p" data-group-id="0880750214-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Lets</span><span class="w"> </span><span class="n">look</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">couple</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">examples</span><span class="o">.</span></code></pre><p>   Simple assignment example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="ss">expression</span><span class="p">:</span><span class="w">

          </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">b</span><span class="w">

   </span><span class="nc">Like</span><span class="w"> </span><span class="n">math</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">precedence</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">important</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">arguments</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="w">

   </span><span class="nc">It</span><span class="w"> </span><span class="n">pipes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="p">,</span><span class="w"> </span><span class="n">lets</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="err">`</span><span class="n">root</span><span class="sc">&#39; context through the lhs expression of .a to return the node

          cat

   Side note: this node holds not only its value `cat&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="n">too</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">pipes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">root</span><span class="err">&#39;</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w">

          </span><span class="n">dog</span><span class="w">

   </span><span class="nc">Both</span><span class="w"> </span><span class="n">sides</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">evaluated</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="p" data-group-id="0311317739-1">(</span><span class="o">.</span><span class="n">b</span><span class="p" data-group-id="0311317739-1">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="p" data-group-id="0311317739-2">(</span><span class="o">.</span><span class="n">a</span><span class="p" data-group-id="0311317739-2">)</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="ss">context</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Complex assignment, operator precedence rules</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Just</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">math</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">precedence</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">precedence</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">higher</span><span class="w">  </span><span class="n">precedence</span><span class="w">  </span><span class="n">will</span><span class="w">  </span><span class="n">get</span><span class="w">  </span><span class="n">evaluated</span><span class="w">
   </span><span class="n">first</span><span class="o">.</span><span class="w">

   </span><span class="nc">Most</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">intuitively</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">you</span><span class="err">’</span><span class="n">d</span><span class="w"> </span><span class="n">want</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dog&quot;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ss">effectively</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6375316454-1">(</span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="p" data-group-id="6375316454-1">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="6375316454-2">(</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;dog&quot;</span><span class="p" data-group-id="6375316454-2">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">case</span><span class="p">,</span><span class="w"> </span><span class="n">particularly</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="o">.</span><span class="w">

   </span><span class="nc">Lets</span><span class="w"> </span><span class="n">say</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="ss">had</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">sally</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">orange</span><span class="w">

   </span><span class="nc">Lets</span><span class="w"> </span><span class="n">say</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">wanted</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">sally</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">mango</span><span class="sc">&#39;.  The incorrect way to do that is: .[] | select(.name == &quot;sally&quot;) | .fruit = &quot;mango&quot;.

   Because  |  has a low operator precedence, this will be evaluated (incorrectly) as : (.[]) | (select(.name == &quot;sally&quot;)) | (.fruit = &quot;mango&quot;).  What you’ll see is only the updated seg‐
   ment returned:

          name: sally
          fruit: mango

   To properly update this yaml, you will need to use brackets (think BODMAS from maths) and wrap the entire LHS: (.[] | select(.name == &quot;sally&quot;) | .fruit) = &quot;mango&quot;

   Now that entire LHS expression is passed to the `assign&#39;</span><span class="w"> </span><span class="p" data-group-id="6375316454-3">(</span><span class="o">=</span><span class="p" data-group-id="6375316454-3">)</span><span class="w"> </span><span class="n">operator</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">correctly</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ss">returned</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">sally</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">mango</span></code></pre><p>   Relative update (e.g. |=)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">There</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">form</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">very</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">evaluating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">plain</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">root</span><span class="sc">&#39; level context to the RHS expression.  In relative form, we pass in each result of the LHS to the RHS expression.  Let’s go through an example.

   Given a document like:

          a: 1
          b: thing

   with an expression:

          .a |= . + 1

   Similar to the = operator, |= takes two operands, the LHS and RHS.

   It pipes the current context (the whole document) through the LHS expression of .a to get the node value:

          1

   Now it pipes that LHS context into the RHS expression . + 1 (whereas in the = plain form it piped the original document context into the RHS) to yield:

          2

   The assignment operator then copies across the value from the RHS to the value on the LHS, and it returns the now updated `root&#39;</span><span class="w"> </span><span class="ss">context</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span></code></pre><p>Add</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Add</span><span class="w"> </span><span class="n">behaves</span><span class="w"> </span><span class="n">differently</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">LHS</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ss">arrays</span><span class="p">:</span><span class="w"> </span><span class="n">concatenate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="ss">scalars</span><span class="p">:</span><span class="w"> </span><span class="n">arithmetic</span><span class="w"> </span><span class="n">addition</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="ss">scalars</span><span class="p">:</span><span class="w"> </span><span class="n">concatenate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ss">maps</span><span class="p">:</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="4366272797-1">(</span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mul</span><span class="err">‐</span><span class="w">
   </span><span class="n">tiply</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="p" data-group-id="4366272797-2">(</span><span class="o">*</span><span class="p" data-group-id="4366272797-2">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">merge</span><span class="p" data-group-id="4366272797-1">)</span><span class="w">

   </span><span class="nc">Use</span><span class="w"> </span><span class="o">+</span><span class="o">=</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">things</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">increment</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">x</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">.</span><span class="n">x</span><span class="o">.</span></code></pre><p>   Concatenate arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a + .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Concatenate to existing array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">styling</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">kept</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7865446391-1">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="7865446391-1">]</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7865446391-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="7865446391-2">]</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Concatenate null to array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a + null&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   Append to existing array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">styling</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">copied</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">elements</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9740419686-1">[</span><span class="sc">&#39;dog&#39;</span><span class="p" data-group-id="9740419686-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += &quot;cat&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9740419686-2">[</span><span class="sc">&#39;dog&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;cat&#39;</span><span class="p" data-group-id="9740419686-2">]</span></code></pre><p>   Prepend to existing array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = [&quot;cat&quot;] + .a&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Add new object to array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a + {&quot;cat&quot;: &quot;meow&quot;}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   Relative append</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">a1</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">a2</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="ss">a3</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3407095107-1">{</span><span class="p" data-group-id="3407095107-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a[].b += [&quot;mouse&quot;]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">a1</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">mouse</span><span class="w">
            </span><span class="ss">a2</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">mouse</span><span class="w">
            </span><span class="ss">a3</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="o">-</span><span class="w"> </span><span class="n">mouse</span></code></pre><p>   String concatenation</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">catmeow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   Number addition - float</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">floats</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">floats</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">4.9</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a + .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mf">7.9</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">4.9</span></code></pre><p>   Number addition - int</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">ints</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">ints</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a + .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Increment numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] += 1&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span></code></pre><p>   Date addition</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">durations</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dates</span><span class="o">.</span><span class="w">  </span><span class="nc">Assumes</span><span class="w"> </span><span class="nc">RFC3339</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">date</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += &quot;3h10m&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T03</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span></code></pre><p>   Date addition - custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">durations</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dates</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="n">date</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM MST&quot;, .a += &quot;3h1m&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">6</span><span class="p">:</span><span class="mi">00</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span></code></pre><p>   Add to null</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Adding</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rhs</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;null + &quot;cat&quot;&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span></code></pre><p>   Add maps to shallow merge</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Adding</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">together</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">merges</span><span class="w"> </span><span class="n">them</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">merge</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Astuff</span><span class="w">
              </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w">
            </span><span class="ss">a1</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bstuff</span><span class="w">
              </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">b1</span><span class="p">:</span><span class="w"> </span><span class="n">neat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bstuff</span><span class="w">
              </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">a1</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
            </span><span class="ss">b1</span><span class="p">:</span><span class="w"> </span><span class="n">neat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bstuff</span><span class="w">
              </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">b1</span><span class="p">:</span><span class="w"> </span><span class="n">neat</span></code></pre><p>   Custom types: that are really strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encountered</span><span class="p">,</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="c">_meow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="n">cat_meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="c">_meow</span></code></pre><p>   Custom types: that are really numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encountered</span><span class="p">,</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="mf">1.2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="mf">2.3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="mf">3.5</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="mf">2.3</span></code></pre><p>Alternative (Default value)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">alternative</span><span class="w"> </span><span class="p" data-group-id="0679502239-1">(</span><span class="ow">or</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="0679502239-1">)</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="no">false</span><span class="o">.</span></code></pre><p>   LHS is defined</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">bridge</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a // &quot;hello&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bridge</span></code></pre><p>   LHS is not defined</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="7682864545-1">{</span><span class="p" data-group-id="7682864545-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a // &quot;hello&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">hello</span></code></pre><p>   LHS is null</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="err">~</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a // &quot;hello&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">hello</span></code></pre><p>   LHS is false</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a // &quot;hello&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">hello</span></code></pre><p>   RHS is an expression</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a // .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span></code></pre><p>   Update or create - entity exists</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">initialises</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">present</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a // (.a = 0)) += 1&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   Update or create - entity does not exist</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">initialises</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">present</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">camel</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a // (.a = 0)) += 1&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">camel</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><p>Anchor and Alias Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">alias</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">anchor</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">aliases</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">anchors</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">explode</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">normalises</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p" data-group-id="7702232348-1">(</span><span class="n">dereference</span><span class="w"> </span><span class="p" data-group-id="7702232348-2">(</span><span class="ow">or</span><span class="w"> </span><span class="n">expands</span><span class="p" data-group-id="7702232348-2">)</span><span class="w"> </span><span class="n">aliases</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">anchor</span><span class="w"> </span><span class="n">names</span><span class="p" data-group-id="7702232348-1">)</span><span class="o">.</span><span class="w">

   </span><span class="n">yq</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">aliases</span><span class="w"> </span><span class="p" data-group-id="7702232348-3">(</span><span class="n">like</span><span class="w"> </span><span class="p" data-group-id="7702232348-4">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">blah</span><span class="p">)</span><span class="w"> </span><span class="n">however</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="p" data-group-id="7702232348-5">(</span><span class="mf">1.2</span><span class="p" data-group-id="7702232348-5">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">as</span><span class="w">  </span><span class="n">it</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">effec</span><span class="err">‐</span><span class="w">
   </span><span class="n">tively</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tag</span><span class="o">.</span></code></pre><p>   NOTE –yaml-fix-merge-anchor-to-spec flag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">yq</span><span class="w"> </span><span class="n">doesn</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="p" data-group-id="3933480020-1">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">spec</span><span class="p">,</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">circumstances</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">incorrectly</span><span class="w"> </span><span class="n">overrides</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="3933480020-2">do</span><span class="w"> </span><span class="n">that</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w">  </span><span class="n">minimise</span><span class="w">  </span><span class="n">disruption</span><span class="w">  </span><span class="n">while</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">fixing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">issue</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">behaviour</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">false</span><span class="p">;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">users</span><span class="o">.</span><span class="w">  </span><span class="nc">Then</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">de</span><span class="err">‐</span><span class="w">
   </span><span class="n">fault</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="p" data-group-id="3933480020-3">(</span><span class="ow">and</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">needed</span><span class="p" data-group-id="3933480020-3">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">enables</span><span class="w"> </span><span class="n">advanced</span><span class="w"> </span><span class="n">merging</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">inline</span><span class="w"> </span><span class="n">maps</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">fixes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">exploding</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">neighbours</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">affect</span><span class="w"> </span><span class="n">ed</span><span class="o">.</span><span class="w">

   </span><span class="nc">Long</span><span class="w"> </span><span class="n">story</span><span class="w"> </span><span class="n">short</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="o">.</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">differences</span><span class="w"> </span><span class="n">below</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="nc">LEGACY</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">off</span><span class="p">;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">FIXED</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">on</span><span class="o">.</span></code></pre><p>   Merge one map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">yaml</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">type</span><span class="o">/</span><span class="n">merge</span><span class="o">.</span><span class="n">html</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">CENTER</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">LEFT</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">BIG</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="5681366758-1">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="nc">CENTER</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[4] | explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span></code></pre><p>   Get anchor</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">billyBob</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | anchor&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">billyBob</span></code></pre><p>   Set anchor</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a anchor = &quot;foobar&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foobar</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Set anchor relatively using assign-update</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a anchor |= .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Get alias</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">billyBob</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">billyBob</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | alias&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">billyBob</span></code></pre><p>   Set alias</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a alias = &quot;meow&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">meow</span></code></pre><p>   Set alias to blank does nothing</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a alias = &quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Set alias relatively using assign-update</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a alias |= .f&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">meow</span></code></pre><p>   Explode alias and anchor</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;explode(.f)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Explode with no aliases or anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">mike</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;explode(.a)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">mike</span></code></pre><p>   Explode with alias keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">*</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;explode(.f)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">b</span></code></pre><p>   Dereference and update a field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">explode</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">multiply</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dereference</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">item_value</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item_value</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">thingOne</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">item_1</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="3302866825-1">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">item_value</span><span class="w">
          </span><span class="ss">thingTwo</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">item_2</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="3302866825-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">item_value</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.thingOne |= (explode(.) | sort_keys(.)) * {&quot;value&quot;: false}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">item_value</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item_value</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">thingOne</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">item_1</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
          </span><span class="ss">thingTwo</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">item_2</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="3302866825-3">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">item_value</span></code></pre><p>   LEGACY: Explode with merge anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="ss">Caution</span><span class="p">:</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">false</span><span class="p">;</span><span class="w"> </span><span class="n">it</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">YAML</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="n">incorrectly</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="p" data-group-id="7911646235-1">(</span><span class="n">foobarList</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="n">is</span><span class="w">  </span><span class="n">set</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">bar_b</span><span class="w">
   </span><span class="ow">when</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">foobarList_b</span><span class="p" data-group-id="7911646235-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Flag</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="mi">2025</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="7911646235-2">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="7911646235-3">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span></code></pre><p>   LEGACY: Merge multiple maps</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">yaml</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">type</span><span class="o">/</span><span class="n">merge</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wrong</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="p">;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fix</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">CENTER</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">LEFT</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">BIG</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6661524055-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">CENTER</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">BIG</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[4] | explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   LEGACY: Override</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">yaml</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">type</span><span class="o">/</span><span class="n">merge</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wrong</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="p">;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fix</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">CENTER</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">LEFT</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">BIG</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="7824964646-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">BIG</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">LEFT</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[4] | explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   FIXED: Explode with merge anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="p" data-group-id="0978074342-1">(</span><span class="n">flag</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="mi">2025</span><span class="p" data-group-id="0978074342-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Observe</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">foobarList</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">foobarList_b</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="0978074342-2">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="0978074342-3">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span></code></pre><p>   FIXED: Merge multiple maps</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w">  </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="p" data-group-id="1224384150-1">(</span><span class="n">flag</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="mi">2025</span><span class="p" data-group-id="1224384150-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Taken</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">yaml</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">type</span><span class="o">/</span><span class="n">merge</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="w">  </span><span class="nc">Same</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">as</span><span class="w">
   </span><span class="n">legacy</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">CENTER</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">LEFT</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">BIG</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="1224384150-2">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">CENTER</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">BIG</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[4] | explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span></code></pre><p>   FIXED: Override</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="p" data-group-id="2842779052-1">(</span><span class="n">flag</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="mi">2025</span><span class="p" data-group-id="2842779052-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Taken</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">yaml</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">type</span><span class="o">/</span><span class="n">merge</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="w">   </span><span class="nc">Same</span><span class="w">  </span><span class="n">values</span><span class="w">  </span><span class="n">as</span><span class="w">
   </span><span class="n">legacy</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">CENTER</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">LEFT</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">BIG</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2842779052-2">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">BIG</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">LEFT</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="nc">SMALL</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[4] | explode(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">r</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Exploding inline merge anchor</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="p" data-group-id="3004794840-1">(</span><span class="n">flag</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="mi">2025</span><span class="p" data-group-id="3004794840-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">b</span><span class="w"> </span><span class="mi">42</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="3004794840-2">&lt;&lt;</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;explode(.) | sort_keys(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span></code></pre><p>Array to Map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">to</span><span class="o">..</span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">skipped</span><span class="w"> </span><span class="n">over</span><span class="o">.</span><span class="w">

   </span><span class="nc">Behind</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">scenes</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="ss">reduce</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="4515579274-1">(</span><span class="o">.</span><span class="p" data-group-id="4515579274-2">[</span><span class="p" data-group-id="4515579274-2">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="4515579274-3">(</span><span class="o">.</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">null</span><span class="p" data-group-id="4515579274-3">)</span><span class="w"> </span><span class="p" data-group-id="4515579274-1">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="n">i</span><span class="w"> </span><span class="n">ireduce</span><span class="p" data-group-id="4515579274-4">(</span><span class="p" data-group-id="4515579274-5">{</span><span class="p" data-group-id="4515579274-5">}</span><span class="p">;</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="4515579274-6">[</span><span class="err">$</span><span class="n">i</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">key</span><span class="p" data-group-id="4515579274-6">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="n">i</span><span class="p" data-group-id="4515579274-4">)</span></code></pre><p>   Simple example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">hello</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.cool |= array_to_map&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span></code></pre><p>Assign (Update)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">values</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">the</span><span class="p">:</span></code></pre><p>   plain form: =</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">values</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pipeline</span><span class="o">.</span></code></pre><p>   relative form: |=</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k" data-group-id="9082899130-1">do</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">plain</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">updating</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">increment</span><span class="o">.</span></code></pre><p>   Flags</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">clobber</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span></code></pre><p>   Create yaml file</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a.b = &quot;cat&quot; | .x = &quot;frog&quot;&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Update node to be the child value</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">foof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">foof</span></code></pre><p>   Double elements in an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |= . * 2&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span></code></pre><p>   Update node from another file</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="p" data-group-id="5158374131-1">(</span><span class="n">string</span><span class="o">/</span><span class="n">number</span><span class="p" data-group-id="5158374131-1">)</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apples</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="sc">&#39;select(fileIndex==0).a = select(fileIndex==1) | select(fileIndex==0)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span></code></pre><p>   Update node to be the sibling value</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">child</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">sibling</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">sibling</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">sibling</span></code></pre><p>   Updated multiple paths</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">fieldA</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">fieldB</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">fieldC</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a, .c) = &quot;potato&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">potato</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">fieldB</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">potato</span></code></pre><p>   Update string value</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b = &quot;frog&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Update string value via |=</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">scalar</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b |= &quot;frog&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Update deeply selected results</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">wrapped</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">brackets!</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">don</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">snippet</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cactus</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a[] | select(. == &quot;apple&quot;)) = &quot;frog&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cactus</span></code></pre><p>   Update array values</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">candy</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">sandy</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.[] | select(. == &quot;*andy&quot;)) = &quot;bogs&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">bogs</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">bogs</span></code></pre><p>   Update empty object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="3151765372-1">{</span><span class="p" data-group-id="3151765372-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b |= &quot;bogs&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bogs</span></code></pre><p>   Update node value that has an anchor</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Anchor</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">remain</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cool</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = &quot;dog&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cool</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Update empty object and array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="9482817887-1">{</span><span class="p" data-group-id="9482817887-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b.[0] |= &quot;bogs&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">bogs</span></code></pre><p>   Custom types are maintained by default</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">cat</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">dog</span><span class="w"> </span><span class="n">woof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">cat</span><span class="w"> </span><span class="n">woof</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">dog</span><span class="w"> </span><span class="n">woof</span></code></pre><p>   Custom types: clobber</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">clobber</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">cat</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">dog</span><span class="w"> </span><span class="n">woof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a =c .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">dog</span><span class="w"> </span><span class="n">woof</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">dog</span><span class="w"> </span><span class="n">woof</span></code></pre><p>Boolean Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">result</span><span class="o">.</span><span class="w">

   </span><span class="ow">not</span><span class="w"> </span><span class="n">flips</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">vice</span><span class="w"> </span><span class="n">versa</span><span class="o">.</span><span class="w">

   </span><span class="n">any</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">sequence</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="no">true</span><span class="o">.</span><span class="w">

   </span><span class="n">any_c</span><span class="p" data-group-id="7490652850-1">(</span><span class="n">condition</span><span class="p" data-group-id="7490652850-1">)</span><span class="w">  </span><span class="ow">and</span><span class="w"> </span><span class="n">all_c</span><span class="p" data-group-id="7490652850-2">(</span><span class="n">condition</span><span class="p" data-group-id="7490652850-2">)</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="no">true</span><span class="o">.</span><span class="w">  </span><span class="ss">Note</span><span class="p">:</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">sim</span><span class="err">‐</span><span class="w">
   </span><span class="n">ply</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">condition</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">isn</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">clever</span><span class="o">..</span><span class="n">yet</span><span class="w">

   </span><span class="nc">These</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">commonly</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span></code></pre><p>   Related Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="p" data-group-id="4415550945-1">(</span><span class="o">==</span><span class="p">,</span><span class="w"> </span><span class="o">!=</span><span class="p" data-group-id="4415550945-1">)</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="p" data-group-id="4415550945-2">(</span><span class="o">&gt;=</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="4415550945-2">)</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">here</span></code></pre><p>   or example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;true or false&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   “yes” and “no” are strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="mf">1.2</span><span class="w"> </span><span class="n">standard</span><span class="p">,</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">yes</span><span class="o">/</span><span class="n">no</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">booleans</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">dropped</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">considered</span><span class="w"> </span><span class="n">strings</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="err">`</span><span class="mf">10.2</span><span class="o">.</span><span class="mf">1.2</span><span class="o">.</span><span class="w">  </span><span class="nc">Boolean</span><span class="sc">&#39; in https://yaml.org/spec/1.2.2/

   Given a sample.yml file of:

          - yes
          - no

   then

          yq &#39;</span><span class="o">.</span><span class="p" data-group-id="5616748448-1">[</span><span class="p" data-group-id="5616748448-1">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">tag</span><span class="err">&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">str</span></code></pre><p>   and example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;true and false&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Matching nodes with select, equals and or</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">bird</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bird</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">fly</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[.[] | select(.a == &quot;cat&quot; or .b == &quot;dog&quot;)]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">bird</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">fly</span></code></pre><p>   any returns true if any boolean in a given array is true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="no">false</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;any&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   any returns false for an empty array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="0760315767-1">[</span><span class="p" data-group-id="0760315767-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;any&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   any_c returns true if any element in the array is true for the given condition.</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">rad</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">awesome</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">meh</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">whatever</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |= any_c(. == &quot;awesome&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="no">false</span></code></pre><p>   all returns true if all booleans in a given array are true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;all&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   all returns true for an empty array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="0045723119-1">[</span><span class="p" data-group-id="0045723119-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;all&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   all_c returns true if all elements in the array are true for the given condition.</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">rad</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">awesome</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">meh</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |= all_c(tag == &quot;!!str&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="no">false</span></code></pre><p>   Not true is false</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;true | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Not false is true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;false | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   String values considered to be true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;cat&quot; | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Empty string value considered to be true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;&quot; | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Numbers are considered to be true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;1 | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Zero is considered to be true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;0 | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Null is considered to be false</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;~ | not&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>Collect into Array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">brackets</span><span class="o">.</span></code></pre><p>   Collect empty</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;[]&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="3904497594-1">[</span><span class="p" data-group-id="3904497594-1">]</span></code></pre><p>   Collect single</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;[&quot;cat&quot;]&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Collect many</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[.a, .b]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span></code></pre><p>Column</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">node</span><span class="o">.</span><span class="w">  </span><span class="nc">Starts</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="w">

   </span><span class="nc">Column</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">precede</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">starts</span><span class="o">.</span></code></pre><p>   Returns column of value node</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b | column&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">4</span></code></pre><p>   Returns column of key node</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pipe</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">column</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b | key | column&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span></code></pre><p>   First column is 1</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | key | column&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span></code></pre><p>   No column data is 0</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;{&quot;a&quot;: &quot;new entry&quot;} | column&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span></code></pre><p>Comment Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">comments</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">maps</span><span class="o">/</span><span class="n">arrays</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">actually</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">opposed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p" data-group-id="1089017649-1">(</span><span class="n">map</span><span class="o">/</span><span class="n">array</span><span class="p" data-group-id="1089017649-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w">  </span><span class="n">below</span><span class="w">  </span><span class="k">for</span><span class="w">
   </span><span class="n">examples</span><span class="o">.</span><span class="w">

   </span><span class="nc">Like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="n">operators</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">applies</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">updating</span><span class="w"> </span><span class="n">comments</span><span class="p">:</span></code></pre><p>   plain form: =</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">nodes</span><span class="err">’</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pipeline</span></code></pre><p>   relative form: |=</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">similar</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">plain</span><span class="w"> </span><span class="n">form</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">evaluates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">node</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">path</span><span class="o">.</span></code></pre><p>   Set line comment</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">reliability</span><span class="w"> </span><span class="p" data-group-id="8970280828-1">(</span><span class="n">see</span><span class="w"> </span><span class="n">below</span><span class="p" data-group-id="8970280828-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a line_comment=&quot;single&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># single</span></code></pre><p>   Set line comment of a maps/arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">For</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">arrays</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">node</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">scalars</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a | key) line_comment=&quot;single&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="c1"># single</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">things</span></code></pre><p>   Use update assign to perform relative updates</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. line_comment |= .&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="c1"># dog</span></code></pre><p>   Where is the comment - map key example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">surprising</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">is</span><span class="o">.</span><span class="w">  </span><span class="err">`</span><span class="n">p</span><span class="sc">&#39; indicates the path, `isKey&#39;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">node</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p" data-group-id="1578028159-1">(</span><span class="n">as</span><span class="w"> </span><span class="n">opposed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="1578028159-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">From</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">-</span><span class="n">comment</span><span class="sc">&#39; is actually on the `hello&#39;</span><span class="w"> </span><span class="n">key</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">hello</span><span class="p">:</span><span class="w"> </span><span class="c1"># hello-world-comment</span><span class="w">
            </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="n">world</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[... | {&quot;p&quot;: path | join(&quot;.&quot;), &quot;isKey&quot;: is_key, &quot;hc&quot;: headComment, &quot;lc&quot;: lineComment, &quot;fc&quot;: footComment}]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">-</span><span class="n">comment</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="o">.</span><span class="n">message</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="o">.</span><span class="n">message</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span></code></pre><p>   Retrieve comment - map key example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">From</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">hello</span><span class="sc">&#39; key as a lineComment

   Given a sample.yml file of:

          hello: # hello-world-comment
            message: world

   then

          yq &#39;</span><span class="o">.</span><span class="n">hello</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">line_comment</span><span class="err">&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">-</span><span class="n">comment</span></code></pre><p>   Where is the comment - array example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">surprising</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">is</span><span class="o">.</span><span class="w">  </span><span class="err">`</span><span class="n">p</span><span class="sc">&#39; indicates the path, `isKey&#39;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">node</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p" data-group-id="9496397479-1">(</span><span class="n">as</span><span class="w"> </span><span class="n">opposed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="9496397479-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">From</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">under</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">comment</span><span class="sc">&#39; is actually on the first child

   Given a sample.yml file of:

          name:
            # under-name-comment
            - first-array-child

   then

          yq &#39;</span><span class="p" data-group-id="9496397479-2">[</span><span class="n">...</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="9496397479-3">{</span><span class="ss">&quot;p&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">join</span><span class="p" data-group-id="9496397479-4">(</span><span class="s">&quot;.&quot;</span><span class="p" data-group-id="9496397479-4">)</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;isKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">is_key</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;hc&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">headComment</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;lc&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">lineComment</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;fc&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">footComment</span><span class="p" data-group-id="9496397479-3">}</span><span class="p" data-group-id="9496397479-2">]</span><span class="err">&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="mi">0</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">hc</span><span class="p">:</span><span class="w"> </span><span class="n">under</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">comment</span><span class="w">
            </span><span class="ss">lc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">fc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span></code></pre><p>   Retrieve comment - array example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">From</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">headComment</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w">
            </span><span class="c1"># under-name-comment</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">first</span><span class="o">-</span><span class="n">array</span><span class="o">-</span><span class="n">child</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.name[0] | headComment&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">under</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">comment</span></code></pre><p>   Set head comment</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. head_comment=&quot;single&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># single</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Set head comment of a map entry</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a | key) head_comment=&quot;single&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
          </span><span class="c1"># single</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Set foot comment, using an expression</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. foot_comment=.a&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="c1"># cat</span></code></pre><p>   Remove comment</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comment</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="c1"># leave this</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a line_comment=&quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="c1"># leave this</span></code></pre><p>   Remove (strip) all comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">...</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">included</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># hi</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comment</span><span class="w">
          </span><span class="c1"># great</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="c1"># key comment</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;... comments=&quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">b</span><span class="p">:</span></code></pre><p>   Get line comment</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># welcome!</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># meow</span><span class="w">
          </span><span class="c1"># have a great day</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | line_comment&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">meow</span></code></pre><p>   Get head comment</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># welcome!</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># meow</span><span class="w">

          </span><span class="c1"># have a great day</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. | head_comment&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">welcome!</span></code></pre><p>   Head comment with document split</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># welcome!</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="c1"># bob</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># meow</span><span class="w">

          </span><span class="c1"># have a great day</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;head_comment&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">welcome!</span><span class="w">
          </span><span class="n">bob</span></code></pre><p>   Get foot comment</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># welcome!</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># meow</span><span class="w">

          </span><span class="c1"># have a great day</span><span class="w">
          </span><span class="c1"># no really</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. | foot_comment&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">great</span><span class="w"> </span><span class="n">day</span><span class="w">
          </span><span class="n">no</span><span class="w"> </span><span class="n">really</span></code></pre><p>Compare Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Comparison</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="p" data-group-id="8383798274-1">(</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&gt;=</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;=</span><span class="p" data-group-id="8383798274-1">)</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">comparing</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="ss">supported</span><span class="p">:</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">numbers</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">strings</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">datetimes</span></code></pre><p>   Related Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="p" data-group-id="1100404992-1">(</span><span class="o">==</span><span class="p">,</span><span class="w"> </span><span class="o">!=</span><span class="p" data-group-id="1100404992-1">)</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="p" data-group-id="1100404992-2">(</span><span class="ow">and</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="1100404992-2">)</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">here</span></code></pre><p>   Compare numbers (&gt;)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a &gt; .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Compare equal numbers (&gt;=)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a &gt;= .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Compare strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Compares</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">bytecode</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">zoo</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a &gt; .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Compare date times</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">compare</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">times</span><span class="o">.</span><span class="w">  </span><span class="nc">Assumes</span><span class="w"> </span><span class="nc">RFC3339</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">date</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T03</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T03</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a &gt; .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Both sides are null: &gt; is false</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a &gt; .b&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Both sides are null: &gt;= is true</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a &gt;= .b&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>Contains</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="n">otherwise</span><span class="o">.</span><span class="w">  </span><span class="nc">For</span><span class="w"> </span><span class="n">arrays</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">array</span><span class="o">.</span><span class="w">   </span><span class="nc">For</span><span class="w">
   </span><span class="n">strings</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">substring</span><span class="o">.</span><span class="w">

   </span><span class="p" data-group-id="3867316390-1">{</span><span class="p">%</span><span class="w"> </span><span class="n">hint</span><span class="w"> </span><span class="n">style</span><span class="o">=</span><span class="err">“</span><span class="n">warning</span><span class="err">”</span><span class="w"> </span><span class="p">%</span><span class="p" data-group-id="3867316390-1">}</span><span class="w">

   </span><span class="nc">Note</span><span class="w">  </span><span class="n">that</span><span class="p">,</span><span class="w">  </span><span class="n">just</span><span class="w">  </span><span class="n">like</span><span class="w">  </span><span class="n">jq</span><span class="p">,</span><span class="w">  </span><span class="ow">when</span><span class="w">  </span><span class="n">checking</span><span class="w">  </span><span class="k">if</span><span class="w">  </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">another</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">string</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">con</span><span class="err">‐</span><span class="w">
   </span><span class="n">tains</span><span class="p" data-group-id="3867316390-2">(</span><span class="p" data-group-id="3867316390-3">[</span><span class="s">&quot;cat&quot;</span><span class="p" data-group-id="3867316390-3">]</span><span class="p" data-group-id="3867316390-2">)</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="p" data-group-id="3867316390-4">[</span><span class="s">&quot;cats&quot;</span><span class="p" data-group-id="3867316390-4">]</span><span class="o">.</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">“</span><span class="nc">Array</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">array</span><span class="err">”</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="o">.</span><span class="w">

   </span><span class="p" data-group-id="3867316390-5">{</span><span class="p">%</span><span class="w"> </span><span class="n">endhint</span><span class="w"> </span><span class="p">%</span><span class="p" data-group-id="3867316390-5">}</span></code></pre><p>   Array contains array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Array</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">of</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">foobar</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">foobaz</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">blarp</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;contains([&quot;baz&quot;, &quot;bar&quot;])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Array has a subset array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Subtract</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">superset</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subset</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">foobar</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">foobaz</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">blarp</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[&quot;baz&quot;, &quot;bar&quot;] - . | length == 0&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   Object included in array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">&quot;foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="ss">&quot;bar&quot;</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">&quot;barp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
              </span><span class="ss">&quot;blip&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;contains({&quot;bar&quot;: [{&quot;barp&quot;: 12}]})&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Object not included in array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">&quot;foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="ss">&quot;bar&quot;</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">&quot;barp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
              </span><span class="ss">&quot;blip&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;contains({&quot;foo&quot;: 12, &quot;bar&quot;: [{&quot;barp&quot;: 15}]})&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span></code></pre><p>   String contains substring</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">foobar</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;contains(&quot;bar&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   String equals string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">meow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;contains(&quot;meow&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>Create, Collect into Object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">construct</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="p" data-group-id="9559658122-1">(</span><span class="ow">or</span><span class="w"> </span><span class="n">maps</span><span class="p" data-group-id="9559658122-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">yaml</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">fresh</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">documents</span><span class="o">.</span></code></pre><p>   Collect empty object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;{}&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="2987624895-1">{</span><span class="p" data-group-id="2987624895-1">}</span></code></pre><p>   Wrap (prefix) existing object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;{&quot;wrap&quot;: .}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">wrap</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span></code></pre><p>   Using splat to create multiple objects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w">
          </span><span class="ss">pets</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;{.name: .pets.[]}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Mike</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">Mike</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Working with multiple documents</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w">
          </span><span class="ss">pets</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Rosey</span><span class="w">
          </span><span class="ss">pets</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">monkey</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">sheep</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;{.name: .pets.[]}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Mike</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">Mike</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">Rosey</span><span class="p">:</span><span class="w"> </span><span class="n">monkey</span><span class="w">
          </span><span class="ss">Rosey</span><span class="p">:</span><span class="w"> </span><span class="n">sheep</span></code></pre><p>   Creating yaml from scratch</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;{&quot;wrap&quot;: &quot;frog&quot;}&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">wrap</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Creating yaml from scratch with multiple objects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;(.a.b = &quot;foo&quot;) | (.d.e = &quot;bar&quot;)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
          </span><span class="ss">d</span><span class="p">:</span><span class="w">
            </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span></code></pre><p>Date Time</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Various</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">manipulating</span><span class="w"> </span><span class="n">dates</span><span class="o">.</span></code></pre><p>   Date time formattings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="nc">Golang</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">built</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">times</span><span class="o">.</span><span class="w">

   </span><span class="nc">When</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RFC3339</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="mi">2006</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">02</span><span class="nc">T15</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">05</span><span class="nc">Z07</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">parsing</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">with_dtf</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">parameter</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w">
   </span><span class="n">any</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">tree</span><span class="o">.</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_dtf(&quot;myformat&quot;; .a + &quot;3h&quot; | tz(&quot;Australia/Melbourne&quot;))&#39;</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="n">docs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">options</span><span class="o">.</span></code></pre><p>   Timezones</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="nc">Golang</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">built</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">LoadLocation</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="n">timezones</span><span class="w"> </span><span class="n">strings</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="n">docs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">details</span><span class="o">.</span></code></pre><p>   Durations</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Durations</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">parsed</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="nc">Golang</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">built</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">ParseDuration</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">durations</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span></code></pre><p>   Format: from standard RFC3339 format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Providing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">assumes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="nc">RFC3339</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="n">format</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">tagged</span><span class="w"> </span><span class="n">node</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2001</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">15</span><span class="nc">T02</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mf">43.1</span><span class="nc">Z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= format_datetime(&quot;Monday, 02-Jan-06 at 3:04PM&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span></code></pre><p>   Format: from custom date time</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">with_dtf</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">parsing</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM&quot;; format_datetime(&quot;2006-01-02&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2001</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">15</span></code></pre><p>   Format: get the day of the week</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2001</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">15</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | format_datetime(&quot;Monday&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="nc">Saturday</span></code></pre><p>   Now</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.updated = now&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
          </span><span class="ss">updated</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">19</span><span class="nc">T01</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">03</span><span class="nc">Z</span></code></pre><p>   From Unix</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Converts</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">unix</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">don</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="p">:</span><span class="p">)</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;1675301929 | from_unix | tz(&quot;UTC&quot;)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">2023</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">02</span><span class="nc">T01</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mi">49</span><span class="nc">Z</span></code></pre><p>   To Unix</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Converts</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">unix</span><span class="w"> </span><span class="n">time</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;now | to_unix&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1621386123</span></code></pre><p>   Timezone: from standard RFC3339 format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">timezone</span><span class="o">.</span><span class="w">  </span><span class="nc">Specify</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="nc">IANA</span><span class="w"> </span><span class="nc">Time</span><span class="w"> </span><span class="nc">Zone</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="err">`</span><span class="n">utc</span><span class="sc">&#39;, `local&#39;</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">parameter</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">assumes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">datetime</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="ow">in</span><span class="w">  </span><span class="nc">RFC3339</span><span class="w">
   </span><span class="n">format</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.updated = (now | tz(&quot;Australia/Sydney&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
          </span><span class="ss">updated</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">19</span><span class="nc">T11</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">03</span><span class="o">+</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span></code></pre><p>   Timezone: with custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Specify</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="nc">IANA</span><span class="w"> </span><span class="nc">Time</span><span class="w"> </span><span class="nc">Zone</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="err">`</span><span class="n">utc</span><span class="sc">&#39;, `local&#39;</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM MST&quot;; tz(&quot;Australia/Sydney&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">59</span><span class="nc">PM</span><span class="w"> </span><span class="nc">AEDT</span></code></pre><p>   Add and tz custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Specify</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="nc">IANA</span><span class="w"> </span><span class="nc">Time</span><span class="w"> </span><span class="nc">Zone</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="err">`</span><span class="n">utc</span><span class="sc">&#39;, `local&#39;</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM MST&quot;; tz(&quot;Australia/Sydney&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">59</span><span class="nc">PM</span><span class="w"> </span><span class="nc">AEDT</span></code></pre><p>   Date addition</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a += &quot;3h10m&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T03</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span></code></pre><p>   Date subtraction</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">subtract</span><span class="w"> </span><span class="n">durations</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">dates</span><span class="o">.</span><span class="w">  </span><span class="nc">Assumes</span><span class="w"> </span><span class="nc">RFC3339</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">mikefarah</span><span class="o">.</span><span class="n">gitbook</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">yq</span><span class="o">/</span><span class="n">operators</span><span class="o">/</span><span class="n">datetime</span><span class="c1">#date-time-formattings date-time operators for more in‐</span><span class="w">
   </span><span class="n">formation</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T03</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a -= &quot;3h10m&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span></code></pre><p>   Date addition - custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM MST&quot;; .a += &quot;3h1m&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">6</span><span class="p">:</span><span class="mi">00</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span></code></pre><p>   Date script with custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">embed</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">with_dtf</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">needed</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM MST&quot;; .a = (.a + &quot;3h1m&quot; | tz(&quot;Australia/Perth&quot;)))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">00</span><span class="nc">PM</span><span class="w"> </span><span class="nc">AWST</span></code></pre><p>Delete</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Deletes</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span></code></pre><p>   Delete entry in map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del(.b)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Delete nested entry in map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">a1</span><span class="p">:</span><span class="w"> </span><span class="n">fred</span><span class="w">
            </span><span class="ss">a2</span><span class="p">:</span><span class="w"> </span><span class="n">frood</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del(.a.a1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">a2</span><span class="p">:</span><span class="w"> </span><span class="n">frood</span></code></pre><p>   Delete entry in array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del(.[1])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span></code></pre><p>   Delete nested entry in array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del(.[0].a)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Delete no matches</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del(.c)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Delete matching entries</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del( .[] | select(. == &quot;*at&quot;) )&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Recursively delete matching keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">blog</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;del(.. | select(has(&quot;name&quot;)).name)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span></code></pre><p>Divide</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Divide</span><span class="w"> </span><span class="n">behaves</span><span class="w"> </span><span class="n">differently</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">LHS</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ss">strings</span><span class="p">:</span><span class="w"> </span><span class="n">split</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">divider</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="ss">number</span><span class="p">:</span><span class="w"> </span><span class="n">arithmetic</span><span class="w"> </span><span class="n">division</span></code></pre><p>   String split</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat_meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="bp">_</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.c = .a / .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat_meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="bp">_</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   Number division</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">float</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a / .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mf">4.8</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span></code></pre><p>   Number division by zero</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Dividing</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">+</span><span class="nc">Inf</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">-</span><span class="nc">Inf</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a / 0 | .b = .b / 0&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w"> </span><span class="o">+</span><span class="nc">Inf</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w"> </span><span class="o">-</span><span class="nc">Inf</span></code></pre><p>Document Index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">documentIndex</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="p" data-group-id="1204436997-1">(</span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">di</span><span class="w"> </span><span class="n">shorthand</span><span class="p" data-group-id="1204436997-1">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">document</span><span class="o">.</span></code></pre><p>   Retrieve a document index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | document_index&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="mi">1</span></code></pre><p>   Retrieve a document index, shorthand</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | di&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="mi">1</span></code></pre><p>   Filter by document index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;select(document_index == 1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Filter by document index shorthand</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;select(di == 1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Print Document Index with matches</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | ({&quot;match&quot;: ., &quot;doc&quot;: document_index})&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">match</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">doc</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">match</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">doc</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><p>Encoder / Decoder</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Encode</span><span class="w">  </span><span class="n">operators</span><span class="w">  </span><span class="n">will</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">piped</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">encode</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="n">format</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k" data-group-id="3411304826-1">do</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">opposite</span><span class="p">,</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">de</span><span class="err">‐</span><span class="w">
   </span><span class="n">code</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">relevant</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">structure</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">optionally</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">indent</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">encode</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="p" data-group-id="3411304826-2">(</span><span class="n">see</span><span class="w"> </span><span class="n">below</span><span class="p" data-group-id="3411304826-2">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">These</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">stringified</span><span class="w"> </span><span class="n">embedded</span><span class="w"> </span><span class="n">yaml</span><span class="o">/</span><span class="n">json</span><span class="o">/</span><span class="n">props</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">them</span><span class="o">.</span><span class="w">

   </span><span class="nc">Format</span><span class="w">       </span><span class="nc">Decode</span><span class="w"> </span><span class="p" data-group-id="3411304826-3">(</span><span class="n">from</span><span class="w"> </span><span class="n">string</span><span class="p" data-group-id="3411304826-3">)</span><span class="w">   </span><span class="nc">Encode</span><span class="w"> </span><span class="p" data-group-id="3411304826-4">(</span><span class="n">to</span><span class="w"> </span><span class="n">string</span><span class="p" data-group-id="3411304826-4">)</span><span class="w">
   </span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="w">
   </span><span class="nc">Yaml</span><span class="w">         </span><span class="n">from_yaml</span><span class="o">/</span><span class="na">@yamld</span><span class="w">       </span><span class="n">to_yaml</span><span class="p" data-group-id="3411304826-5">(</span><span class="n">i</span><span class="p" data-group-id="3411304826-5">)</span><span class="o">/</span><span class="na">@yaml</span><span class="w">
   </span><span class="nc">JSON</span><span class="w">         </span><span class="n">from_json</span><span class="o">/</span><span class="na">@jsond</span><span class="w">       </span><span class="n">to_json</span><span class="p" data-group-id="3411304826-6">(</span><span class="n">i</span><span class="p" data-group-id="3411304826-6">)</span><span class="o">/</span><span class="na">@json</span><span class="w">
   </span><span class="nc">Properties</span><span class="w">   </span><span class="n">from_props</span><span class="o">/</span><span class="na">@propsd</span><span class="w">     </span><span class="n">to_props</span><span class="o">/</span><span class="na">@props</span><span class="w">
   </span><span class="nc">CSV</span><span class="w">          </span><span class="n">from_csv</span><span class="o">/</span><span class="na">@csvd</span><span class="w">         </span><span class="n">to_csv</span><span class="o">/</span><span class="na">@csv</span><span class="w">
   </span><span class="nc">TSV</span><span class="w">          </span><span class="n">from_tsv</span><span class="o">/</span><span class="na">@tsvd</span><span class="w">         </span><span class="n">to_tsv</span><span class="o">/</span><span class="na">@tsv</span><span class="w">
   </span><span class="nc">XML</span><span class="w">          </span><span class="n">from_xml</span><span class="o">/</span><span class="na">@xmld</span><span class="w">         </span><span class="n">to_xml</span><span class="p" data-group-id="3411304826-7">(</span><span class="n">i</span><span class="p" data-group-id="3411304826-7">)</span><span class="o">/</span><span class="na">@xml</span><span class="w">
   </span><span class="nc">Base64</span><span class="w">       </span><span class="na">@base64d</span><span class="w">               </span><span class="na">@base64</span><span class="w">
   </span><span class="nc">URI</span><span class="w">          </span><span class="na">@urid</span><span class="w">                  </span><span class="na">@uri</span><span class="w">
   </span><span class="nc">Shell</span><span class="w">                               </span><span class="na">@sh</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="nc">CSV</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">TSV</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">accepted</span><span class="w"> </span><span class="n">formats</span><span class="o">.</span><span class="w">

   </span><span class="nc">XML</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">attribute</span><span class="o">-</span><span class="n">prefix</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">xml</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">identify</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">fields</span><span class="o">.</span><span class="w">

   </span><span class="nc">Base64</span><span class="w"> </span><span class="n">assumes</span><span class="w"> </span><span class="n">rfc4648</span><span class="w"> </span><span class="n">encoding</span><span class="o">.</span><span class="w">  </span><span class="nc">Encoding</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">decoding</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">content</span><span class="o">.</span></code></pre><p>   Encode value as json string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | to_json)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="p" data-group-id="6479444405-1">{</span><span class="w">
              </span><span class="ss">&quot;cool&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;thing&quot;</span><span class="w">
            </span><span class="p" data-group-id="6479444405-1">}</span></code></pre><p>   Encode value as json string, on one line</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pass</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">indent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">print</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | to_json(0))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;{&quot;cool&quot;:&quot;thing&quot;}&#39;</span></code></pre><p>   Encode value as json string, on one line shorthand</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pass</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">indent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">print</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | @json)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;{&quot;cool&quot;:&quot;thing&quot;}&#39;</span></code></pre><p>   Decode a json encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Keep</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">mind</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">YAML</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">idiomatic</span><span class="w"> </span><span class="n">yaml</span><span class="p">,</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">styling</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;{&quot;cool&quot;:&quot;thing&quot;}&#39;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | from_json | ... style=&quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span></code></pre><p>   Encode value as props string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | @props)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="n">cool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thing</span></code></pre><p>   Decode props encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="n">cats</span><span class="o">=</span><span class="n">great</span><span class="w">
            </span><span class="n">dogs</span><span class="o">=</span><span class="n">cool</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= @propsd&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cats</span><span class="p">:</span><span class="w"> </span><span class="n">great</span><span class="w">
            </span><span class="ss">dogs</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span></code></pre><p>   Decode csv encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="n">cats</span><span class="p">,</span><span class="n">dogs</span><span class="w">
            </span><span class="n">great</span><span class="p">,</span><span class="n">cool</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= @csvd&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">cats</span><span class="p">:</span><span class="w"> </span><span class="n">great</span><span class="w">
              </span><span class="ss">dogs</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span></code></pre><p>   Decode tsv encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="n">cats</span><span class="w">  </span><span class="n">dogs</span><span class="w">
            </span><span class="n">great</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= @tsvd&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">cats</span><span class="p">:</span><span class="w"> </span><span class="n">great</span><span class="w">
              </span><span class="ss">dogs</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span></code></pre><p>   Encode value as yaml string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Indent</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">dylan</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | to_yaml)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">dylan</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">dylan</span></code></pre><p>   Encode value as yaml string, with custom indentation</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">indentation</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">parameter</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">dylan</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | to_yaml(8))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">dylan</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
                    </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">dylan</span></code></pre><p>   Decode a yaml encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;foo: bar&#39;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | from_yaml)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;foo: bar&#39;</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span></code></pre><p>   Update a multiline encoded yaml string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
            </span><span class="ss">baz</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= (from_yaml | .foo = &quot;cat&quot; | to_yaml)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">baz</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Update a single line encoded yaml string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;foo: bar&#39;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= (from_yaml | .foo = &quot;cat&quot; | to_yaml)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;foo: cat&#39;</span></code></pre><p>   Encode array of scalars as csv string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Scalars</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">strings</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">booleans</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">thing1</span><span class="p">,</span><span class="n">thing2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mf">3.40</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;@csv&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="p">,</span><span class="s">&quot;thing1,thing2&quot;</span><span class="p">,</span><span class="no">true</span><span class="p">,</span><span class="mf">3.40</span></code></pre><p>   Encode array of arrays as csv string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">thing1</span><span class="p">,</span><span class="n">thing2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mf">3.40</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">thing3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;@csv&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="p">,</span><span class="s">&quot;thing1,thing2&quot;</span><span class="p">,</span><span class="no">true</span><span class="p">,</span><span class="mf">3.40</span><span class="w">
          </span><span class="n">dog</span><span class="p">,</span><span class="n">thing3</span><span class="p">,</span><span class="no">false</span><span class="p">,</span><span class="mi">12</span></code></pre><p>   Encode array of arrays as tsv string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Scalars</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">strings</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">booleans</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">thing1</span><span class="p">,</span><span class="n">thing2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mf">3.40</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">thing3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;@tsv&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="w"> </span><span class="n">thing1</span><span class="p">,</span><span class="n">thing2</span><span class="w">   </span><span class="no">true</span><span class="w">    </span><span class="mf">3.40</span><span class="w">
          </span><span class="n">dog</span><span class="w"> </span><span class="n">thing3</span><span class="w">  </span><span class="no">false</span><span class="w">   </span><span class="mi">12</span></code></pre><p>   Encode value as xml string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
              </span><span class="o">+</span><span class="na">@id</span><span class="p">:</span><span class="w"> </span><span class="n">hi</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | to_xml&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">cool</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">&quot;hi&quot;</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">foo</span><span class="o">&gt;</span><span class="n">bar</span><span class="o">&lt;</span><span class="o">/</span><span class="n">foo</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cool</span><span class="o">&gt;</span></code></pre><p>   Encode value as xml string on a single line</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
              </span><span class="o">+</span><span class="na">@id</span><span class="p">:</span><span class="w"> </span><span class="n">hi</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | @xml&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">cool</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">&quot;hi&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="n">foo</span><span class="o">&gt;</span><span class="n">bar</span><span class="o">&lt;</span><span class="o">/</span><span class="n">foo</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cool</span><span class="o">&gt;</span></code></pre><p>   Encode value as xml string with custom indentation</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w">
              </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
              </span><span class="o">+</span><span class="na">@id</span><span class="p">:</span><span class="w"> </span><span class="n">hi</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;{&quot;cat&quot;: .a | to_xml(1)}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">cool</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">&quot;hi&quot;</span><span class="o">&gt;</span><span class="w">
             </span><span class="o">&lt;</span><span class="n">foo</span><span class="o">&gt;</span><span class="n">bar</span><span class="o">&lt;</span><span class="o">/</span><span class="n">foo</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cool</span><span class="o">&gt;</span></code></pre><p>   Decode a xml encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">foo</span><span class="o">&gt;</span><span class="n">bar</span><span class="o">&lt;</span><span class="o">/</span><span class="n">foo</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b = (.a | from_xml)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">foo</span><span class="o">&gt;</span><span class="n">bar</span><span class="o">&lt;</span><span class="o">/</span><span class="n">foo</span><span class="o">&gt;</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span></code></pre><p>   Encode a string to base64</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">coolData</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">string</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.coolData | @base64&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="nc">YSBzcGVjaWFsIHN0cmluZw</span><span class="o">==</span></code></pre><p>   Encode a yaml document to base64</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pipe</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="na">@yaml</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="na">@base64</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">encode</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;@yaml | @base64&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="nc">YTogYXBwbGUK</span></code></pre><p>   Encode a string to uri</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">coolData</span><span class="p">:</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="p" data-group-id="0549772114-1">(</span><span class="p" data-group-id="0549772114-1">)</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="o">*</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.coolData | @uri&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">this</span><span class="o">+</span><span class="n">has</span><span class="o">+</span><span class="p">%</span><span class="mi">26</span><span class="o">+</span><span class="n">special</span><span class="o">+</span><span class="p">%</span><span class="mi">28</span><span class="p">%</span><span class="mi">29</span><span class="o">+</span><span class="n">characters</span><span class="o">+</span><span class="p">%</span><span class="mi">2</span><span class="nc">A</span></code></pre><p>   Decode a URI to a string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">this</span><span class="o">+</span><span class="n">has</span><span class="o">+</span><span class="p">%</span><span class="mi">26</span><span class="o">+</span><span class="n">special</span><span class="o">+</span><span class="p">%</span><span class="mi">28</span><span class="p">%</span><span class="mi">29</span><span class="o">+</span><span class="n">characters</span><span class="o">+</span><span class="p">%</span><span class="mi">2</span><span class="nc">A</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;@urid&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">this</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="p" data-group-id="3932856065-1">(</span><span class="p" data-group-id="3932856065-1">)</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="o">*</span></code></pre><p>   Encode a string to sh</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Sh</span><span class="o">/</span><span class="nc">Bash</span><span class="w"> </span><span class="n">friendly</span><span class="w"> </span><span class="n">string</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">coolData</span><span class="p">:</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">spaces</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="sc">&#39;quote&#39;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.coolData | @sh&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">strings</span><span class="sc">&#39; with spaces and a &#39;</span><span class="err">\</span><span class="err">&#39;</span><span class="k">quote</span><span class="err">\</span><span class="err">&#39;</span></code></pre><p>   Decode a base64 encoded string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Decoded</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">coolData</span><span class="p">:</span><span class="w"> </span><span class="nc">V29ya3Mgd2l0aCBVVEYtMTYg8J</span><span class="o">+</span><span class="nc">Yig</span><span class="o">==</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.coolData | @base64d&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="nc">Works</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">UTF</span><span class="o">-</span><span class="mi">16</span><span class="w"> </span><span class="err">😊</span></code></pre><p>   Decode a base64 encoded yaml document</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pipe</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">from_yaml</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">decoded</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">coolData</span><span class="p">:</span><span class="w"> </span><span class="nc">YTogYXBwbGUK</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.coolData |= (@base64d | from_yaml)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">coolData</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span></code></pre><p>Entries</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">to</span><span class="o">/</span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">key</span><span class="o">-</span><span class="n">value</span><span class="w"> </span><span class="n">pairs</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">performing</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">maps</span><span class="o">.</span><span class="w">

   </span><span class="nc">Use</span><span class="w"> </span><span class="n">with_entries</span><span class="p" data-group-id="0391926147-1">(</span><span class="n">op</span><span class="p" data-group-id="0391926147-1">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">syntactic</span><span class="w"> </span><span class="n">sugar</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">to_entries</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">op</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">from_entries</span><span class="o">.</span></code></pre><p>   to_entries Map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;to_entries&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   to_entries Array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;to_entries&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">b</span></code></pre><p>   to_entries null</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">null</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;to_entries&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>   from_entries map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;to_entries | from_entries&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   from_entries with numeric key indices</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">from_entries</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">numeric</span><span class="w"> </span><span class="n">keys</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;to_entries | from_entries&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">b</span></code></pre><p>   Use with_entries to update keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_entries(.key |= &quot;KEY_&quot; + .)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">KEY_a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">KEY_b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   Use with_entries to update keys recursively</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">We</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="p" data-group-id="3252858066-1">(</span><span class="o">..</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="3252858066-2">(</span><span class="n">tag</span><span class="o">=</span><span class="err">“</span><span class="n">map</span><span class="err">”</span><span class="p" data-group-id="3252858066-2">)</span><span class="p" data-group-id="3252858066-1">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">maps</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">update</span><span class="p">,</span><span class="w"> </span><span class="n">with_entries</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">b_a</span><span class="p">:</span><span class="w"> </span><span class="n">nested</span><span class="w">
            </span><span class="ss">b_b</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.. | select(tag==&quot;!!map&quot;)) |= with_entries(.key |= &quot;KEY_&quot; + .)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">KEY_a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">KEY_b</span><span class="p">:</span><span class="w">
            </span><span class="ss">KEY_b_a</span><span class="p">:</span><span class="w"> </span><span class="n">nested</span><span class="w">
            </span><span class="ss">KEY_b_b</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span></code></pre><p>   Custom sort map keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">to_entries</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">key</span><span class="o">/</span><span class="n">value</span><span class="w"> </span><span class="n">pairs</span><span class="p">,</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">sort</span><span class="o">/</span><span class="n">sort_by</span><span class="o">/</span><span class="n">etc</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">back</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;to_entries | sort_by(.key) | reverse | from_entries&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Use with_entries to filter the map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bird</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w">
            </span><span class="ss">d</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_entries(select(.value | has(&quot;b&quot;)))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bird</span></code></pre><p>Env Variable Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">These</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">documents</span><span class="o">.</span><span class="w">  </span><span class="nc">While</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">can</span><span class="p">,</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">course</span><span class="p">,</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="nc">CLI</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">string</span><span class="w">  </span><span class="n">inter</span><span class="err">‐</span><span class="w">
   </span><span class="n">polation</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="k">quote</span><span class="w"> </span><span class="n">escaping</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">tricky</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">read</span><span class="o">.</span><span class="w">

   </span><span class="nc">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="ss">operators</span><span class="p">:</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p" data-group-id="6995364384-1">(</span><span class="n">be</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">boolean</span><span class="p" data-group-id="6995364384-1">)</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">strenv</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">parses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">envsubst</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">interpolates</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">envsubst</span><span class="o">.</span></code></pre><p>   EnvSubst Options</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">optionally</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">envsubst</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">options</span><span class="p">:</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">nu</span><span class="p">:</span><span class="w"> </span><span class="nc">NoUnset</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">ne</span><span class="p">:</span><span class="w"> </span><span class="nc">NoEmpty</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">empty</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">ff</span><span class="p">:</span><span class="w"> </span><span class="nc">FailFast</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">abort</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">failure</span><span class="w"> </span><span class="p" data-group-id="0030766805-1">(</span><span class="n">rather</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">collect</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">errors</span><span class="p" data-group-id="0030766805-1">)</span><span class="w">

   </span><span class="nc">E</span><span class="o">.</span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">envsubst</span><span class="p" data-group-id="0030766805-2">(</span><span class="n">ne</span><span class="p">,</span><span class="w"> </span><span class="n">ff</span><span class="p" data-group-id="0030766805-2">)</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">variable</span><span class="o">.</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="nc">Imposing</span><span class="w"> </span><span class="nc">Restrictions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">envsubst</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">examples</span><span class="o">.</span></code></pre><p>   Tip</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">To</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">document</span><span class="p">,</span><span class="w"> </span><span class="n">envsubst</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">recursive</span><span class="w"> </span><span class="n">descent</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ss">follows</span><span class="p">:</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.. | select(tag == &quot;!!str&quot;)) |= envsubst&#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   Read string environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;cat meow&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a = env(myenv)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   Read boolean environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a = env(myenv)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="no">true</span></code></pre><p>   Read numeric environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;12&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a = env(myenv)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span></code></pre><p>   Read yaml environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;{b: fish}&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a = env(myenv)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4400800923-1">{</span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">fish</span><span class="p" data-group-id="4400800923-1">}</span></code></pre><p>   Read boolean environment variable as a string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a = strenv(myenv)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span></code></pre><p>   Read numeric environment variable as a string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;12&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a = strenv(myenv)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12&quot;</span></code></pre><p>   Dynamically update a path from an environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">pathEnv</span><span class="o">=</span><span class="s">&quot;.a.b[0].name&quot;</span><span class="w">  </span><span class="n">valueEnv</span><span class="o">=</span><span class="s">&quot;moo&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;eval(strenv(pathEnv)) = strenv(valueEnv)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">moo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Dynamic key lookup with environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;cat&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[env(myenv)]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">meow</span></code></pre><p>   Replace strings with envsubst</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;cat&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenv} meows&quot; | envsubst&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">the</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">meows</span></code></pre><p>   Replace strings with envsubst, missing variables</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenvnonexisting} meows&quot; | envsubst&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">the</span><span class="w">  </span><span class="n">meows</span></code></pre><p>   Replace strings with envsubst(nu), missing variables</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="p" data-group-id="4068658630-1">(</span><span class="n">nu</span><span class="p" data-group-id="4068658630-1">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">unset</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">unset</span><span class="w"> </span><span class="p" data-group-id="4068658630-2">(</span><span class="n">missing</span><span class="p" data-group-id="4068658630-2">)</span><span class="w"> </span><span class="n">variables</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenvnonexisting} meows&quot; | envsubst(nu)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="4068658630-3">{</span><span class="n">myenvnonexisting</span><span class="p" data-group-id="4068658630-3">}</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span></code></pre><p>   Replace strings with envsubst(ne), missing variables</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="p" data-group-id="4702778446-1">(</span><span class="n">ne</span><span class="p" data-group-id="4702778446-1">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">empty</span><span class="p">,</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">validates</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">variables</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenvnonexisting} meows&quot; | envsubst(ne)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">the</span><span class="w">  </span><span class="n">meows</span></code></pre><p>   Replace strings with envsubst(ne), empty variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="p" data-group-id="9553597105-1">(</span><span class="n">ne</span><span class="p" data-group-id="9553597105-1">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">empty</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">references</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">empty</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenv} meows&quot; | envsubst(ne)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="9553597105-2">{</span><span class="n">myenv</span><span class="p" data-group-id="9553597105-2">}</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">empty</span></code></pre><p>   Replace strings with envsubst, missing variables with defaults</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenvnonexisting-dog} meows&quot; | envsubst&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">the</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="n">meows</span></code></pre><p>   Replace strings with envsubst(nu), missing variables with defaults</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Having</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">skips</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">variable</span><span class="o">.</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myenvnonexisting-dog} meows&quot; | envsubst(nu)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">the</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="n">meows</span></code></pre><p>   Replace strings with envsubst(ne), missing variables with defaults</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Fails</span><span class="p">,</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">blank</span><span class="o">.</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">myEmptyEnv</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${myEmptyEnv-dog} meows&quot; | envsubst(ne)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="9394714979-1">{</span><span class="n">myEmptyEnv</span><span class="p" data-group-id="9394714979-1">}</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">empty</span></code></pre><p>   Replace string environment variable in document</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">v</span><span class="p">:</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="1846678747-1">{</span><span class="n">myenv</span><span class="p" data-group-id="1846678747-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">myenv</span><span class="o">=</span><span class="s">&quot;cat meow&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.v |= envsubst&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">v</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   (Default) Return all envsubst errors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">once</span><span class="o">.</span><span class="w">

   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${notThere} ${alsoNotThere}&quot; | envsubst(nu)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="7282417924-1">{</span><span class="n">notThere</span><span class="p" data-group-id="7282417924-1">}</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span><span class="w">
          </span><span class="n">variable</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="7282417924-2">{</span><span class="n">alsoNotThere</span><span class="p" data-group-id="7282417924-2">}</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span></code></pre><p>   Fail fast, return the first envsubst error (and abort)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;&quot;the ${notThere} ${alsoNotThere}&quot; | envsubst(nu,ff)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="7370545954-1">{</span><span class="n">notThere</span><span class="p" data-group-id="7370545954-1">}</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span></code></pre><p>Equals / Not Equals</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="n">otherwise</span><span class="o">.</span><span class="w">

          </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">.</span><span class="n">b</span><span class="w">

   </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="ss">nodes</span><span class="p">:</span><span class="w">

          </span><span class="n">select</span><span class="p" data-group-id="7883768643-1">(</span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">.</span><span class="n">b</span><span class="p" data-group-id="7883768643-1">)</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RHS</span><span class="o">.</span></code></pre><p>   Related Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="p" data-group-id="7601504719-1">(</span><span class="o">&gt;=</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="7601504719-1">)</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="p" data-group-id="7601504719-2">(</span><span class="ow">and</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="7601504719-2">)</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">here</span></code></pre><p>   Match string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">goat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | (. == &quot;*at&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="no">false</span></code></pre><p>   Don’t match string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">goat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | (. != &quot;*at&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span><span class="w">
          </span><span class="no">false</span><span class="w">
          </span><span class="no">true</span></code></pre><p>   Match number</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | (. == 4)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="no">false</span></code></pre><p>   Don’t match number</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | (. != 4)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span><span class="w">
          </span><span class="no">false</span><span class="w">
          </span><span class="no">true</span></code></pre><p>   Match nulls</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;null == ~&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span></code></pre><p>   Non existent key doesn’t equal a value</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;select(.b != &quot;thing&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Two non existent keys are equal</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;select(.b == .c)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>Error</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">short</span><span class="o">-</span><span class="n">circuit</span><span class="w"> </span><span class="n">expressions</span><span class="o">.</span><span class="w">  </span><span class="nc">Useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">validation</span><span class="o">.</span></code></pre><p>   Validate a particular value</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;select(.a == &quot;howdy&quot;) or error(&quot;.a [&quot; + .a + &quot;] is not howdy!&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="p" data-group-id="9137788135-1">[</span><span class="n">hello</span><span class="p" data-group-id="9137788135-1">]</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">howdy!</span></code></pre><p>   Validate the environment variable is a number - invalid</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">numberOfCats</span><span class="o">=</span><span class="s">&quot;please&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;env(numberOfCats) | select(tag == &quot;!!int&quot;) or error(&quot;numberOfCats is not a number :(&quot;)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">numberOfCats</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">:</span><span class="p" data-group-id="8340614444-1">(</span></code></pre><p>   Validate the environment variable is a number - valid</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="k">with</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">convenient</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">encapsulating</span><span class="w"> </span><span class="n">validation</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bob</span><span class="w">
          </span><span class="ss">favouriteAnimal</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">numberOfCats</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;
              with(env(numberOfCats); select(tag == &quot;!!int&quot;) or error(&quot;numberOfCats is not a number :(&quot;)) |
              .numPets = env(numberOfCats)
          &#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bob</span><span class="w">
          </span><span class="ss">favouriteAnimal</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">numPets</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span></code></pre><p>Eval</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dynamically</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="o">.</span><span class="w">

   </span><span class="n">eval</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">argument</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">evaluates</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">  </span><span class="nc">Any</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="8960719331-1">(</span><span class="o">.</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="p" data-group-id="8960719331-1">)</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;gogo&quot;</span><span class="o">.</span><span class="w">

   </span><span class="ss">Tip</span><span class="p">:</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">parameterise</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">scripts</span><span class="o">.</span></code></pre><p>   Dynamically evaluate a path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">pathExp</span><span class="p">:</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p" data-group-id="0517945283-1">[</span><span class="p" data-group-id="0517945283-1">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="0517945283-2">(</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="p" data-group-id="0517945283-2">)</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;eval(.pathExp)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Dynamically update a path from an environment variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">pathEnv</span><span class="o">=</span><span class="s">&quot;.a.b[0].name&quot;</span><span class="w">  </span><span class="n">valueEnv</span><span class="o">=</span><span class="s">&quot;moo&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;eval(strenv(pathEnv)) = strenv(valueEnv)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">moo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>File Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">File</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">needing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">together</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="n">are</span><span class="w">
   </span><span class="n">loaded</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">performing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="7797767633-1">(</span><span class="n">as</span><span class="w"> </span><span class="n">opposed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">document</span><span class="p" data-group-id="7797767633-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fileIndex</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">short</span><span class="w"> </span><span class="kn">alias</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">fi</span><span class="o">.</span></code></pre><p>   Merging files</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">memory</span><span class="o">.</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="sc">&#39;select(fi == 0) * select(filename == &quot;file2.yaml&quot;)&#39;</span><span class="w"> </span><span class="n">file1</span><span class="o">.</span><span class="n">yaml</span><span class="w"> </span><span class="n">file2</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   Get filename</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;filename&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span></code></pre><p>   Get file index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;file_index&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span></code></pre><p>   Get file indices of multiple documents</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="sc">&#39;file_index&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span><span class="w">
          </span><span class="mi">1</span></code></pre><p>   Get file index alias</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;fi&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span></code></pre><p>Filter</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Filters</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="p" data-group-id="1304671768-1">(</span><span class="ow">or</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">values</span><span class="p" data-group-id="1304671768-1">)</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">given</span><span class="o">.</span><span class="w">  </span><span class="nc">Equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="1304671768-2">(</span><span class="n">select</span><span class="p" data-group-id="1304671768-3">(</span><span class="n">exp</span><span class="p" data-group-id="1304671768-3">)</span><span class="p" data-group-id="1304671768-2">)</span><span class="o">.</span></code></pre><p>   Filter array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;filter(. &lt; 3)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   Filter map values</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">c</span><span class="p">:</span><span class="w">
            </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
            </span><span class="ss">frog</span><span class="p">:</span><span class="w"> </span><span class="n">yes</span><span class="w">
          </span><span class="ss">d</span><span class="p">:</span><span class="w">
            </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">hot</span><span class="w">
            </span><span class="ss">frog</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;filter(.things == &quot;cool&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
            </span><span class="ss">frog</span><span class="p">:</span><span class="w"> </span><span class="n">yes</span></code></pre><p>Flatten</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">recursively</span><span class="w"> </span><span class="n">flattens</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span></code></pre><p>   Flatten</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Recursively</span><span class="w"> </span><span class="n">flattens</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">arrays</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;flatten&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span></code></pre><p>   Flatten with depth of one</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;flatten(1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span></code></pre><p>   Flatten empty array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="8058662562-1">[</span><span class="p" data-group-id="8058662562-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;flatten&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="8058662562-2">[</span><span class="p" data-group-id="8058662562-2">]</span></code></pre><p>   Flatten array of objects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">baz</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;flatten&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">baz</span></code></pre><p>Group By</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span></code></pre><p>   Group by field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;group_by(.foo)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span></code></pre><p>   Group by field, with nulls</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">no</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">you</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;group_by(.foo)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">no</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">you</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span></code></pre><p>Has</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="p" data-group-id="5491936553-1">(</span><span class="ow">or</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="p" data-group-id="5491936553-1">)</span><span class="p">,</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="n">otherwise</span><span class="o">.</span></code></pre><p>   Has map key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">yes</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">nope</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | has(&quot;a&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="no">false</span></code></pre><p>   Select, checking for existence of deep paths</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Simply</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">has</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w">
                </span><span class="ss">d</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(.a.b | has(&quot;c&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Has array index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="4485970589-1">[</span><span class="p" data-group-id="4485970589-1">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="4485970589-2">[</span><span class="mi">1</span><span class="p" data-group-id="4485970589-2">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="4485970589-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4485970589-3">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="4485970589-4">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">null</span><span class="p" data-group-id="4485970589-4">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="4485970589-5">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="4485970589-5">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | has(1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">false</span><span class="w">
          </span><span class="no">false</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="no">true</span></code></pre><p>Keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">indices</span><span class="o">.</span></code></pre><p>   Map keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;keys&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Array keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;keys&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Retrieve array key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[1] | key&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span></code></pre><p>   Retrieve map key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | key&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">a</span></code></pre><p>   No key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="5394128490-1">{</span><span class="p" data-group-id="5394128490-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;key&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>   Update map key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a.x | key) = &quot;meow&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">meow</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Get comment from map key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="c1"># comment on key</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.x | key | headComment&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">comment</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">key</span></code></pre><p>   Check node is a key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[... | { &quot;p&quot;: path | join(&quot;.&quot;), &quot;isKey&quot;: is_key, &quot;tag&quot;: tag }]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!map&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!str&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!map&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!str&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!seq&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="mi">0</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!str&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!str&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">p</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="w">
            </span><span class="ss">isKey</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;!!str&#39;</span></code></pre><p>Kind</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">identifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">scalar</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">seq</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">filtering</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">transforming</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">treated</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">scalar</span><span class="o">.</span></code></pre><p>   Get kind</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9294802349-1">[</span><span class="p" data-group-id="9294802349-1">]</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9294802349-2">{</span><span class="p" data-group-id="9294802349-2">}</span><span class="w">
          </span><span class="ss">h</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | kind&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">map</span><span class="w">
          </span><span class="n">scalar</span><span class="w">
          </span><span class="n">scalar</span><span class="w">
          </span><span class="n">scalar</span><span class="w">
          </span><span class="n">scalar</span><span class="w">
          </span><span class="n">seq</span><span class="w">
          </span><span class="n">map</span><span class="w">
          </span><span class="n">scalar</span></code></pre><p>   Get kind, ignores custom tags</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Unlike</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">thing</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">foo</span><span class="w"> </span><span class="p" data-group-id="0401909548-1">{</span><span class="p" data-group-id="0401909548-1">}</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">bar</span><span class="w"> </span><span class="p" data-group-id="0401909548-2">[</span><span class="p" data-group-id="0401909548-2">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | kind&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">map</span><span class="w">
          </span><span class="n">scalar</span><span class="w">
          </span><span class="n">map</span><span class="w">
          </span><span class="n">seq</span></code></pre><p>   Add comments only to scalars</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">An</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">kind</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8617772470-1">[</span><span class="p" data-group-id="8617772470-1">]</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8617772470-2">{</span><span class="p" data-group-id="8617772470-2">}</span><span class="w">
          </span><span class="ss">h</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.. | select(kind == &quot;scalar&quot;)) line_comment = &quot;this is a scalar&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="c1"># this is a scalar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w"> </span><span class="c1"># this is a scalar</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="c1"># this is a scalar</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8617772470-3">[</span><span class="p" data-group-id="8617772470-3">]</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8617772470-4">{</span><span class="p" data-group-id="8617772470-4">}</span><span class="w">
          </span><span class="ss">h</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="c1"># this is a scalar</span></code></pre><p>Length</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lengths</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span><span class="w">  </span><span class="nc">Length</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="o">.</span></code></pre><p>   String length</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">returns</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">string</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | length&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">3</span></code></pre><p>   null length</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | length&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span></code></pre><p>   Map length</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">returns</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">entries</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;length&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">2</span></code></pre><p>   Array length</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">returns</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">elements</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">8</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;length&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">4</span></code></pre><p>Line</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">node</span><span class="o">.</span><span class="w">  </span><span class="nc">Starts</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">data</span><span class="o">.</span></code></pre><p>   Returns line of value node</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b | line&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">3</span></code></pre><p>   Returns line of key node</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pipe</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b | key | line&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">2</span></code></pre><p>   First line is 1</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | line&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span></code></pre><p>   No line data is 0</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;{&quot;a&quot;: &quot;new entry&quot;} | line&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">0</span></code></pre><p>Load</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="ss">types</span><span class="p">:</span><span class="w">

   </span><span class="nc">Format</span><span class="w">         </span><span class="nc">Load</span><span class="w"> </span><span class="nc">Operator</span><span class="w">
   </span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="w">
   </span><span class="nc">Yaml</span><span class="w">           </span><span class="n">load</span><span class="w">
   </span><span class="nc">XML</span><span class="w">            </span><span class="n">load_xml</span><span class="w">
   </span><span class="nc">Properties</span><span class="w">     </span><span class="n">load_props</span><span class="w">
   </span><span class="nc">Plain</span><span class="w"> </span><span class="nc">String</span><span class="w">   </span><span class="n">load_str</span><span class="w">
   </span><span class="nc">Base64</span><span class="w">         </span><span class="n">load_base64</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">load_base64</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="n">strings</span><span class="o">.</span></code></pre><p>   Samples files for tests:
   yaml</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="o">..</span><span class="o">/</span><span class="o">..</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">thing</span><span class="o">.</span><span class="ss">yml</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span></code></pre><p>   xml</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">small</span><span class="o">.</span><span class="ss">xml</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">this</span><span class="o">&gt;</span><span class="n">is</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">xml</span><span class="o">&lt;</span><span class="o">/</span><span class="n">this</span><span class="o">&gt;</span></code></pre><p>   properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">small</span><span class="o">.</span><span class="ss">properties</span><span class="p">:</span><span class="w">

          </span><span class="n">this</span><span class="o">.</span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="n">file</span></code></pre><p>   base64</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">base64</span><span class="o">.</span><span class="ss">txt</span><span class="p">:</span><span class="w">

          </span><span class="n">bXkgc2VjcmV0IGNoaWxsaSByZWNpcGUgaXMuLi4u</span></code></pre><p>   Simple example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myFile</span><span class="p">:</span><span class="w"> </span><span class="o">..</span><span class="o">/</span><span class="o">..</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">thing</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;load(.myFile)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="o">.</span></code></pre><p>   Replace node with referenced file</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">needed</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">something</span><span class="p">:</span><span class="w">
            </span><span class="ss">file</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.something |= load(&quot;../../examples/&quot; + .file)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">something</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="o">.</span></code></pre><p>   Replace all nodes with referenced file</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Recursively</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="p" data-group-id="7396794707-1">(</span><span class="o">..</span><span class="p" data-group-id="7396794707-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ones</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="err">`</span><span class="n">file</span><span class="sc">&#39; attribute.

   Given a sample.yml file of:

          something:
            file: thing.yml
          over:
            here:
              - file: thing.yml

   then

          yq &#39;</span><span class="p" data-group-id="7396794707-2">(</span><span class="o">..</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="7396794707-3">(</span><span class="n">has</span><span class="p" data-group-id="7396794707-4">(</span><span class="s">&quot;file&quot;</span><span class="p" data-group-id="7396794707-4">)</span><span class="p" data-group-id="7396794707-3">)</span><span class="p" data-group-id="7396794707-2">)</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">load</span><span class="p" data-group-id="7396794707-5">(</span><span class="s">&quot;../../examples/&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">.</span><span class="n">file</span><span class="p" data-group-id="7396794707-5">)</span><span class="err">&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">something</span><span class="p">:</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="o">.</span><span class="w">
          </span><span class="ss">over</span><span class="p">:</span><span class="w">
            </span><span class="ss">here</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w">
                </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="o">.</span></code></pre><p>   Replace node with referenced file as string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">file</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">something</span><span class="p">:</span><span class="w">
            </span><span class="ss">file</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.something |= load_str(&quot;../../examples/&quot; + .file)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="o">.</span></code></pre><p>   Load from XML</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.more_stuff = load_xml(&quot;../../examples/small.xml&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">
          </span><span class="ss">more_stuff</span><span class="p">:</span><span class="w">
            </span><span class="ss">this</span><span class="p">:</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">xml</span></code></pre><p>   Load from Properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.more_stuff = load_props(&quot;../../examples/small.properties&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">
          </span><span class="ss">more_stuff</span><span class="p">:</span><span class="w">
            </span><span class="ss">this</span><span class="p">:</span><span class="w">
              </span><span class="ss">is</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="n">file</span></code></pre><p>   Merge from properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">convenient</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">document</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">this</span><span class="p">:</span><span class="w">
            </span><span class="ss">is</span><span class="p">:</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">yaml</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">ay</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. *= load_props(&quot;../../examples/small.properties&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">this</span><span class="p">:</span><span class="w">
            </span><span class="ss">is</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="n">file</span><span class="w">
            </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">ay</span></code></pre><p>   Load from base64 encoded file</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.more_stuff = load_base64(&quot;../../examples/base64.txt&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">
          </span><span class="ss">more_stuff</span><span class="p">:</span><span class="w"> </span><span class="n">my</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="n">chilli</span><span class="w"> </span><span class="n">recipe</span><span class="w"> </span><span class="n">is</span><span class="n">...</span><span class="o">.</span></code></pre><p>Map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Maps</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="n">map_values</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="o">.</span></code></pre><p>   Map array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;map(. + 1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Map object values</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;map_values(. + 1)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>Max</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Computes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">incoming</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="n">values</span><span class="o">.</span></code></pre><p>   Maximum int</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">99</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">16</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">66</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;max&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">99</span></code></pre><p>   Maximum string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">foo</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">bar</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">baz</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;max&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foo</span></code></pre><p>   Maximum of empty</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="5542264652-1">[</span><span class="p" data-group-id="5542264652-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;max&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>Min</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Computes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">minimum</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">incoming</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="n">values</span><span class="o">.</span></code></pre><p>   Minimum int</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">99</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">16</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">66</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;min&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">6</span></code></pre><p>   Minimum string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">foo</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">bar</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">baz</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;min&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bar</span></code></pre><p>   Minimum of empty</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="5048625719-1">[</span><span class="p" data-group-id="5048625719-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;min&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>Modulo</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Arithmetic</span><span class="w"> </span><span class="n">modulo</span><span class="w"> </span><span class="n">operator</span><span class="p">,</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remainder</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">dividing</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">numbers</span><span class="o">.</span></code></pre><p>   Number modulo - int</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">ints</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">ints</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a % .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   Number modulo - float</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">floats</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">floats</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a % .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span></code></pre><p>   Number modulo - int by zero</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a % .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">modulo</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="mi">0</span></code></pre><p>   Number modulo - float by zero</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nc">NaN</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a % .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w"> </span><span class="nc">NaN</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span></code></pre><p>Multiply (Merge)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">jq</span><span class="p">,</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">operands</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">multiply</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k" data-group-id="2663066846-1">do</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">things</span><span class="o">.</span><span class="w">  </span><span class="nc">Currently</span><span class="w"> </span><span class="n">numbers</span><span class="p">,</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">supported</span><span class="o">.</span></code></pre><p>   Objects and arrays - merging</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Objects</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">keys</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">merged</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">here</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="p" data-group-id="4236965872-1">(</span><span class="ow">not</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="p" data-group-id="4236965872-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">clearer</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">below</span><span class="o">.</span></code></pre><p>   Merge Flags</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">flags</span><span class="o">.</span><span class="w">  </span><span class="nc">Multiple</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">together</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="o">+</span><span class="sc">? </span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">below</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">arrays</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">arrays</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="sc">? </span><span class="n">only</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">fields</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">fields</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">clobber</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">only</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">here</span><span class="o">.</span></code></pre><p>   Merge two files together</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">file2</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">file1</span><span class="o">.</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. *= load(&quot;file2.yml&quot;)&#39;</span><span class="w"> </span><span class="n">file1</span><span class="o">.</span><span class="n">yml</span></code></pre><p>   Merging all files</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">memory</span><span class="o">.</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="sc">&#39;. as $item ireduce ({}; . * $item )&#39;</span><span class="w"> </span><span class="o">*</span><span class="o">.</span><span class="n">yml</span></code></pre><p>Merging complex arrays together by a key field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">By</span><span class="w">  </span><span class="n">default</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">naive</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">merges</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">appending</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">together</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">array</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="p" data-group-id="5563199826-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">certain</span><span class="w"> </span><span class="n">key</span><span class="p" data-group-id="5563199826-1">)</span><span class="w"> </span><span class="n">please</span><span class="w">  </span><span class="n">see</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">example</span><span class="w">  </span><span class="n">https</span><span class="ss">://</span><span class="n">mikefarah</span><span class="o">.</span><span class="n">gitbook</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">yq</span><span class="o">/</span><span class="n">operators</span><span class="o">/</span><span class="n">multiply</span><span class="o">-</span><span class="n">merge</span><span class="c1">#merge-arrays-of-ob‐</span><span class="w">
   </span><span class="n">jects</span><span class="o">-</span><span class="n">together</span><span class="o">-</span><span class="n">matching</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="n">key</span><span class="w"> </span><span class="n">here</span></code></pre><p>   Multiply integers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *= .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Multiply string node X int</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b * 4&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bananabananabananabanana</span></code></pre><p>   Multiply int X string node</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;4 * .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bananabananabananabanana</span></code></pre><p>   Multiply string X int node</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">n</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;&quot;banana&quot; * .n&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bananabananabananabanana</span></code></pre><p>   Multiply int node X string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">n</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.n * &quot;banana&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bananabananabananabanana</span></code></pre><p>   Merge objects together, returning merged result only</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w">
            </span><span class="ss">fieldA</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">field</span><span class="p">:</span><span class="w">
              </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">wizz</span><span class="w">
            </span><span class="ss">fieldB</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a * .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">field</span><span class="p">:</span><span class="w">
            </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">wizz</span><span class="w">
          </span><span class="ss">fieldA</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">fieldB</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Merge objects together, returning parent object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w">
            </span><span class="ss">fieldA</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">field</span><span class="p">:</span><span class="w">
              </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">wizz</span><span class="w">
            </span><span class="ss">fieldB</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. * {&quot;a&quot;:.b}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">field</span><span class="p">:</span><span class="w">
              </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">wizz</span><span class="w">
            </span><span class="ss">fieldA</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">fieldB</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">field</span><span class="p">:</span><span class="w">
              </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">wizz</span><span class="w">
            </span><span class="ss">fieldB</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Merge keeps style of LHS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5467428462-1">{</span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">great</span><span class="p" data-group-id="5467428462-1">}</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">also</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;me&quot;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. * {&quot;a&quot;:.b}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5467428462-2">{</span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">great</span><span class="p">,</span><span class="w"> </span><span class="ss">also</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;me&quot;</span><span class="p" data-group-id="5467428462-2">}</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">also</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;me&quot;</span></code></pre><p>   Merge arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. * {&quot;a&quot;:.b}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span></code></pre><p>   Merge, only existing fields</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">one</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">missing</span><span class="p">:</span><span class="w"> </span><span class="n">two</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">two</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *? .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">two</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Merge, only new fields</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">one</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">missing</span><span class="p">:</span><span class="w"> </span><span class="n">two</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">two</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *n .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">one</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">missing</span><span class="p">:</span><span class="w"> </span><span class="n">two</span></code></pre><p>   Merge, appending arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">animal</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">coconut</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">animal</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *+ .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">array</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">animal</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">animal</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span></code></pre><p>   Merge, only existing fields, appending arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="ss">another</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *?+ .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">thing</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Merge, deeply merging arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Merging</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">key</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">case</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k" data-group-id="4494094313-1">do</span><span class="w"> </span><span class="n">nothing</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">fred</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">fred</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *d .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">fred</span><span class="w">
            </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
            </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span></code></pre><p>   Merge arrays of objects together, matching on a key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fairly</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">providing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">seen</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">below</span><span class="o">.</span><span class="w">

   </span><span class="nc">It</span><span class="w"> </span><span class="n">merges</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">keys</span><span class="o">.</span><span class="w">

   </span><span class="ss">Explanation</span><span class="p">:</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">approach</span><span class="p">,</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">level</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="p" data-group-id="8860857408-1">(</span><span class="n">keyed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">key</span><span class="p" data-group-id="8860857408-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">

   </span><span class="nc">First</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">expression</span><span class="w">  </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">keyed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">idPath</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">by</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="err">`</span><span class="p" data-group-id="8860857408-2">(</span><span class="p" data-group-id="8860857408-3">{</span><span class="p" data-group-id="8860857408-3">}</span><span class="p">;</span><span class="w"> </span><span class="o">.</span><span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="w"> </span><span class="p" data-group-id="8860857408-2">)</span><span class="sc">&#39;, so array ele‐
   ments with the matching key will be merged together.

   Next, we convert the map back to an array, using reduce again, concatenating all the map values together.

   Finally, we set the result of the merged array back into the first doc.

   Thanks Kev from stackoverflow

   Given a sample.yml file of:

          myArray:
            - a: apple
              b: appleB
            - a: kiwi
              b: kiwiB
            - a: banana
              b: bananaB
          something: else

   And another sample another.yml file of:

          newArray:
            - a: banana
              c: bananaC
            - a: apple
              b: appleB2
            - a: dingo
              c: dingoC

   then

          idPath=&quot;.a&quot;  originalPath=&quot;.myArray&quot;  otherPath=&quot;.newArray&quot; yq eval-all &#39;</span><span class="w">
          </span><span class="p" data-group-id="8860857408-4">(</span><span class="w">
            </span><span class="p" data-group-id="8860857408-5">(</span><span class="p" data-group-id="8860857408-6">(</span><span class="w"> </span><span class="p" data-group-id="8860857408-7">(</span><span class="n">eval</span><span class="p" data-group-id="8860857408-8">(</span><span class="n">strenv</span><span class="p" data-group-id="8860857408-9">(</span><span class="n">originalPath</span><span class="p" data-group-id="8860857408-9">)</span><span class="p" data-group-id="8860857408-8">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="p" data-group-id="8860857408-10">(</span><span class="n">strenv</span><span class="p" data-group-id="8860857408-11">(</span><span class="n">otherPath</span><span class="p" data-group-id="8860857408-11">)</span><span class="p" data-group-id="8860857408-10">)</span><span class="p" data-group-id="8860857408-7">)</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="8860857408-12">[</span><span class="p" data-group-id="8860857408-12">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="8860857408-13">{</span><span class="p" data-group-id="8860857408-14">(</span><span class="n">eval</span><span class="p" data-group-id="8860857408-15">(</span><span class="n">strenv</span><span class="p" data-group-id="8860857408-16">(</span><span class="n">idPath</span><span class="p" data-group-id="8860857408-16">)</span><span class="p" data-group-id="8860857408-15">)</span><span class="p" data-group-id="8860857408-14">)</span><span class="p">:</span><span class="w">  </span><span class="o">.</span><span class="p" data-group-id="8860857408-13">}</span><span class="p" data-group-id="8860857408-6">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="w"> </span><span class="n">ireduce</span><span class="w"> </span><span class="p" data-group-id="8860857408-17">(</span><span class="p" data-group-id="8860857408-18">{</span><span class="p" data-group-id="8860857408-18">}</span><span class="p">;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="w"> </span><span class="p" data-group-id="8860857408-17">)</span><span class="p" data-group-id="8860857408-5">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="n">uniqueMap</span><span class="w">
            </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="8860857408-19">(</span><span class="w"> </span><span class="err">$</span><span class="n">uniqueMap</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">to_entries</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="8860857408-20">[</span><span class="p" data-group-id="8860857408-20">]</span><span class="p" data-group-id="8860857408-19">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="w"> </span><span class="n">ireduce</span><span class="p" data-group-id="8860857408-21">(</span><span class="p" data-group-id="8860857408-22">[</span><span class="p" data-group-id="8860857408-22">]</span><span class="p">;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="o">.</span><span class="n">value</span><span class="p" data-group-id="8860857408-21">)</span><span class="w">
          </span><span class="p" data-group-id="8860857408-4">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="n">mergedArray</span><span class="w">
          </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="8860857408-23">(</span><span class="n">fi</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="8860857408-23">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="8860857408-24">(</span><span class="n">eval</span><span class="p" data-group-id="8860857408-25">(</span><span class="n">strenv</span><span class="p" data-group-id="8860857408-26">(</span><span class="n">originalPath</span><span class="p" data-group-id="8860857408-26">)</span><span class="p" data-group-id="8860857408-25">)</span><span class="p" data-group-id="8860857408-24">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="n">mergedArray</span><span class="w">
          </span><span class="err">&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">appleB2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">kiwi</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">kiwiB</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bananaB</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bananaC</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">dingo</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">dingoC</span><span class="w">
          </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="k">else</span></code></pre><p>   Merge to prefix an element</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. * {&quot;a&quot;: {&quot;c&quot;: .a}}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Merge with simple aliases</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w">
            </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">thongs</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.c * .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">thongs</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span></code></pre><p>   Merge copies anchor names</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w">
            </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">thongs</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.c * .a&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="n">thongs</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Merge with merge anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2851153669-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2851153669-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar * .foobarList&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2851153669-3">&lt;&lt;</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
          </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span></code></pre><p>   Custom types: that are really numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encountered</span><span class="p">,</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a * .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="mi">6</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="mi">3</span></code></pre><p>   Custom types: that are really maps</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Custom</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">maintained</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a * .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span></code></pre><p>   Custom types: clobber tags</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">clobber</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a *=c .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">woof</span></code></pre><p>   Merging a null with a map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;null * {&quot;some&quot;: &quot;thing&quot;}&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">some</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span></code></pre><p>   Merging a map with null</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;{&quot;some&quot;: &quot;thing&quot;} * null&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">some</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span></code></pre><p>   Merging a null with an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;null * [&quot;some&quot;]&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">some</span></code></pre><p>   Merging an array with null</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;[&quot;some&quot;] * null&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">some</span></code></pre><p>Omit</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Works</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">pick</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="o">/</span><span class="n">indices</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">don</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">included</span><span class="o">.</span></code></pre><p>   Omit keys from map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">non</span><span class="w"> </span><span class="n">existent</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">skipped</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myMap</span><span class="p">:</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">bark</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">hamster</span><span class="w">
            </span><span class="ss">hamster</span><span class="p">:</span><span class="w"> </span><span class="n">squeak</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.myMap |= omit([&quot;hamster&quot;, &quot;cat&quot;, &quot;goat&quot;])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myMap</span><span class="p">:</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">bark</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">hamster</span></code></pre><p>   Omit indices from array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">non</span><span class="w"> </span><span class="n">existent</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">skipped</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">leopard</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">lion</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;omit([2, 0, 734, -5])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">leopard</span></code></pre><p>Parent</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Parent</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span></code></pre><p>   Simple example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">nested</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.nested | parent&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">nested</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Parent of nested matches</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">sam</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | select(. == &quot;banana&quot;) | parent&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">sam</span></code></pre><p>   Get parent attribute</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">fruit</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">sam</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | select(. == &quot;banana&quot;) | parent.name&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">sam</span></code></pre><p>   N-th parent</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">optionally</span><span class="w"> </span><span class="n">supply</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">levels</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b.c | parent(2)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   N-th parent - another level</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b.c | parent(3)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   No parent</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="5052515017-1">{</span><span class="p" data-group-id="5052515017-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;parent&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>Path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">traversal</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">traversed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">lead</span><span class="w"> </span><span class="n">to</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">matching</span><span class="w">
   </span><span class="n">node</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="o">/</span><span class="n">index</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">piping</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="5359121583-1">[</span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="5359121583-1">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="o">.</span><span class="w">

   </span><span class="nc">Use</span><span class="w"> </span><span class="n">setpath</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">similarly</span><span class="w"> </span><span class="n">delpaths</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span></code></pre><p>   Map path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b | path&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">b</span></code></pre><p>   Get map key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b | path | .[-1]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">b</span></code></pre><p>   Array path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.[] | select(. == &quot;dog&quot;) | path&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Get array index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.[] | select(. == &quot;dog&quot;) | path | .[-1]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span></code></pre><p>   Print path and value</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a[] | select(. == &quot;*og&quot;) | [{&quot;path&quot;:path, &quot;value&quot;:.}]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">path</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">path</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Set path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;setpath([&quot;a&quot;, &quot;b&quot;]; &quot;things&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">things</span></code></pre><p>   Set on empty document</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;setpath([&quot;a&quot;, &quot;b&quot;]; &quot;things&quot;)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">things</span></code></pre><p>   Set path to prune deep paths</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Like</span><span class="w"> </span><span class="n">pick</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recursive</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">ireduce</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selected</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">object</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">parentA</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
          </span><span class="ss">parentB</span><span class="p">:</span><span class="w">
            </span><span class="ss">child1</span><span class="p">:</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">am</span><span class="w"> </span><span class="n">child1</span><span class="w">
            </span><span class="ss">child2</span><span class="p">:</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">am</span><span class="w"> </span><span class="n">child2</span><span class="w">
          </span><span class="ss">parentC</span><span class="p">:</span><span class="w">
            </span><span class="ss">child1</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">child1</span><span class="w">
            </span><span class="ss">child2</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">child2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.parentB.child2, .parentC.child1) as $i
            ireduce({}; setpath($i | path; $i))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">parentB</span><span class="p">:</span><span class="w">
            </span><span class="ss">child2</span><span class="p">:</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">am</span><span class="w"> </span><span class="n">child2</span><span class="w">
          </span><span class="ss">parentC</span><span class="p">:</span><span class="w">
            </span><span class="ss">child1</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">child1</span></code></pre><p>   Set array path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;setpath([&quot;a&quot;, 0]; &quot;things&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">things</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Set array path empty</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;setpath([&quot;a&quot;, 0]; &quot;things&quot;)&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">things</span></code></pre><p>   Delete path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Notice</span><span class="w"> </span><span class="n">delpaths</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">paths</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="ss">d</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;delpaths([[&quot;a&quot;, &quot;c&quot;], [&quot;a&quot;, &quot;d&quot;]])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Delete array path</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;delpaths([[&quot;a&quot;, 0]])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Delete - wrong parameter</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">delpaths</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">array</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;delpaths([&quot;a&quot;, 0])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="ss">DELPATHS</span><span class="p">:</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p" data-group-id="6279673455-1">[</span><span class="mi">0</span><span class="p" data-group-id="6279673455-1">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sequence</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">delpaths</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">arrays</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="p" data-group-id="6279673455-2">[</span><span class="p" data-group-id="6279673455-3">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p" data-group-id="6279673455-3">]</span><span class="p" data-group-id="6279673455-2">]</span></code></pre><p>Pick</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Filter</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">keys</span><span class="o">.</span><span class="w">  </span><span class="nc">Map</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pick</span><span class="w"> </span><span class="n">list</span><span class="o">.</span><span class="w">

   </span><span class="nc">Similarly</span><span class="p">,</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">indices</span><span class="o">.</span></code></pre><p>   Pick keys from map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pick</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">non</span><span class="w"> </span><span class="n">existent</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">skipped</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myMap</span><span class="p">:</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">bark</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">hamster</span><span class="w">
            </span><span class="ss">hamster</span><span class="p">:</span><span class="w"> </span><span class="n">squeak</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.myMap |= pick([&quot;hamster&quot;, &quot;cat&quot;, &quot;goat&quot;])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myMap</span><span class="p">:</span><span class="w">
            </span><span class="ss">hamster</span><span class="p">:</span><span class="w"> </span><span class="n">squeak</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   Pick keys from map, included all the keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">We</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">picked</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">plus</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">unique</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myMap</span><span class="p">:</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">bark</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">hamster</span><span class="w">
            </span><span class="ss">hamster</span><span class="p">:</span><span class="w"> </span><span class="n">squeak</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.myMap |= pick( ([&quot;thing&quot;] + keys) | unique)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myMap</span><span class="p">:</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">hamster</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">dog</span><span class="p">:</span><span class="w"> </span><span class="n">bark</span><span class="w">
            </span><span class="ss">hamster</span><span class="p">:</span><span class="w"> </span><span class="n">squeak</span></code></pre><p>   Pick indices from array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pick</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">non</span><span class="w"> </span><span class="n">existent</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">skipped</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">leopard</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">lion</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;pick([2, 0, 734, -5])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">lion</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span></code></pre><p>Pipe</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Pipe</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="w">  </span><span class="nc">Like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span></code></pre><p>   Simple Pipe</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a | .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span></code></pre><p>   Multiple updates</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cow</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">sheep</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">same</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = &quot;cat&quot; | .b = &quot;dog&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">same</span></code></pre><p>Pivot</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Emulates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">PIVOT</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">popular</span><span class="w"> </span><span class="nc">RDBMS</span><span class="w"> </span><span class="n">systems</span><span class="o">.</span></code></pre><p>   Pivot a sequence of sequences</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bar</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">baz</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sis</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">boom</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bah</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;pivot&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">sis</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">bar</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">boom</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">baz</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bah</span></code></pre><p>   Pivot sequence of heterogeneous sequences</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Missing</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="err">“</span><span class="n">padded</span><span class="err">”</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">null</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bar</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">baz</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sis</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">boom</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bah</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">blah</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;pivot&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">sis</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">bar</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">boom</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">baz</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bah</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">blah</span></code></pre><p>   Pivot sequence of maps</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="ss">baz</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="n">y</span><span class="w">
            </span><span class="ss">baz</span><span class="p">:</span><span class="w"> </span><span class="n">z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;pivot&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="w">
          </span><span class="ss">baz</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">z</span></code></pre><p>   Pivot sequence of heterogeneous maps</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Missing</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="err">“</span><span class="n">padded</span><span class="err">”</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">null</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="ss">baz</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w">
            </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="n">y</span><span class="w">
            </span><span class="ss">baz</span><span class="p">:</span><span class="w"> </span><span class="n">z</span><span class="w">
            </span><span class="ss">what</span><span class="p">:</span><span class="w"> </span><span class="n">ever</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;pivot&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="w">
          </span><span class="ss">baz</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">z</span><span class="w">
          </span><span class="ss">what</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">ever</span></code></pre><p>Recursive Descent (Glob)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w">  </span><span class="n">operator</span><span class="w">  </span><span class="n">recursively</span><span class="w">  </span><span class="n">matches</span><span class="w">  </span><span class="p" data-group-id="2432343424-1">(</span><span class="ow">or</span><span class="w">  </span><span class="n">globs</span><span class="p" data-group-id="2432343424-1">)</span><span class="w">  </span><span class="n">all</span><span class="w"> </span><span class="n">children</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">itself</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">recursively</span><span class="w">
   </span><span class="n">against</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">matches</span><span class="o">.</span></code></pre><p>   match values form ..</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">equivalent</span><span class="p">,</span><span class="w"> </span><span class="n">recursively</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="o">/</span><span class="n">manipulate</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">values</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">excluding</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="ss">keys</span><span class="p">:</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style= &quot;flow&quot;&#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   match values and map keys form ...</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">includes</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">particularly</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">YAML</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">unlike</span><span class="w"> </span><span class="nc">JSON</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">styling</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">aliases</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">doc</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="ss">keys</span><span class="p">:</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;... style= &quot;flow&quot;&#39;</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span></code></pre><p>   Recurse map (values only)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;..&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="n">frog</span></code></pre><p>   Recursively find nodes with keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">wrapped</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p" data-group-id="1984028904-1">[</span><span class="p" data-group-id="1984028904-1">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">returned</span><span class="o">.</span><span class="w">  </span><span class="nc">You</span><span class="w"> </span><span class="k" data-group-id="1984028904-2">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">wrap</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p" data-group-id="1984028904-3">[</span><span class="p" data-group-id="1984028904-3">]</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">blog</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[.. | select(has(&quot;name&quot;))]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">blog</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">blog</span><span class="w">
            </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span></code></pre><p>   Recursively find nodes with values</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">nameA</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w">
              </span><span class="ss">nameB</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | select(. == &quot;frog&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">frog</span><span class="w">
          </span><span class="n">frog</span></code></pre><p>   Recurse map (values and keys)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">appears</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;...&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="n">a</span><span class="w">
          </span><span class="n">frog</span></code></pre><p>   Aliases are not traversed</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[..]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
              </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span></code></pre><p>   Merge docs are not traversed</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2228942779-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2228942779-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar | [..]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2228942779-3">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">foobar_thing</span></code></pre><p>Reduce</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Reduce</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">powerful</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">form</span><span class="o">.</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">exp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ireduce</span><span class="w"> </span><span class="p" data-group-id="6384882744-1">(</span><span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">block</span><span class="o">&gt;</span><span class="p" data-group-id="6384882744-1">)</span><span class="w">

   </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">

          </span><span class="o">.</span><span class="p" data-group-id="6384882744-2">[</span><span class="p" data-group-id="6384882744-2">]</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="w"> </span><span class="n">ireduce</span><span class="w"> </span><span class="p" data-group-id="6384882744-3">(</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">$</span><span class="n">item</span><span class="p" data-group-id="6384882744-3">)</span><span class="w">

   </span><span class="nc">On</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LHS</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">configuring</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="o">&lt;</span><span class="n">exp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="err">$</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">splatted</span><span class="w">  </span><span class="n">into</span><span class="w">  </span><span class="n">its</span><span class="w">
   </span><span class="n">individual</span><span class="w"> </span><span class="n">elements</span><span class="o">.</span><span class="w">

   </span><span class="nc">On</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="nc">RHS</span><span class="w">  </span><span class="n">there</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">accumulator</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">&lt;</span><span class="n">block</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">accumulator</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">collection</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">within</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">evaluate</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">accumulator</span><span class="o">.</span></code></pre><p>   yq vs jq syntax</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Reduce</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">little</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="p" data-group-id="6001206831-1">(</span><span class="n">currently</span><span class="p" data-group-id="6001206831-1">)</span><span class="w"> </span><span class="n">isn</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">sophisticated</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">infix</span><span class="w"> </span><span class="n">notation</span><span class="w"> </span><span class="p" data-group-id="6001206831-2">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">mid</span><span class="err">‐</span><span class="w">
   </span><span class="n">dle</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">parameters</span><span class="p" data-group-id="6001206831-2">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mix</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">infix</span><span class="w"> </span><span class="n">notation</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="n">notation</span><span class="w"> </span><span class="p" data-group-id="6001206831-3">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">writing</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="6001206831-3">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">end</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">ireduce</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">backwards</span><span class="w"> </span><span class="n">compatibility</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">ever</span><span class="w"> </span><span class="n">added</span><span class="o">.</span></code></pre><p>   Sum numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] as $item ireduce (0; . + $item)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">20</span></code></pre><p>   Merge all yaml files together</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="n">eval</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="sc">&#39;. as $item ireduce ({}; . * $item )&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">another</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Convert an array to an object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Cathy</span><span class="w">
            </span><span class="ss">has</span><span class="p">:</span><span class="w"> </span><span class="n">apples</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bob</span><span class="w">
            </span><span class="ss">has</span><span class="p">:</span><span class="w"> </span><span class="n">bananas</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] as $item ireduce ({}; .[$item | .name] = ($item | .has) )&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Cathy</span><span class="p">:</span><span class="w"> </span><span class="n">apples</span><span class="w">
          </span><span class="ss">Bob</span><span class="p">:</span><span class="w"> </span><span class="n">bananas</span></code></pre><p>Reverse</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Reverses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span></code></pre><p>   Reverse</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;reverse&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Sort descending by string field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">descending</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(.a) | reverse&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span></code></pre><p>Select</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Select</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span></code></pre><p>   Related Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">equals</span><span class="w"> </span><span class="p" data-group-id="6545037644-1">(</span><span class="o">==</span><span class="p">,</span><span class="w"> </span><span class="o">!=</span><span class="p" data-group-id="6545037644-1">)</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="p" data-group-id="6545037644-2">(</span><span class="o">&gt;=</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="6545037644-2">)</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">here</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="p" data-group-id="6545037644-3">(</span><span class="ow">and</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="6545037644-3">)</span><span class="w"> </span><span class="n">here</span></code></pre><p>   Select elements from array using wildcard prefix</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">goat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(. == &quot;*at&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="w">
          </span><span class="n">goat</span></code></pre><p>   Select elements from array using wildcard suffix</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">go</span><span class="o">-</span><span class="n">kart</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">goat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(. == &quot;go*&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">go</span><span class="o">-</span><span class="n">kart</span><span class="w">
          </span><span class="n">goat</span></code></pre><p>   Select elements from array using wildcard prefix and suffix</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">ago</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">go</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">going</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(. == &quot;*go*&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">ago</span><span class="w">
          </span><span class="n">go</span><span class="w">
          </span><span class="n">going</span></code></pre><p>   Select elements from array with regular expression</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">See</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">docs</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">this_0</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">not_this</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">nor_0_this</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">thisTo_4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(test(&quot;[a-zA-Z]+_[0-9]$&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">this_0</span><span class="w">
          </span><span class="n">thisTo_4</span></code></pre><p>   Select items from a map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">goat</span><span class="w">
          </span><span class="ss">horse</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(. == &quot;cat&quot; or test(&quot;og$&quot;))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="w">
          </span><span class="n">dog</span></code></pre><p>   Use select and with_entries to filter map keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
          </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">game</span><span class="p">:</span><span class="w"> </span><span class="n">poker</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_entries(select(.key | test(&quot;ame$&quot;)))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bob</span><span class="w">
          </span><span class="ss">game</span><span class="p">:</span><span class="w"> </span><span class="n">poker</span></code></pre><p>   Select multiple items in a map and update</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="n">around</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="nc">LHS</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">goat</span><span class="w">
            </span><span class="ss">horse</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.a.[] | select(. == &quot;cat&quot; or . == &quot;goat&quot;)) |= &quot;rabbit&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="n">rabbit</span><span class="w">
            </span><span class="ss">bob</span><span class="p">:</span><span class="w"> </span><span class="n">rabbit</span><span class="w">
            </span><span class="ss">horse</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>Shuffle</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Shuffles</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">cryptographically</span><span class="w"> </span><span class="n">secure</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">randomise</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">order</span><span class="o">.</span></code></pre><p>   Shuffle array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;shuffle&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span></code></pre><p>   Shuffle array in place</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.cool |= shuffle&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span></code></pre><p>Slice/Splice Array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w">  </span><span class="n">slice</span><span class="w">  </span><span class="n">array</span><span class="w">  </span><span class="n">operator</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subarray</span><span class="o">.</span><span class="w">  </span><span class="nc">Like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">equivalent</span><span class="p">,</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="7178178578-1">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p" data-group-id="7178178578-1">]</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">inclusive</span><span class="p">,</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">index</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">exclusive</span><span class="o">.</span><span class="w">  </span><span class="nc">Negative</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="n">backwards</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">respectively</span><span class="o">.</span></code></pre><p>   Slicing arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[1:3]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Slicing arrays - without the first number</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Starts</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[:2]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Slicing arrays - without the second number</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Finishes</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[2:]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span></code></pre><p>   Slicing arrays - use negative numbers to count backwards from the end</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[1:-1]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Inserting into the middle of an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">using</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">index</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.[] | select(. == &quot;dog&quot;) | key + 1) as $pos | .[0:($pos)] + [&quot;rabbit&quot;] + .[$pos:]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">rabbit</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cow</span></code></pre><p>Sort Keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="nc">Sort</span><span class="w"> </span><span class="nc">Keys</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">sorts</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="p" data-group-id="8565951824-1">(</span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="8565951824-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k" data-group-id="8565951824-2">do</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">scalars</span><span class="w"> </span><span class="p" data-group-id="8565951824-3">(</span><span class="n">so</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">easily</span><span class="w"> </span><span class="n">recursively</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w">  </span><span class="n">all</span><span class="w">
   </span><span class="n">maps</span><span class="p" data-group-id="8565951824-3">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Sort</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">particularly</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">diffing</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="ss">documents</span><span class="p">:</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="nc">P</span><span class="w"> </span><span class="sc">&#39;sort_keys(..)&#39;</span><span class="w"> </span><span class="n">file1</span><span class="o">.</span><span class="n">yml</span><span class="w">
          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="nc">P</span><span class="w"> </span><span class="sc">&#39;sort_keys(..)&#39;</span><span class="w"> </span><span class="n">file2</span><span class="o">.</span><span class="n">yml</span><span class="w">
          </span><span class="n">diff</span><span class="w"> </span><span class="n">file1</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file2</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">sorting</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">advanced</span><span class="w"> </span><span class="n">sorting</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">sort_by</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">sort_by</span><span class="p" data-group-id="8565951824-4">(</span><span class="n">key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">downcase</span><span class="p" data-group-id="8565951824-4">)</span><span class="o">.</span></code></pre><p>   Sort keys of map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">blah</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_keys(.)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">blah</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bing</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Sort keys recursively</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">unsorted</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">sorted</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">bParent</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">aParent</span><span class="p">:</span><span class="w">
            </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="n">donkey</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">yum</span><span class="w">
                </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">delish</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">ew</span><span class="w">
                </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_keys(..)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">aParent</span><span class="p">:</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">delish</span><span class="w">
                </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">yum</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
                </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">ew</span><span class="w">
            </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="n">donkey</span><span class="w">
          </span><span class="ss">bParent</span><span class="p">:</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>Sort</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Sorts</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">sort_by</span><span class="p" data-group-id="1843341992-1">(</span><span class="n">exp</span><span class="p" data-group-id="1843341992-1">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="p" data-group-id="1843341992-2">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">subfield</span><span class="p" data-group-id="1843341992-2">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">descending</span><span class="w"> </span><span class="n">order</span><span class="p">,</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">sorting</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">stage</span><span class="p">,</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">sorts</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="n">fields</span><span class="o">.</span></code></pre><p>   Sort by string field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(.a)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Sort by multiple fields</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(.a, .b)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Sort descending by string field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">descending</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(.a) | reverse&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span></code></pre><p>   Sort array in place</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.cool |= sort_by(.a)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Sort array of objects by key</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">sort_by</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">expressions</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">paths</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.cool |= sort_by(keys | .[0])&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cool</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span></code></pre><p>   Sort a map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Sorting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">values</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
          </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">c</span></code></pre><p>   Sort a map by keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">sort_by</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">function</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">Y</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
          </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(key | downcase)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">
          </span><span class="ss">Y</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
          </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="n">a</span></code></pre><p>   Sort is stable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">unchanged</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">sorting</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(.a)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Sort by numeric field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort_by(.a)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span></code></pre><p>   Sort by custom date field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="o">-</span><span class="nc">Jun</span><span class="o">-</span><span class="mi">2011</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">2010</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="o">-</span><span class="nc">Aug</span><span class="o">-</span><span class="mi">2011</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_dtf(&quot;02-Jan-2006&quot;; sort_by(.a))&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">2010</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="o">-</span><span class="nc">Jun</span><span class="o">-</span><span class="mi">2011</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="o">-</span><span class="nc">Aug</span><span class="o">-</span><span class="mi">2011</span></code></pre><p>   Sort, nulls come first</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">8</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">false</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;sort&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">false</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">6</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">8</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span></code></pre><p>Split into Documents</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">splits</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">documents</span></code></pre><p>   Split empty</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;split_doc&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>   Split array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | split_doc&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>String Operators
   RegEx</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="nc">Golang</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">native</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hood</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">docs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">syntax</span><span class="o">.</span><span class="w">

   </span><span class="nc">Case</span><span class="w"> </span><span class="n">insensitive</span><span class="w"> </span><span class="ss">tip</span><span class="p">:</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="9233358342-1">(</span><span class="sc">?i</span><span class="p" data-group-id="9233358342-1">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">test</span><span class="p" data-group-id="9233358342-2">(</span><span class="s">&quot;(?i)cats&quot;</span><span class="p" data-group-id="9233358342-2">)</span><span class="o">.</span></code></pre><p>   match(regEx)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">substring</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">regEx</span><span class="o">.</span></code></pre><p>   capture(regEx)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Capture</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="nc">RegEx</span><span class="w"> </span><span class="n">capture</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">map</span><span class="o">.</span><span class="w">  </span><span class="nc">Can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">convenient</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">doing</span><span class="o">.</span></code></pre><p>   test(regEx)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Returns</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RegEx</span><span class="p">,</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="n">otherwise</span><span class="o">.</span></code></pre><p>   sub(regEx, replacement)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Substitutes</span><span class="w">  </span><span class="n">matched</span><span class="w">  </span><span class="n">substrings</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">regEx</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">substrings</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">string</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="k">with</span><span class="o">.</span><span class="w">
   </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">capture</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="nc">RegEx</span><span class="o">.</span></code></pre><p>   String blocks, bash and newlines</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Bash</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">notorious</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">chomping</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">precious</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">newline</span><span class="w"> </span><span class="n">characters</span><span class="p">,</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">tricky</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">newlines</span><span class="w"> </span><span class="n">properly</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">particular</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="3642908013-1">(</span><span class="w"> </span><span class="n">exp</span><span class="w"> </span><span class="p" data-group-id="3642908013-1">)</span><span class="w"> </span><span class="n">will</span><span class="w">  </span><span class="n">trim</span><span class="w">  </span><span class="n">trailing</span><span class="w">  </span><span class="n">new</span><span class="err">‐</span><span class="w">
   </span><span class="n">lines</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="ss">yaml</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="n">cat</span><span class="w">

   </span><span class="nc">Using</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="3642908013-2">(</span><span class="w"> </span><span class="n">exp</span><span class="w"> </span><span class="p" data-group-id="3642908013-2">)</span><span class="w"> </span><span class="n">wont</span><span class="w"> </span><span class="n">work</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">trim</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">newline</span><span class="o">.</span><span class="w">

          </span><span class="n">m</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="3642908013-3">(</span><span class="n">echo</span><span class="w"> </span><span class="s">&quot;cat</span><span class="se">\n</span><span class="s">&quot;</span><span class="p" data-group-id="3642908013-3">)</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="sc">&#39;.a = strenv(m)&#39;</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">printf</span><span class="w"> </span><span class="ss">works</span><span class="p">:</span><span class="w">

          </span><span class="n">printf</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="s">&quot;cat</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">m</span><span class="o">=</span><span class="s">&quot;$m&quot;</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="sc">&#39;.a = strenv(m)&#39;</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="n">cat</span><span class="w">

   </span><span class="nc">As</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">multiline</span><span class="w"> </span><span class="ss">expressions</span><span class="p">:</span><span class="w">

          </span><span class="n">m</span><span class="o">=</span><span class="s">&quot;cat
          &quot;</span><span class="w">  </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="sc">&#39;.a = strenv(m)&#39;</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">
            </span><span class="n">cat</span><span class="w">

   </span><span class="nc">Similarly</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="err">’</span><span class="n">re</span><span class="w"> </span><span class="n">trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="ss">newline</span><span class="p">:</span><span class="w">

          </span><span class="nc">IFS</span><span class="o">=</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="o">-</span><span class="n">rd</span><span class="w"> </span><span class="sc">&#39;&#39;</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">&lt;</span><span class="p" data-group-id="3642908013-4">(</span><span class="n">cat</span><span class="w"> </span><span class="n">my_file</span><span class="p" data-group-id="3642908013-4">)</span><span class="w">
          </span><span class="n">output</span><span class="o">=</span><span class="err">$</span><span class="n">output</span><span class="w"> </span><span class="o">.</span><span class="o">/</span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.data.values = strenv(output)&#39;</span><span class="w"> </span><span class="n">first</span><span class="o">.</span><span class="n">yml</span></code></pre><p>   Interpolation</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">
          </span><span class="ss">another</span><span class="p">:</span><span class="w"> </span><span class="n">stuff</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.message = &quot;I like </span><span class="se">\(</span><span class="sc">.value) and </span><span class="se">\(</span><span class="sc">.another)&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">
          </span><span class="ss">another</span><span class="p">:</span><span class="w"> </span><span class="n">stuff</span><span class="w">
          </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="nc">I</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">things</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">stuff</span></code></pre><p>   Interpolation - not a string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">value</span><span class="p">:</span><span class="w">
            </span><span class="ss">an</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.message = &quot;I like </span><span class="se">\(</span><span class="sc">.value)&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">value</span><span class="p">:</span><span class="w">
            </span><span class="ss">an</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;I like an: apple&#39;</span></code></pre><p>   To up (upper) case</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Works</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">unicode</span><span class="w"> </span><span class="n">characters</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">água</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;upcase&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="err">Á</span><span class="nc">GUA</span></code></pre><p>   To down (lower) case</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Works</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">unicode</span><span class="w"> </span><span class="n">characters</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="err">Á</span><span class="n">gUA</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;downcase&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">água</span></code></pre><p>   Join strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;join(&quot;; &quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="p">;</span><span class="w"> </span><span class="n">meow</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="no">true</span></code></pre><p>   Trim strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39; cat&#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39;dog &#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39; cow cow &#39;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">horse</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | trim&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="w">
          </span><span class="n">dog</span><span class="w">
          </span><span class="n">cow</span><span class="w"> </span><span class="n">cow</span><span class="w">
          </span><span class="n">horse</span></code></pre><p>   Match string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">foo</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;match(&quot;foo&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
          </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">captures</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3701752447-1">[</span><span class="p" data-group-id="3701752447-1">]</span></code></pre><p>   Match string, case insensitive</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="nc">FOO</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[match(&quot;(?i)foo&quot;; &quot;g&quot;)]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5705747287-1">[</span><span class="p" data-group-id="5705747287-1">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="nc">FOO</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5705747287-2">[</span><span class="p" data-group-id="5705747287-2">]</span></code></pre><p>   Match with global capture group</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">abc</span><span class="w"> </span><span class="n">abc</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[match(&quot;(ab)(c)&quot;; &quot;g&quot;)]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">abc</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">ab</span><span class="w">
                </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">
                </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
                </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">abc</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">ab</span><span class="w">
                </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
                </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w">
                </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
                </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Match with named capture groups</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">foo</span><span class="w">  </span><span class="n">foo</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[match(&quot;foo (?P&lt;bar123&gt;bar)? foo&quot;; &quot;g&quot;)]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
                </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
                </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
                </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bar123</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">  </span><span class="n">foo</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="w">
                </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">
                </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">bar123</span></code></pre><p>   Capture named groups into a map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">xyzzy</span><span class="o">-</span><span class="mi">14</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;capture(&quot;(?P&lt;a&gt;[a-z]+)-(?P&lt;n&gt;[0-9]+)&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">xyzzy</span><span class="w">
          </span><span class="ss">n</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;14&quot;</span></code></pre><p>   Match without global flag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">cat</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;match(&quot;cat&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">captures</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7747519713-1">[</span><span class="p" data-group-id="7747519713-1">]</span></code></pre><p>   Match with global flag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">cat</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[match(&quot;cat&quot;; &quot;g&quot;)]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1002707751-1">[</span><span class="p" data-group-id="1002707751-1">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">string</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="ss">captures</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1002707751-2">[</span><span class="p" data-group-id="1002707751-2">]</span></code></pre><p>   Test using regex</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Like</span><span class="w"> </span><span class="n">jq</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">equivalent</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="no">true</span><span class="o">/</span><span class="no">false</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">details</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | test(&quot;at&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="no">true</span><span class="w">
          </span><span class="no">false</span></code></pre><p>   Substitute / Replace string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="nc">Golang</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">regex</span><span class="p">,</span><span class="w"> </span><span class="n">described</span><span class="w"> </span><span class="n">here</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">dogs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">great</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a |= sub(&quot;dogs&quot;, &quot;cats&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cats</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">great</span></code></pre><p>   Substitute / Replace string with regex</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="nc">Golang</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">regex</span><span class="p">,</span><span class="w"> </span><span class="n">described</span><span class="w"> </span><span class="n">here</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">heat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |= sub(&quot;(a)&quot;, &quot;${1}r&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cart</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">heart</span></code></pre><p>   Custom types: that are really strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encountered</span><span class="p">,</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="n">heat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |= sub(&quot;(a)&quot;, &quot;${1}r&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="n">cart</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="n">heart</span></code></pre><p>   Split strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">cat</span><span class="p">;</span><span class="w"> </span><span class="n">meow</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;split(&quot;; &quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;true&quot;</span></code></pre><p>   Split strings one match</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">word</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;split(&quot;; &quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">word</span></code></pre><p>   To string</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">wrapped</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">--</span><span class="n">unwrapScalar</span><span class="o">=</span><span class="no">false</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="o">=</span><span class="n">f</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">an</span><span class="p">:</span><span class="w"> </span><span class="n">object</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">array</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |= to_string&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;null&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;~&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;an: object&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;- array</span><span class="se">\n</span><span class="s">- 2&quot;</span></code></pre><p>Style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="p" data-group-id="3759732882-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">style</span><span class="p">,</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">style</span><span class="p" data-group-id="3759732882-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">yaml</span><span class="o">.</span></code></pre><p>   Update and set style of a particular node (simple)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">something</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b = &quot;new&quot; | .a.b style=&quot;double&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">something</span></code></pre><p>   Update and set style of a particular node using path variables</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">something</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with(.a.b ; . = &quot;new&quot; | . style=&quot;double&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">something</span></code></pre><p>   Set tagged style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style=&quot;tagged&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">!</span><span class="o">!</span><span class="n">map</span><span class="w">
          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">bool</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">seq</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">map</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="w"> </span><span class="n">cool</span></code></pre><p>   Set double quote style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style=&quot;double&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.2&quot;</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cool&quot;</span></code></pre><p>   Set double quote style on map keys too</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;... style=&quot;double&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="w">
          </span><span class="ss">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span><span class="w">
          </span><span class="ss">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.2&quot;</span><span class="w">
          </span><span class="ss">&quot;e&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w">
          </span><span class="ss">&quot;f&quot;</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="w">
          </span><span class="ss">&quot;g&quot;</span><span class="p">:</span><span class="w">
            </span><span class="ss">&quot;something&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cool&quot;</span></code></pre><p>   Set single quote style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style=&quot;single&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;cat&#39;</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;5&#39;</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;3.2&#39;</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;true&#39;</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39;2&#39;</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39;3&#39;</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;cool&#39;</span></code></pre><p>   Set literal quote style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style=&quot;literal&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
            </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
              </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
              </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
              </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="o">-</span><span class="w">
              </span><span class="n">cool</span></code></pre><p>   Set folded quote style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style=&quot;folded&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
            </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
            </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
            </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
            </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
              </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
              </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
              </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="o">&gt;</span><span class="o">-</span><span class="w">
              </span><span class="n">cool</span></code></pre><p>   Set flow quote style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. style=&quot;flow&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="9294569995-1">{</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="p">,</span><span class="w"> </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9294569995-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="9294569995-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">g</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9294569995-3">{</span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="p" data-group-id="9294569995-3">}</span><span class="p" data-group-id="9294569995-1">}</span></code></pre><p>   Reset style - or pretty print</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="p" data-group-id="3475865890-1">(</span><span class="n">default</span><span class="p" data-group-id="3475865890-1">)</span><span class="w"> </span><span class="k">quote</span><span class="w"> </span><span class="n">style</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">...</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">too</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">--</span><span class="n">prettyPrint</span><span class="o">/</span><span class="o">-</span><span class="nc">P</span><span class="w"> </span><span class="n">short</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="3475865890-2">{</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;c&#39;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;e&quot;</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">  </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3475865890-3">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="3475865890-3">]</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;g&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3475865890-4">{</span><span class="w"> </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cool&quot;</span><span class="p" data-group-id="3475865890-4">}</span><span class="w"> </span><span class="p" data-group-id="3475865890-2">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;... style=&quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">g</span><span class="p">:</span><span class="w">
            </span><span class="ss">something</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span></code></pre><p>   Set style relatively with assign-update</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">single</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">double</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] style |= .&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;single&#39;</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;double&quot;</span></code></pre><p>   Read style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="9088886637-1">{</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cat&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;thing&#39;</span><span class="p" data-group-id="9088886637-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | style&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">flow</span><span class="w">
          </span><span class="n">double</span><span class="w">
          </span><span class="n">single</span></code></pre><p>Subtract</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">subtract</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">subtract</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span></code></pre><p>   Array subtraction</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;[1,2] - [2,3]&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Array subtraction with nested array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;[[1], 1, 2] - [[1], 3]&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span></code></pre><p>   Array subtraction with nested object</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">matter</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">d</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;. - [{&quot;c&quot;: &quot;d&quot;, &quot;a&quot;: &quot;b&quot;}]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">b</span></code></pre><p>   Number subtraction - float</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">floats</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">floats</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">4.5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a - .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1.5</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mf">4.5</span></code></pre><p>   Number subtraction - int</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">ints</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">ints</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a = .a - .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Decrement numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] -= 1&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Date subtraction</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">subtract</span><span class="w"> </span><span class="n">durations</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">dates</span><span class="o">.</span><span class="w">  </span><span class="nc">Assumes</span><span class="w"> </span><span class="nc">RFC3339</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">date</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T03</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a -= &quot;3h10m&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="nc">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="nc">Z</span></code></pre><p>   Date subtraction - custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">with_dtf</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="n">format</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="n">date</span><span class="o">-</span><span class="n">time</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">6</span><span class="p">:</span><span class="mi">00</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with_dtf(&quot;Monday, 02-Jan-06 at 3:04PM MST&quot;, .a -= &quot;3h1m&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Saturday</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="o">-</span><span class="nc">Dec</span><span class="o">-</span><span class="mi">01</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">59</span><span class="nc">AM</span><span class="w"> </span><span class="nc">GMT</span></code></pre><p>   Custom types: that are really numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encountered</span><span class="p">,</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="mi">1</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a -= .b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">horse</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="n">goat</span><span class="w"> </span><span class="mi">1</span></code></pre><p>Tag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="p" data-group-id="3875960604-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">bool</span><span class="p" data-group-id="3875960604-1">)</span><span class="o">.</span></code></pre><p>   Get tag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5880148714-1">[</span><span class="p" data-group-id="5880148714-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | tag&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">!</span><span class="o">!</span><span class="n">map</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">bool</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">seq</span></code></pre><p>   type is an alias for tag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2423741981-1">[</span><span class="p" data-group-id="2423741981-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. | type&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">!</span><span class="o">!</span><span class="n">map</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">str</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">int</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">float</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">bool</span><span class="w">
          </span><span class="o">!</span><span class="o">!</span><span class="n">seq</span></code></pre><p>   Set custom tag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">str</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a tag = &quot;!!mikefarah&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">mikefarah</span><span class="w"> </span><span class="n">str</span></code></pre><p>   Find numbers and convert them to strings</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.. | select(tag == &quot;!!int&quot;)) tag= &quot;!!str&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5&quot;</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="w">
          </span><span class="ss">e</span><span class="p">:</span><span class="w"> </span><span class="no">true</span></code></pre><p>To Number</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Parses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">number</span><span class="o">.</span><span class="w">  </span><span class="n">yq</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">failing</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">float</span><span class="o">.</span><span class="w">  </span><span class="nc">Values</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">ints</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">floats</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">alone</span><span class="o">.</span></code></pre><p>   Converts strings to numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;3.1&quot;</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="s">&quot;-1e3&quot;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | to_number&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">3</span><span class="w">
          </span><span class="mf">3.1</span><span class="w">
          </span><span class="o">-</span><span class="mi">1</span><span class="n">e3</span></code></pre><p>   Doesn’t change numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mf">3.1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="n">e3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | to_number&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">3</span><span class="w">
          </span><span class="mf">3.1</span><span class="w">
          </span><span class="o">-</span><span class="mi">1</span><span class="n">e3</span></code></pre><p>   Cannot convert null</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;.a.b | to_number&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">Error</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p" data-group-id="1080119345-1">[</span><span class="n">null</span><span class="p" data-group-id="1080119345-1">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="o">!</span><span class="o">!</span><span class="n">null</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">number</span></code></pre><p>Traverse (Read)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">simplest</span><span class="w"> </span><span class="p" data-group-id="2180991224-1">(</span><span class="ow">and</span><span class="w"> </span><span class="n">perhaps</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">used</span><span class="p" data-group-id="2180991224-1">)</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">navigate</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">structures</span><span class="o">.</span></code></pre><p>   NOTE –yaml-fix-merge-anchor-to-spec flag</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">yq</span><span class="w"> </span><span class="n">doesn</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="p" data-group-id="9418507394-1">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">spec</span><span class="p">,</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">circumstances</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">incorrectly</span><span class="w"> </span><span class="n">overrides</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="9418507394-2">do</span><span class="w"> </span><span class="n">that</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w">  </span><span class="n">minimise</span><span class="w">  </span><span class="n">disruption</span><span class="w">  </span><span class="n">while</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">fixing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">issue</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">behaviour</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">false</span><span class="p">;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">users</span><span class="o">.</span><span class="w">  </span><span class="nc">Then</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">de</span><span class="err">‐</span><span class="w">
   </span><span class="n">fault</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="p" data-group-id="9418507394-3">(</span><span class="ow">and</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">needed</span><span class="p" data-group-id="9418507394-3">)</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">differences</span><span class="w"> </span><span class="n">below</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="nc">LEGACY</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">off</span><span class="p">;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">FIXED</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">on</span><span class="o">.</span></code></pre><p>   Simple map navigation</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span></code></pre><p>   Splat</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Often</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="n">children</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">operators</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span></code></pre><p>   Optional Splat</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Just</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">splat</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">won</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">scalars</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>   Special characters</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">quotes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="n">around</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">characters</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">&quot;{}&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[&quot;{}&quot;]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">frog</span></code></pre><p>   Nested special characters</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">&quot;key.withdots&quot;</span><span class="p">:</span><span class="w">
              </span><span class="ss">&quot;another.key&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a[&quot;key.withdots&quot;][&quot;another.key&quot;]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">apple</span></code></pre><p>   Keys with spaces</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">quotes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="n">around</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">characters</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">&quot;red rabbit&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[&quot;red rabbit&quot;]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">frog</span></code></pre><p>   Dynamic keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Expressions</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="p" data-group-id="8532445685-1">[</span><span class="p" data-group-id="8532445685-1">]</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dynamically</span><span class="w"> </span><span class="n">lookup</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">calculate</span><span class="w"> </span><span class="n">keys</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
          </span><span class="ss">apple</span><span class="p">:</span><span class="w"> </span><span class="n">crispy</span><span class="w"> </span><span class="n">yum</span><span class="w">
          </span><span class="ss">banana</span><span class="p">:</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="n">yum</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[.b]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">crispy</span><span class="w"> </span><span class="n">yum</span></code></pre><p>   Children don’t exist</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Nodes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">dynamically</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">traversing</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">null</span></code></pre><p>   Optional identifier</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Like</span><span class="w"> </span><span class="n">jq</span><span class="p">,</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">expected</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a?&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span></code></pre><p>   Wildcard matching</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="ss">mad</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.&quot;*a*&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">apple</span><span class="w">
          </span><span class="n">things</span></code></pre><p>   Aliases</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">*</span><span class="n">cat</span></code></pre><p>   Traversing aliases with splat</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">frog</span></code></pre><p>   Traversing aliases explicitly</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cat</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.b.c&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">frog</span></code></pre><p>   Traversing arrays by index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[0]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span></code></pre><p>   Traversing nested arrays by index</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="2309482631-1">[</span><span class="p" data-group-id="2309482631-2">[</span><span class="p" data-group-id="2309482631-2">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2309482631-3">[</span><span class="n">cat</span><span class="p" data-group-id="2309482631-3">]</span><span class="p" data-group-id="2309482631-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[1][0]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span></code></pre><p>   Maps with numeric keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[2]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span></code></pre><p>   Maps with non existing numeric keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[0]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">null</span></code></pre><p>   Traversing merge anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="8726626873-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="8726626873-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar.a&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foo_a</span></code></pre><p>   Traversing merge anchors with local override</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2160005142-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2160005142-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar.thing&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foobar_thing</span></code></pre><p>   Select multiple indices</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a[0, 2]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">a</span><span class="w">
          </span><span class="n">c</span></code></pre><p>   LEGACY: Traversing merge anchors with override</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">behaviour</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="5741607048-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="5741607048-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar.c&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foo_c</span></code></pre><p>   LEGACY: Traversing merge anchor lists</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">previous</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">behaviour</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6072254252-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6072254252-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobarList.thing&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bar_thing</span></code></pre><p>   LEGACY: Splatting merge anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">With</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">behaviour</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="5133568149-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="5133568149-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foo_c</span><span class="w">
          </span><span class="n">foo_a</span><span class="w">
          </span><span class="n">foobar_thing</span></code></pre><p>   LEGACY: Splatting merge anchor lists</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">With</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">behaviour</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="err">–</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="1951515118-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="1951515118-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobarList[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">bar_b</span><span class="w">
          </span><span class="n">foo_a</span><span class="w">
          </span><span class="n">bar_thing</span><span class="w">
          </span><span class="n">foobarList_c</span></code></pre><p>   FIXED: Traversing merge anchors with override</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6238086957-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6238086957-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar.c&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foobar_c</span></code></pre><p>   FIXED: Traversing merge anchor lists</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">earlier</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">ones</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6130223951-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="6130223951-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobarList.thing&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foo_thing</span></code></pre><p>   FIXED: Splatting merge anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">earlier</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">ones</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2834841147-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="2834841147-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobar[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foo_a</span><span class="w">
          </span><span class="n">foobar_thing</span><span class="w">
          </span><span class="n">foobar_c</span></code></pre><p>   FIXED: Splatting merge anchor lists</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Set</span><span class="w"> </span><span class="o">--</span><span class="n">yaml</span><span class="o">-</span><span class="n">fix</span><span class="o">-</span><span class="n">merge</span><span class="o">-</span><span class="n">anchor</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">spec</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">behaviour</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">earlier</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">anchors</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">ones</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">foo</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">foo_a</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foo_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foo_c</span><span class="w">
          </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bar</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">bar_b</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">bar_thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">bar_c</span><span class="w">
          </span><span class="ss">foobarList</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_b</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="8905308557-1">&lt;&lt;</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="n">bar</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="ss">foobar</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_c</span><span class="w">
            </span><span class="o">!</span><span class="o">!</span><span class="n">merge</span><span class="w"> </span><span class="p" data-group-id="8905308557-2">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w">
            </span><span class="ss">thing</span><span class="p">:</span><span class="w"> </span><span class="n">foobar_thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.foobarList[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">foobarList_b</span><span class="w">
          </span><span class="n">foo_thing</span><span class="w">
          </span><span class="n">foobarList_c</span><span class="w">
          </span><span class="n">foo_a</span></code></pre><p>Union</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">combine</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">together</span><span class="o">.</span></code></pre><p>   Combine scalars</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Running</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">null</span><span class="o">-</span><span class="n">input</span><span class="w"> </span><span class="sc">&#39;1, true, &quot;cat&quot;&#39;</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="mi">1</span><span class="w">
          </span><span class="no">true</span><span class="w">
          </span><span class="n">cat</span></code></pre><p>   Combine selected paths</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">fieldA</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">fieldB</span><span class="w">
          </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">fieldC</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a, .c&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">fieldA</span><span class="w">
          </span><span class="n">fieldC</span></code></pre><p>Unique</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">duplicated</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">maintained</span><span class="o">.</span></code></pre><p>   Unique array of scalars (string/numbers)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">maintains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;unique&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span></code></pre><p>   Unique nulls</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Unique</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">considers</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">representations</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">nulls</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">different</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;unique&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span></code></pre><p>   Unique all nulls</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Run</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nulls</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">null</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;unique_by(tag)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="err">~</span></code></pre><p>   Unique array objects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">harry</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">billy</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">harry</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;unique&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">harry</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">billy</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Unique array of objects by a field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">harry</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">billy</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">harry</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;unique_by(.name)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">harry</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">billy</span><span class="w">
            </span><span class="ss">pet</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Unique array of arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">sheep</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;unique&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">sheep</span></code></pre><p>Variable Operators</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">jq</span><span class="w"> </span><span class="n">equivalents</span><span class="p">,</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="p" data-group-id="2089615160-1">(</span><span class="ow">or</span><span class="w"> </span><span class="n">swapping</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">fields</span><span class="p" data-group-id="2089615160-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">ref</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">holds</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="p" data-group-id="2089615160-2">(</span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">copy</span><span class="p" data-group-id="2089615160-2">)</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">allowing</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">path</span><span class="o">.</span></code></pre><p>   Single value variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a as $foo | $foo&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span></code></pre><p>   Multi value variable</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] as $foo | $foo&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">cat</span><span class="w">
          </span><span class="n">dog</span></code></pre><p>   Using variables as a lookup</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Example</span><span class="w"> </span><span class="n">taken</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">stedolan</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">jq</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="c1">#Variable/SymbolicBindingOperator:...as$identifier%7C...  jq</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">&quot;posts&quot;</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">First</span><span class="w"> </span><span class="n">post</span><span class="w">
              </span><span class="ss">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">anon</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">well</span><span class="o">-</span><span class="n">written</span><span class="w"> </span><span class="n">article</span><span class="w">
              </span><span class="ss">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">person1</span><span class="w">
          </span><span class="ss">&quot;realnames&quot;</span><span class="p">:</span><span class="w">
            </span><span class="ss">&quot;anon&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">Anonymous</span><span class="w"> </span><span class="nc">Coward</span><span class="w">
            </span><span class="ss">&quot;person1&quot;</span><span class="p">:</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="nc">McPherson</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.realnames as $names | .posts[] | {&quot;title&quot;:.title, &quot;author&quot;: $names[.author]}&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="nc">First</span><span class="w"> </span><span class="n">post</span><span class="w">
          </span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="nc">Anonymous</span><span class="w"> </span><span class="nc">Coward</span><span class="w">
          </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">well</span><span class="o">-</span><span class="n">written</span><span class="w"> </span><span class="n">article</span><span class="w">
          </span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="nc">McPherson</span></code></pre><p>   Using variables to swap values</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">a_value</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">b_value</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a as $x  | .b as $y | .b = $x | .a = $y&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">b_value</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">a_value</span></code></pre><p>   Use ref to reference a path repeatedly</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="ss">Note</span><span class="p">:</span><span class="w"> </span><span class="nc">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">useful</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">something</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.a.b ref $x | $x = &quot;new&quot; | $x style=&quot;double&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">something</span></code></pre><p>With</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">conveniently</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">deeply</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">relatively</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">other</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w">
   </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">context</span><span class="o">.</span></code></pre><p>   Update and style</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">deeply</span><span class="p">:</span><span class="w">
              </span><span class="ss">nested</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with(.a.deeply.nested; . = &quot;newValue&quot; | . style=&quot;single&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">deeply</span><span class="p">:</span><span class="w">
              </span><span class="ss">nested</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;newValue&#39;</span></code></pre><p>   Update multiple deeply nested properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">deeply</span><span class="p">:</span><span class="w">
              </span><span class="ss">nested</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="w">
              </span><span class="ss">other</span><span class="p">:</span><span class="w"> </span><span class="n">thing</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with(.a.deeply; .nested = &quot;newValue&quot; | .other= &quot;newThing&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">deeply</span><span class="p">:</span><span class="w">
              </span><span class="ss">nested</span><span class="p">:</span><span class="w"> </span><span class="n">newValue</span><span class="w">
              </span><span class="ss">other</span><span class="p">:</span><span class="w"> </span><span class="n">newThing</span></code></pre><p>   Update array elements relatively</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">it</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">contextual</span><span class="w"> </span><span class="n">root</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">element</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with(.myArray[]; .b = .a + &quot; yum&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="n">yum</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w">
              </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">banana</span><span class="w"> </span><span class="n">yum</span></code></pre><p>JSON</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Encode</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="nc">JSON</span><span class="o">.</span><span class="w">  </span><span class="nc">Supports</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p" data-group-id="4159925458-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="nc">NDJSON</span><span class="p" data-group-id="4159925458-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="nc">YAML</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">superset</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p" data-group-id="4159925458-2">(</span><span class="n">single</span><span class="w"> </span><span class="n">document</span><span class="p" data-group-id="4159925458-2">)</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">don</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="w">   </span><span class="nc">You</span><span class="w">  </span><span class="n">will</span><span class="w">  </span><span class="n">probably</span><span class="w">
   </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pretty</span><span class="w"> </span><span class="n">print</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">case</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">idiomatic</span><span class="w"> </span><span class="nc">YAML</span><span class="w"> </span><span class="n">styling</span><span class="o">.</span></code></pre><p>   Parse json: simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">JSON</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">yaml</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="4608783447-1">do</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">prettify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="4608783447-2">{</span><span class="ss">&quot;cat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meow&quot;</span><span class="p" data-group-id="4608783447-2">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span></code></pre><p>   Parse json: complex</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">JSON</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">yaml</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="3413511156-1">do</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">prettify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="3413511156-2">{</span><span class="s">&quot;a&quot;</span><span class="ss">:&quot;Easy! as one two three&quot;</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">:</span><span class="p" data-group-id="3413511156-3">{</span><span class="s">&quot;c&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;d&quot;</span><span class="p">:</span><span class="p" data-group-id="3413511156-4">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p" data-group-id="3413511156-4">]</span><span class="p" data-group-id="3413511156-3">}</span><span class="p" data-group-id="3413511156-2">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="nc">Easy</span><span class="o">!</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">three</span><span class="w">
          </span><span class="ss">b</span><span class="p">:</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="ss">d</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span></code></pre><p>   Encode json: simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="4249308440-1">{</span><span class="w">
            </span><span class="ss">&quot;cat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meow&quot;</span><span class="w">
          </span><span class="p" data-group-id="4249308440-1">}</span></code></pre><p>   Encode json: simple - in one line</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w"> </span><span class="c1"># this is a comment, and it will be dropped.</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="nc">I</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="7064655929-1">{</span><span class="s">&quot;cat&quot;</span><span class="ss">:&quot;meow&quot;</span><span class="p" data-group-id="7064655929-1">}</span></code></pre><p>   Encode json: comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w"> </span><span class="c1"># this is a comment, and it will be dropped.</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="6210305118-1">{</span><span class="w">
            </span><span class="ss">&quot;cat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meow&quot;</span><span class="w">
          </span><span class="p" data-group-id="6210305118-1">}</span></code></pre><p>   Encode json: anchors</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Anchors</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">dereferenced</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ref</span><span class="w"> </span><span class="n">meow</span><span class="w">
          </span><span class="ss">anotherCat</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="n">ref</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="3446205250-1">{</span><span class="w">
            </span><span class="ss">&quot;cat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meow&quot;</span><span class="p">,</span><span class="w">
            </span><span class="ss">&quot;anotherCat&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meow&quot;</span><span class="w">
          </span><span class="p" data-group-id="3446205250-1">}</span></code></pre><p>   Encode json: multiple results</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Each</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">converted</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">doc</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">best</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">indent</span><span class="w"> </span><span class="p" data-group-id="2985241962-1">(</span><span class="n">json</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">line</span><span class="p" data-group-id="2985241962-1">)</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">things</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2985241962-2">[</span><span class="p" data-group-id="2985241962-3">{</span><span class="ss">stuff</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="p" data-group-id="2985241962-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2985241962-4">{</span><span class="ss">whatever</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="p" data-group-id="2985241962-4">}</span><span class="p" data-group-id="2985241962-2">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="nc">I</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="sc">&#39;.things[]&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="2985241962-5">{</span><span class="s">&quot;stuff&quot;</span><span class="ss">:&quot;cool&quot;</span><span class="p" data-group-id="2985241962-5">}</span><span class="w">
          </span><span class="p" data-group-id="2985241962-6">{</span><span class="s">&quot;whatever&quot;</span><span class="ss">:&quot;cat&quot;</span><span class="p" data-group-id="2985241962-6">}</span></code></pre><p>   Roundtrip JSON Lines / NDJSON</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="6224645186-1">{</span><span class="ss">&quot;this&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="6224645186-1">}</span><span class="w">
          </span><span class="p" data-group-id="6224645186-2">{</span><span class="ss">&quot;each&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6224645186-3">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p" data-group-id="6224645186-3">]</span><span class="p" data-group-id="6224645186-2">}</span><span class="w">
          </span><span class="p" data-group-id="6224645186-4">{</span><span class="ss">&quot;a number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6224645186-4">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="nc">I</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="6224645186-5">{</span><span class="s">&quot;this&quot;</span><span class="ss">:&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="6224645186-5">}</span><span class="w">
          </span><span class="p" data-group-id="6224645186-6">{</span><span class="s">&quot;each&quot;</span><span class="p">:</span><span class="p" data-group-id="6224645186-7">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p" data-group-id="6224645186-7">]</span><span class="p" data-group-id="6224645186-6">}</span><span class="w">
          </span><span class="p" data-group-id="6224645186-8">{</span><span class="s">&quot;a number&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p" data-group-id="6224645186-8">}</span></code></pre><p>   Roundtrip multi-document JSON</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p" data-group-id="7806877155-1">(</span><span class="n">despite</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="nc">Lines</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nc">NDJSON</span><span class="w"> </span><span class="n">spec</span><span class="p" data-group-id="7806877155-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Typically</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">doc</span><span class="err">‐</span><span class="w">
   </span><span class="n">ument</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">documents</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="7806877155-2">{</span><span class="w">
              </span><span class="ss">&quot;this&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is a multidoc json file&quot;</span><span class="w">
          </span><span class="p" data-group-id="7806877155-2">}</span><span class="w">
          </span><span class="p" data-group-id="7806877155-3">{</span><span class="w">
              </span><span class="ss">&quot;it&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7806877155-4">[</span><span class="w">
                  </span><span class="s">&quot;has&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;consecutive&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;json documents&quot;</span><span class="w">
              </span><span class="p" data-group-id="7806877155-4">]</span><span class="w">
          </span><span class="p" data-group-id="7806877155-3">}</span><span class="w">
          </span><span class="p" data-group-id="7806877155-5">{</span><span class="w">
              </span><span class="ss">&quot;a number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="p" data-group-id="7806877155-5">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="nc">I</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="7806877155-6">{</span><span class="w">
            </span><span class="ss">&quot;this&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is a multidoc json file&quot;</span><span class="w">
          </span><span class="p" data-group-id="7806877155-6">}</span><span class="w">
          </span><span class="p" data-group-id="7806877155-7">{</span><span class="w">
            </span><span class="ss">&quot;it&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7806877155-8">[</span><span class="w">
              </span><span class="s">&quot;has&quot;</span><span class="p">,</span><span class="w">
              </span><span class="s">&quot;consecutive&quot;</span><span class="p">,</span><span class="w">
              </span><span class="s">&quot;json documents&quot;</span><span class="w">
            </span><span class="p" data-group-id="7806877155-8">]</span><span class="w">
          </span><span class="p" data-group-id="7806877155-7">}</span><span class="w">
          </span><span class="p" data-group-id="7806877155-9">{</span><span class="w">
            </span><span class="ss">&quot;a number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
          </span><span class="p" data-group-id="7806877155-9">}</span></code></pre><p>   Update a specific document in a multi-document json</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Documents</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">documentIndex</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">di</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="2945198546-1">{</span><span class="ss">&quot;this&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="2945198546-1">}</span><span class="w">
          </span><span class="p" data-group-id="2945198546-2">{</span><span class="ss">&quot;each&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2945198546-3">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p" data-group-id="2945198546-3">]</span><span class="p" data-group-id="2945198546-2">}</span><span class="w">
          </span><span class="p" data-group-id="2945198546-4">{</span><span class="ss">&quot;a number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="2945198546-4">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="nc">I</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="sc">&#39;(select(di == 1) | .each ) += &quot;cool&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="2945198546-5">{</span><span class="s">&quot;this&quot;</span><span class="ss">:&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="2945198546-5">}</span><span class="w">
          </span><span class="p" data-group-id="2945198546-6">{</span><span class="s">&quot;each&quot;</span><span class="p">:</span><span class="p" data-group-id="2945198546-7">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p">,</span><span class="s">&quot;cool&quot;</span><span class="p" data-group-id="2945198546-7">]</span><span class="p" data-group-id="2945198546-6">}</span><span class="w">
          </span><span class="p" data-group-id="2945198546-8">{</span><span class="s">&quot;a number&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p" data-group-id="2945198546-8">}</span></code></pre><p>   Find and update a specific document in a multi-document json</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="n">would</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="7877474088-1">{</span><span class="ss">&quot;this&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="7877474088-1">}</span><span class="w">
          </span><span class="p" data-group-id="7877474088-2">{</span><span class="ss">&quot;each&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7877474088-3">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p" data-group-id="7877474088-3">]</span><span class="p" data-group-id="7877474088-2">}</span><span class="w">
          </span><span class="p" data-group-id="7877474088-4">{</span><span class="ss">&quot;a number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="7877474088-4">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">-</span><span class="nc">I</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="sc">&#39;(select(has(&quot;each&quot;)) | .each ) += &quot;cool&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="7877474088-5">{</span><span class="s">&quot;this&quot;</span><span class="ss">:&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="7877474088-5">}</span><span class="w">
          </span><span class="p" data-group-id="7877474088-6">{</span><span class="s">&quot;each&quot;</span><span class="p">:</span><span class="p" data-group-id="7877474088-7">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p">,</span><span class="s">&quot;cool&quot;</span><span class="p" data-group-id="7877474088-7">]</span><span class="p" data-group-id="7877474088-6">}</span><span class="w">
          </span><span class="p" data-group-id="7877474088-8">{</span><span class="s">&quot;a number&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p" data-group-id="7877474088-8">}</span></code></pre><p>   Decode JSON Lines / NDJSON</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="6527253818-1">{</span><span class="ss">&quot;this&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is a multidoc json file&quot;</span><span class="p" data-group-id="6527253818-1">}</span><span class="w">
          </span><span class="p" data-group-id="6527253818-2">{</span><span class="ss">&quot;each&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6527253818-3">[</span><span class="s">&quot;line is a valid json document&quot;</span><span class="p" data-group-id="6527253818-3">]</span><span class="p" data-group-id="6527253818-2">}</span><span class="w">
          </span><span class="p" data-group-id="6527253818-4">{</span><span class="ss">&quot;a number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6527253818-4">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">json</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">this</span><span class="p">:</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">multidoc</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">each</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">document</span><span class="w">
          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="n">a</span><span class="w"> </span><span class="ss">number</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span></code></pre><p>CSV</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Encode</span><span class="o">/</span><span class="nc">Decode</span><span class="o">/</span><span class="nc">Roundtrip</span><span class="w"> </span><span class="nc">CSV</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">TSV</span><span class="w"> </span><span class="n">files</span><span class="o">.</span></code></pre><p>   Encode</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Currently</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">homogeneous</span><span class="w"> </span><span class="n">flat</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="ss">is</span><span class="p">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">nesting</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">assumes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bobo</span><span class="w">
            </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Fifi</span><span class="w">
            </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="nc">As</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">scalars</span><span class="w"> </span><span class="p" data-group-id="5493159201-1">(</span><span class="n">strings</span><span class="o">/</span><span class="n">numbers</span><span class="o">/</span><span class="n">booleans</span><span class="p" data-group-id="5493159201-1">)</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="5493159201-2">[</span><span class="nc">Bobo</span><span class="p">,</span><span class="w"> </span><span class="n">dog</span><span class="p" data-group-id="5493159201-2">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="5493159201-3">[</span><span class="nc">Fifi</span><span class="p">,</span><span class="w"> </span><span class="n">cat</span><span class="p" data-group-id="5493159201-3">]</span></code></pre><p>   Decode</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Decode</span><span class="w"> </span><span class="n">assumes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="nc">CSV</span><span class="o">/</span><span class="nc">TSV</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">row</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">beneath</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entries</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">coded</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">keys</span><span class="o">.</span><span class="w">

          </span><span class="n">name</span><span class="p">,</span><span class="n">type</span><span class="w">
          </span><span class="nc">Bobo</span><span class="p">,</span><span class="n">dog</span><span class="w">
          </span><span class="nc">Fifi</span><span class="p">,</span><span class="n">cat</span></code></pre><p>   Encode CSV simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="8283651324-1">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="p">,</span><span class="w"> </span><span class="n">csv</span><span class="p" data-group-id="8283651324-1">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="8283651324-2">[</span><span class="n">because</span><span class="p">,</span><span class="w"> </span><span class="n">excel</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="n">cool</span><span class="p" data-group-id="8283651324-2">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">csv</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">i</span><span class="p">,</span><span class="n">like</span><span class="p">,</span><span class="n">csv</span><span class="w">
          </span><span class="n">because</span><span class="p">,</span><span class="n">excel</span><span class="p">,</span><span class="n">is</span><span class="p">,</span><span class="n">cool</span></code></pre><p>   Encode TSV simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="9839239243-1">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="p">,</span><span class="w"> </span><span class="n">csv</span><span class="p" data-group-id="9839239243-1">]</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="p" data-group-id="9839239243-2">[</span><span class="n">because</span><span class="p">,</span><span class="w"> </span><span class="n">excel</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="n">cool</span><span class="p" data-group-id="9839239243-2">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">tsv</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">i</span><span class="w">   </span><span class="n">like</span><span class="w">    </span><span class="n">csv</span><span class="w">
          </span><span class="n">because</span><span class="w"> </span><span class="n">excel</span><span class="w">   </span><span class="n">is</span><span class="w">  </span><span class="n">cool</span></code></pre><p>   Encode array of objects to csv</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Gary</span><span class="w">
            </span><span class="ss">numberOfCats</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">likesApples</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="mf">168.8</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit
            numberOfCats: 2
            likesApples: false
            height: -188.8

   then

          yq -o=csv sample.yml

   will output

          name,numberOfCats,likesApples,height
          Gary,1,true,168.8
          Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="no">false</span><span class="p">,</span><span class="o">-</span><span class="mf">188.8</span></code></pre><p>   Encode array of objects to custom csv format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">manually</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">resulting</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span><span class="w">  </span><span class="nc">Pick</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">whatever</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">like</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Gary</span><span class="w">
            </span><span class="ss">numberOfCats</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">likesApples</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
            </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="mf">168.8</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit
            numberOfCats: 2
            likesApples: false
            height: -188.8

   then

          yq -o=csv &#39;</span><span class="p" data-group-id="4938319382-1">[</span><span class="p" data-group-id="4938319382-2">[</span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Number of Cats&quot;</span><span class="p" data-group-id="4938319382-2">]</span><span class="p" data-group-id="4938319382-1">]</span><span class="w"> </span><span class="o">+</span><span class="w">  </span><span class="p" data-group-id="4938319382-3">[</span><span class="o">.</span><span class="p" data-group-id="4938319382-4">[</span><span class="p" data-group-id="4938319382-4">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p" data-group-id="4938319382-5">[</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="o">.</span><span class="n">numberOfCats</span><span class="w"> </span><span class="p" data-group-id="4938319382-5">]</span><span class="p" data-group-id="4938319382-3">]</span><span class="sc">&#39; sample.yml

   will output

          Name,Number of Cats
          Gary,1
          Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="p">,</span><span class="mi">2</span></code></pre><p>   Encode array of objects to csv - missing fields behaviour</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">First</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="err">`</span><span class="n">likesApples</span><span class="sc">&#39;, so it is not included in the csv.  Second entry does not have `numberOfCats&#39;</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">blank</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Gary</span><span class="w">
            </span><span class="ss">numberOfCats</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="mf">168.8</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit
            height: -188.8
            likesApples: false

   then

          yq -o=csv sample.yml

   will output

          name,numberOfCats,height
          Gary,1,168.8
          Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="p">,</span><span class="p">,</span><span class="o">-</span><span class="mf">188.8</span></code></pre><p>   Parse CSV into an array of objects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">First</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">YAML</span><span class="o">/</span><span class="nc">JSON</span><span class="w"> </span><span class="n">formatting</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">parsed!</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">csv</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">name</span><span class="p">,</span><span class="n">numberOfCats</span><span class="p">,</span><span class="n">likesApples</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">facts</span><span class="w">
          </span><span class="nc">Gary</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="no">true</span><span class="p">,</span><span class="mf">168.8</span><span class="p">,</span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit,2,false,-188.8,tall: indeed

   then

          yq -p=csv sample.csv

   will output

          - name: Gary
            numberOfCats: 1
            likesApples: true
            height: 168.8
            facts:
              cool: true
          - name: Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="w">
            </span><span class="ss">numberOfCats</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="ss">likesApples</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mf">188.8</span><span class="w">
            </span><span class="ss">facts</span><span class="p">:</span><span class="w">
              </span><span class="ss">tall</span><span class="p">:</span><span class="w"> </span><span class="n">indeed</span></code></pre><p>   Parse CSV into an array of objects, no auto-parsing</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">First</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="w">  </span><span class="nc">Entries</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">YAML</span><span class="o">/</span><span class="nc">JSON</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">strings</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">csv</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">name</span><span class="p">,</span><span class="n">numberOfCats</span><span class="p">,</span><span class="n">likesApples</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">facts</span><span class="w">
          </span><span class="nc">Gary</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="no">true</span><span class="p">,</span><span class="mf">168.8</span><span class="p">,</span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
          </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit,2,false,-188.8,tall: indeed

   then

          yq -p=csv --csv-auto-parse=f sample.csv

   will output

          - name: Gary
            numberOfCats: 1
            likesApples: true
            height: 168.8
            facts: &#39;</span><span class="ss">cool</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="sc">&#39;
          - name: Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="w">
            </span><span class="ss">numberOfCats</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="ss">likesApples</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mf">188.8</span><span class="w">
            </span><span class="ss">facts</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;tall: indeed&#39;</span></code></pre><p>   Parse TSV into an array of objects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">First</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">tsv</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">name</span><span class="w">    </span><span class="n">numberOfCats</span><span class="w">    </span><span class="n">likesApples</span><span class="w"> </span><span class="n">height</span><span class="w">
          </span><span class="nc">Gary</span><span class="w">    </span><span class="mi">1</span><span class="w">   </span><span class="no">true</span><span class="w">    </span><span class="mf">168.8</span><span class="w">
          </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit   2   false   -188.8

   then

          yq -p=tsv sample.tsv

   will output

          - name: Gary
            numberOfCats: 1
            likesApples: true
            height: 168.8
          - name: Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="w">
            </span><span class="ss">numberOfCats</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="ss">likesApples</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
            </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mf">188.8</span></code></pre><p>   Round trip</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">csv</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">name</span><span class="p">,</span><span class="n">numberOfCats</span><span class="p">,</span><span class="n">likesApples</span><span class="p">,</span><span class="n">height</span><span class="w">
          </span><span class="nc">Gary</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="no">true</span><span class="p">,</span><span class="mf">168.8</span><span class="w">
          </span><span class="nc">Samantha</span><span class="sc">&#39;s Rabbit,2,false,-188.8

   then

          yq -p=csv -o=csv &#39;</span><span class="p" data-group-id="3549109534-1">(</span><span class="o">.</span><span class="p" data-group-id="3549109534-2">[</span><span class="p" data-group-id="3549109534-2">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="3549109534-3">(</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Gary&quot;</span><span class="p" data-group-id="3549109534-3">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="n">numberOfCats</span><span class="p" data-group-id="3549109534-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="sc">&#39; sample.csv

   will output

          name,numberOfCats,likesApples,height
          Gary,3,true,168.8
          Samantha&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">Rabbit</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="no">false</span><span class="p">,</span><span class="o">-</span><span class="mf">188.8</span></code></pre><p>Formatting Expressions</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">From</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">v4</span><span class="o">.</span><span class="mi">41</span><span class="o">+</span><span class="w">

   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">put</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="o">.</span><span class="n">yq</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">whitespace</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">break</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">explain</span><span class="w"> </span><span class="n">what</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">going</span><span class="w"> </span><span class="n">on</span><span class="o">.</span></code></pre><p>   Using expression files and comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">executable</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yaml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">old</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="n">update</span><span class="o">.</span><span class="n">yq</span><span class="err">&#39;</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1">#! yq</span><span class="w">

          </span><span class="c1"># This is a yq expression that updates the map</span><span class="w">
          </span><span class="c1"># for several great reasons outlined here.</span><span class="w">

          </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="w"> </span><span class="c1"># line comment here</span><span class="w">
          </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;frog&quot;</span><span class="w">

          </span><span class="c1"># Now good things will happen.</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="o">.</span><span class="o">/</span><span class="n">update</span><span class="o">.</span><span class="n">yq</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yaml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">new</span><span class="w">
            </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Flags in expression files</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shebang</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">directly</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yaml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">old</span><span class="w">

   </span><span class="nc">And</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="n">update</span><span class="o">.</span><span class="n">yq</span><span class="err">&#39;</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1">#! yq -oj</span><span class="w">

          </span><span class="c1"># This is a yq expression that updates the map</span><span class="w">
          </span><span class="c1"># for several great reasons outlined here.</span><span class="w">

          </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="w"> </span><span class="c1"># line comment here</span><span class="w">
          </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;frog&quot;</span><span class="w">

          </span><span class="c1"># Now good things will happen.</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="o">.</span><span class="o">/</span><span class="n">update</span><span class="o">.</span><span class="n">yq</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yaml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="p" data-group-id="7511413183-1">{</span><span class="w">
            </span><span class="ss">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7511413183-2">{</span><span class="w">
              </span><span class="ss">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="p">,</span><span class="w">
              </span><span class="ss">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;frog&quot;</span><span class="w">
            </span><span class="p" data-group-id="7511413183-2">}</span><span class="w">
          </span><span class="p" data-group-id="7511413183-1">}</span></code></pre><p>   Commenting out yq expressions</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">`</span><span class="n">frog</span><span class="sc">&#39;.  In this example we’re calling yq directly and passing the expression file into --from-file, this is no different from executing the expression
   file directly.

   Given a sample.yaml file of:

          a:
            b: old

   And an `update.yq&#39;</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1">#! yq</span><span class="w">
          </span><span class="c1"># This is a yq expression that updates the map</span><span class="w">
          </span><span class="c1"># for several great reasons outlined here.</span><span class="w">

          </span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="w"> </span><span class="c1"># line comment here</span><span class="w">
          </span><span class="c1"># | .a.c = &quot;frog&quot;</span><span class="w">

          </span><span class="c1"># Now good things will happen.</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">from</span><span class="o">-</span><span class="n">file</span><span class="w"> </span><span class="n">update</span><span class="o">.</span><span class="n">yq</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">new</span></code></pre><p>   Basic input example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">lua</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">return</span><span class="w"> </span><span class="p" data-group-id="4655553722-1">{</span><span class="w">
              </span><span class="p" data-group-id="4655553722-2">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="4655553722-2">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Australia&quot;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">place</span><span class="w">
              </span><span class="p" data-group-id="4655553722-3">[</span><span class="s">&quot;cities&quot;</span><span class="p" data-group-id="4655553722-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4655553722-4">{</span><span class="w">
                  </span><span class="s">&quot;Sydney&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Melbourne&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Brisbane&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Perth&quot;</span><span class="p">,</span><span class="w">
              </span><span class="p" data-group-id="4655553722-4">}</span><span class="p">;</span><span class="w">
          </span><span class="p" data-group-id="4655553722-1">}</span><span class="p">;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">lua</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">country</span><span class="p">:</span><span class="w"> </span><span class="nc">Australia</span><span class="w">
          </span><span class="ss">cities</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="nc">Sydney</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="nc">Melbourne</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="nc">Brisbane</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="nc">Perth</span></code></pre><p>   Basic output example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">country</span><span class="p">:</span><span class="w"> </span><span class="nc">Australia</span><span class="w"> </span><span class="c1"># this place</span><span class="w">
          </span><span class="ss">cities</span><span class="p">:</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Sydney</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Melbourne</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Brisbane</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Perth</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">lua</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">return</span><span class="w"> </span><span class="p" data-group-id="5064197897-1">{</span><span class="w">
              </span><span class="p" data-group-id="5064197897-2">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="5064197897-2">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Australia&quot;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">place</span><span class="w">
              </span><span class="p" data-group-id="5064197897-3">[</span><span class="s">&quot;cities&quot;</span><span class="p" data-group-id="5064197897-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5064197897-4">{</span><span class="w">
                  </span><span class="s">&quot;Sydney&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Melbourne&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Brisbane&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Perth&quot;</span><span class="p">,</span><span class="w">
              </span><span class="p" data-group-id="5064197897-4">}</span><span class="p">;</span><span class="w">
          </span><span class="p" data-group-id="5064197897-1">}</span><span class="p">;</span></code></pre><p>   Unquoted keys</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">lua</span><span class="o">-</span><span class="n">unquoted</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">produce</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nicer</span><span class="o">-</span><span class="n">looking</span><span class="w"> </span><span class="n">output</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">country</span><span class="p">:</span><span class="w"> </span><span class="nc">Australia</span><span class="w"> </span><span class="c1"># this place</span><span class="w">
          </span><span class="ss">cities</span><span class="p">:</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Sydney</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Melbourne</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Brisbane</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Perth</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">lua</span><span class="w"> </span><span class="o">--</span><span class="n">lua</span><span class="o">-</span><span class="n">unquoted</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">return</span><span class="w"> </span><span class="p" data-group-id="2197200082-1">{</span><span class="w">
              </span><span class="n">country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Australia&quot;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">place</span><span class="w">
              </span><span class="n">cities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2197200082-2">{</span><span class="w">
                  </span><span class="s">&quot;Sydney&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Melbourne&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Brisbane&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="s">&quot;Perth&quot;</span><span class="p">,</span><span class="w">
              </span><span class="p" data-group-id="2197200082-2">}</span><span class="p">;</span><span class="w">
          </span><span class="p" data-group-id="2197200082-1">}</span><span class="p">;</span></code></pre><p>   Globals</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">lua</span><span class="o">-</span><span class="n">globals</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">scope</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">country</span><span class="p">:</span><span class="w"> </span><span class="nc">Australia</span><span class="w"> </span><span class="c1"># this place</span><span class="w">
          </span><span class="ss">cities</span><span class="p">:</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Sydney</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Melbourne</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Brisbane</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Perth</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">lua</span><span class="w"> </span><span class="o">--</span><span class="n">lua</span><span class="o">-</span><span class="n">globals</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Australia&quot;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">place</span><span class="w">
          </span><span class="n">cities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6982548223-1">{</span><span class="w">
              </span><span class="s">&quot;Sydney&quot;</span><span class="p">,</span><span class="w">
              </span><span class="s">&quot;Melbourne&quot;</span><span class="p">,</span><span class="w">
              </span><span class="s">&quot;Brisbane&quot;</span><span class="p">,</span><span class="w">
              </span><span class="s">&quot;Perth&quot;</span><span class="p">,</span><span class="w">
          </span><span class="p" data-group-id="6982548223-1">}</span><span class="p">;</span></code></pre><p>   Elaborate example</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">--</span><span class="o">-</span><span class="w">
          </span><span class="ss">hello</span><span class="p">:</span><span class="w"> </span><span class="n">world</span><span class="w">
          </span><span class="ss">tables</span><span class="p">:</span><span class="w">
            </span><span class="ss">like</span><span class="p">:</span><span class="w"> </span><span class="n">this</span><span class="w">
            </span><span class="ss">keys</span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="w">
            </span><span class="sc">? </span><span class="ss">look</span><span class="p">:</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">string</span><span class="w"> </span><span class="n">keys</span><span class="w">
            </span><span class="p">:</span><span class="w"> </span><span class="nc">True</span><span class="w">
          </span><span class="ss">numbers</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">decimal</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">hex</span><span class="p">:</span><span class="w"> </span><span class="mh">0x7fabc123</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">octal</span><span class="p">:</span><span class="w"> </span><span class="mo">0o30</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">float</span><span class="p">:</span><span class="w"> </span><span class="mf">123.45</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">infinity</span><span class="p">:</span><span class="w"> </span><span class="o">.</span><span class="n">inf</span><span class="w">
              </span><span class="ss">plus_infinity</span><span class="p">:</span><span class="w"> </span><span class="o">+</span><span class="o">.</span><span class="n">inf</span><span class="w">
              </span><span class="ss">minus_infinity</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="o">.</span><span class="n">inf</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">not</span><span class="p">:</span><span class="w"> </span><span class="o">.</span><span class="n">nan</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">lua</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">return</span><span class="w"> </span><span class="p" data-group-id="4245743946-1">{</span><span class="w">
              </span><span class="p" data-group-id="4245743946-2">[</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="4245743946-2">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;world&quot;</span><span class="p">;</span><span class="w">
              </span><span class="p" data-group-id="4245743946-3">[</span><span class="s">&quot;tables&quot;</span><span class="p" data-group-id="4245743946-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4245743946-4">{</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-5">[</span><span class="s">&quot;like&quot;</span><span class="p" data-group-id="4245743946-5">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;this&quot;</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-6">[</span><span class="s">&quot;keys&quot;</span><span class="p" data-group-id="4245743946-6">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-7">[</span><span class="p" data-group-id="4245743946-8">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-9">[</span><span class="s">&quot;look&quot;</span><span class="p" data-group-id="4245743946-9">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;non-string keys&quot;</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-8">}</span><span class="p" data-group-id="4245743946-7">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="p">;</span><span class="w">
              </span><span class="p" data-group-id="4245743946-4">}</span><span class="p">;</span><span class="w">
              </span><span class="p" data-group-id="4245743946-10">[</span><span class="s">&quot;numbers&quot;</span><span class="p" data-group-id="4245743946-10">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4245743946-11">{</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-12">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-13">[</span><span class="s">&quot;decimal&quot;</span><span class="p" data-group-id="4245743946-13">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12345</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-12">}</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-14">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-15">[</span><span class="s">&quot;hex&quot;</span><span class="p" data-group-id="4245743946-15">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x7fabc123</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-14">}</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-16">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-17">[</span><span class="s">&quot;octal&quot;</span><span class="p" data-group-id="4245743946-17">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-16">}</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-18">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-19">[</span><span class="s">&quot;float&quot;</span><span class="p" data-group-id="4245743946-19">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123.45</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-18">}</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-20">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-21">[</span><span class="s">&quot;infinity&quot;</span><span class="p" data-group-id="4245743946-21">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4245743946-22">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p" data-group-id="4245743946-22">)</span><span class="p">;</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-23">[</span><span class="s">&quot;plus_infinity&quot;</span><span class="p" data-group-id="4245743946-23">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4245743946-24">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p" data-group-id="4245743946-24">)</span><span class="p">;</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-25">[</span><span class="s">&quot;minus_infinity&quot;</span><span class="p" data-group-id="4245743946-25">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4245743946-26">(</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p" data-group-id="4245743946-26">)</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-20">}</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-27">{</span><span class="w">
                      </span><span class="p" data-group-id="4245743946-28">[</span><span class="s">&quot;not&quot;</span><span class="p" data-group-id="4245743946-28">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4245743946-29">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p" data-group-id="4245743946-29">)</span><span class="p">;</span><span class="w">
                  </span><span class="p" data-group-id="4245743946-27">}</span><span class="p">,</span><span class="w">
              </span><span class="p" data-group-id="4245743946-11">}</span><span class="p">;</span><span class="w">
          </span><span class="p" data-group-id="4245743946-1">}</span><span class="p">;</span></code></pre><p>Properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Encode</span><span class="o">/</span><span class="nc">Decode</span><span class="o">/</span><span class="nc">Roundtrip</span><span class="w"> </span><span class="n">to</span><span class="o">/</span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">  </span><span class="nc">Line</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">copied</span><span class="w"> </span><span class="n">across</span><span class="o">.</span><span class="w">

   </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">encode</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">these</span><span class="o">.</span></code></pre><p>   Encode properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="ss">person</span><span class="p">:</span><span class="w"> </span><span class="c1"># neither do comments on maps</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w"> </span><span class="c1"># comments on values appear</span><span class="w">
              </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
              </span><span class="ss">food</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4458325025-1">[</span><span class="n">pizza</span><span class="p" data-group-id="4458325025-1">]</span><span class="w"> </span><span class="c1"># comments on arrays do not</span><span class="w">
          </span><span class="ss">emptyArray</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4458325025-2">[</span><span class="p" data-group-id="4458325025-2">]</span><span class="w">
          </span><span class="ss">emptyMap</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4458325025-3">[</span><span class="p" data-group-id="4458325025-3">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>   Encode properties with array brackets</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Declare</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">–</span><span class="n">properties</span><span class="o">-</span><span class="n">array</span><span class="o">-</span><span class="n">brackets</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="p" data-group-id="8929715452-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="nc">SpringBoot</span><span class="p" data-group-id="8929715452-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="ss">person</span><span class="p">:</span><span class="w"> </span><span class="c1"># neither do comments on maps</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w"> </span><span class="c1"># comments on values appear</span><span class="w">
              </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
              </span><span class="ss">food</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8929715452-2">[</span><span class="n">pizza</span><span class="p" data-group-id="8929715452-2">]</span><span class="w"> </span><span class="c1"># comments on arrays do not</span><span class="w">
          </span><span class="ss">emptyArray</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8929715452-3">[</span><span class="p" data-group-id="8929715452-3">]</span><span class="w">
          </span><span class="ss">emptyMap</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8929715452-4">[</span><span class="p" data-group-id="8929715452-4">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="o">--</span><span class="n">properties</span><span class="o">-</span><span class="n">array</span><span class="o">-</span><span class="n">brackets</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="p" data-group-id="8929715452-5">[</span><span class="mi">0</span><span class="p" data-group-id="8929715452-5">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="p" data-group-id="8929715452-6">[</span><span class="mi">1</span><span class="p" data-group-id="8929715452-6">]</span><span class="o">.</span><span class="n">nested</span><span class="p" data-group-id="8929715452-7">[</span><span class="mi">0</span><span class="p" data-group-id="8929715452-7">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="p" data-group-id="8929715452-8">[</span><span class="mi">0</span><span class="p" data-group-id="8929715452-8">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>   Encode properties - custom separator</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">–</span><span class="n">properties</span><span class="o">-</span><span class="n">separator</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">key</span><span class="o">/</span><span class="n">value</span><span class="w"> </span><span class="n">separator</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="ss">person</span><span class="p">:</span><span class="w"> </span><span class="c1"># neither do comments on maps</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w"> </span><span class="c1"># comments on values appear</span><span class="w">
              </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
              </span><span class="ss">food</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5243492676-1">[</span><span class="n">pizza</span><span class="p" data-group-id="5243492676-1">]</span><span class="w"> </span><span class="c1"># comments on arrays do not</span><span class="w">
          </span><span class="ss">emptyArray</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5243492676-2">[</span><span class="p" data-group-id="5243492676-2">]</span><span class="w">
          </span><span class="ss">emptyMap</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5243492676-3">[</span><span class="p" data-group-id="5243492676-3">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="o">--</span><span class="n">properties</span><span class="o">-</span><span class="n">separator</span><span class="o">=</span><span class="s">&quot; :@ &quot;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="p">:</span><span class="err">@</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="err">@</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="err">@</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="err">@</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>   Encode properties: scalar encapsulation</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">blank</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encapsulated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="n">quotes</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="ss">person</span><span class="p">:</span><span class="w"> </span><span class="c1"># neither do comments on maps</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w"> </span><span class="c1"># comments on values appear</span><span class="w">
              </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
              </span><span class="ss">food</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6794351954-1">[</span><span class="n">pizza</span><span class="p" data-group-id="6794351954-1">]</span><span class="w"> </span><span class="c1"># comments on arrays do not</span><span class="w">
          </span><span class="ss">emptyArray</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6794351954-2">[</span><span class="p" data-group-id="6794351954-2">]</span><span class="w">
          </span><span class="ss">emptyMap</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6794351954-3">[</span><span class="p" data-group-id="6794351954-3">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="o">--</span><span class="n">unwrapScalar</span><span class="o">=</span><span class="no">false</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Mike Wazowski&quot;</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;list entry&quot;</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>   Encode properties: no comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="ss">person</span><span class="p">:</span><span class="w"> </span><span class="c1"># neither do comments on maps</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w"> </span><span class="c1"># comments on values appear</span><span class="w">
              </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
              </span><span class="ss">food</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1608673989-1">[</span><span class="n">pizza</span><span class="p" data-group-id="1608673989-1">]</span><span class="w"> </span><span class="c1"># comments on arrays do not</span><span class="w">
          </span><span class="ss">emptyArray</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1608673989-2">[</span><span class="p" data-group-id="1608673989-2">]</span><span class="w">
          </span><span class="ss">emptyMap</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1608673989-3">[</span><span class="p" data-group-id="1608673989-3">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="sc">&#39;... comments = &quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>   Encode properties: include empty maps and arrays</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sequences</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="ss">person</span><span class="p">:</span><span class="w"> </span><span class="c1"># neither do comments on maps</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w"> </span><span class="c1"># comments on values appear</span><span class="w">
              </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
              </span><span class="ss">food</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0843097484-1">[</span><span class="n">pizza</span><span class="p" data-group-id="0843097484-1">]</span><span class="w"> </span><span class="c1"># comments on arrays do not</span><span class="w">
          </span><span class="ss">emptyArray</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0843097484-2">[</span><span class="p" data-group-id="0843097484-2">]</span><span class="w">
          </span><span class="ss">emptyMap</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0843097484-3">[</span><span class="p" data-group-id="0843097484-3">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="sc">&#39;(.. | select( (tag == &quot;!!map&quot; or tag ==&quot;!!seq&quot;) and length == 0)) = &quot;&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span><span class="w">
          </span><span class="n">emptyArray</span><span class="w"> </span><span class="o">=</span><span class="w">
          </span><span class="n">emptyMap</span><span class="w"> </span><span class="o">=</span></code></pre><p>   Decode properties</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">person</span><span class="p">:</span><span class="w">
            </span><span class="c1"># block comments come through</span><span class="w">
            </span><span class="c1"># comments on values appear</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">
            </span><span class="ss">pets</span><span class="p">:</span><span class="w">
              </span><span class="c1"># comments on array values appear</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">nested</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
            </span><span class="ss">food</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>   Decode properties: numbers</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">All</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="n">properties</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">from_yaml</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">autoparse</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="sc">&#39; (.. | select(tag == &quot;!!str&quot;)) |= from_yaml&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">a</span><span class="p">:</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span></code></pre><p>   Decode properties - array should be a map</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">numeric</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">array_to_map</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">maps</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">things</span><span class="o">.</span><span class="mi">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mike</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="sc">&#39;.things |= array_to_map&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">things</span><span class="p">:</span><span class="w">
            </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">mike</span></code></pre><p>   Roundtrip</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cat</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">props</span><span class="w"> </span><span class="sc">&#39;.person.pets.0 = &quot;dog&quot;&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">properties</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># block comments come through</span><span class="w">
          </span><span class="c1"># comments on values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">

          </span><span class="c1"># comments on array values appear</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dog</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">pets</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">entry</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">food</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pizza</span></code></pre><p>Recipes</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">These</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">intended</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="n">together</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">idea</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">manipulation</span><span class="o">.</span><span class="w">

   </span><span class="nc">Please</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">docs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span></code></pre><p>   Find items in an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">We</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
            </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w">
            </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] | select(.name == &quot;Foo&quot;)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
          </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="4415378748-1">[</span><span class="p" data-group-id="4415378748-1">]</span><span class="w"> </span><span class="n">splats</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">puts</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">These</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">piped</span><span class="w"> </span><span class="p" data-group-id="4415378748-2">(</span><span class="o">|</span><span class="p" data-group-id="4415378748-2">)</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="4415378748-3">(</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Foo&quot;</span><span class="p" data-group-id="4415378748-3">)</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">`</span><span class="nc">Foo</span><span class="err">&#39;</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span></code></pre><p>   Find and update items in an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">We</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
            </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w">
            </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(.[] | select(.name == &quot;Foo&quot;) | .numBuckets) |= . + 1&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
            </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w">
            </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="nc">Following</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">above</span><span class="o">.</span><span class="p" data-group-id="6168821405-1">[</span><span class="p" data-group-id="6168821405-1">]</span><span class="w"> </span><span class="n">splats</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">selects</span><span class="w"> </span><span class="n">filters</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">items</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="p" data-group-id="6168821405-2">(</span><span class="o">|</span><span class="p" data-group-id="6168821405-2">)</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="o">.</span><span class="n">numBuckets</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">items</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Splat</span><span class="p">,</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">brackets</span><span class="p">,</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">hand</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="n">hand</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">expression</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">dot</span><span class="w"> </span><span class="p" data-group-id="6168821405-3">(</span><span class="o">.</span><span class="p" data-group-id="6168821405-3">)</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">increments</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">numBuckets</span><span class="w"> </span><span class="n">counter</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span></code></pre><p>   Deeply prune a tree</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Say</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">interested</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">child1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">child2</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">out</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">parentA</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">bob</span><span class="w">
          </span><span class="ss">parentB</span><span class="p">:</span><span class="w">
            </span><span class="ss">child1</span><span class="p">:</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">am</span><span class="w"> </span><span class="n">child1</span><span class="w">
            </span><span class="ss">child3</span><span class="p">:</span><span class="w"> </span><span class="n">hiya</span><span class="w">
          </span><span class="ss">parentC</span><span class="p">:</span><span class="w">
            </span><span class="ss">childX</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">
            </span><span class="ss">child2</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">child2</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;(
            .. | # recurse through all the nodes
            select(has(&quot;child1&quot;) or has(&quot;child2&quot;)) | # match parents that have either child1 or child2
            (.child1, .child2) | # select those children
            select(.) # filter out nulls
          ) as $i ireduce({};  # using that set of nodes, create a new result map
            setpath($i | path; $i) # and put in each node, using its original path
          )&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">parentB</span><span class="p">:</span><span class="w">
            </span><span class="ss">child1</span><span class="p">:</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">am</span><span class="w"> </span><span class="n">child1</span><span class="w">
          </span><span class="ss">parentC</span><span class="p">:</span><span class="w">
            </span><span class="ss">child2</span><span class="p">:</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">child2</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="nc">Find</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">child1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">child2</span><span class="w"> </span><span class="n">nodes</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Using</span><span class="w"> </span><span class="n">ireduce</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">nodes</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">path</span></code></pre><p>   Multiple or complex updates to items in an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">We</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
              </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w">
              </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;with(.myArray[]; .name = .name + &quot; - &quot; + .type)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
              </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dog</span><span class="w">
              </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">dog</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">effectively</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">expression</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="o">.</span><span class="n">myArray</span><span class="p" data-group-id="8722201387-1">[</span><span class="p" data-group-id="8722201387-1">]</span><span class="w"> </span><span class="n">splats</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">myArray</span><span class="o">.</span><span class="w">  </span><span class="nc">So</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">array</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; - &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">updating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">concatenation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">examples</span><span class="o">.</span></code></pre><p>   Sort an array by a field</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
              </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w">
              </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.myArray |= sort_by(.numBuckets)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">myArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Bar</span><span class="w">
              </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Foo</span><span class="w">
              </span><span class="ss">numBuckets</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">resort</span><span class="w"> </span><span class="o">.</span><span class="n">myArray</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="n">sort_by</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">piping</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">it</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">pipes</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">So</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="o">|</span><span class="o">=</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">.</span><span class="n">myArray</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="o">.</span><span class="n">myArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8734202636-1">(</span><span class="o">.</span><span class="n">myArray</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sort_by</span><span class="p" data-group-id="8734202636-2">(</span><span class="o">.</span><span class="n">numBuckets</span><span class="p" data-group-id="8734202636-2">)</span><span class="p" data-group-id="8734202636-1">)</span></code></pre><p>   Filter, flatten, sort and unique</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Lets</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="ss">names</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="nc">Fred</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="nc">Catherine</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">bar</span><span class="w">
            </span><span class="ss">names</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="nc">Zelda</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="ss">names</span><span class="p">:</span><span class="w"> </span><span class="nc">Fred</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">foo</span><span class="w">
            </span><span class="ss">names</span><span class="p">:</span><span class="w"> </span><span class="nc">Ava</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;[.[] | select(.type == &quot;foo&quot;) | .names] | flatten | sort | unique&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="nc">Ava</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Catherine</span><span class="w">
          </span><span class="o">-</span><span class="w"> </span><span class="nc">Fred</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="8298153380-1">[</span><span class="p" data-group-id="8298153380-1">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="8298153380-2">(</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="8298153380-2">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="n">names</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="err">“</span><span class="n">foo</span><span class="err">”</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Splat</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="8298153380-3">[</span><span class="p" data-group-id="8298153380-3">]</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">unwrap</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">items</span><span class="o">.</span><span class="w">  </span><span class="nc">We</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="8298153380-4">do</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="n">items</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="p">,</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">But</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">So</span><span class="w"> </span><span class="k" data-group-id="8298153380-4">after</span><span class="w"> </span><span class="n">we</span><span class="err">’</span><span class="n">re</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">wrap</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">brackets</span><span class="w"> </span><span class="n">around</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expres</span><span class="err">‐</span><span class="w">
     </span><span class="n">sion</span><span class="o">.</span><span class="w">  </span><span class="p" data-group-id="8298153380-5">[</span><span class="o">.</span><span class="p" data-group-id="8298153380-6">[</span><span class="p" data-group-id="8298153380-6">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="8298153380-7">(</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="8298153380-7">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="n">names</span><span class="p" data-group-id="8298153380-5">]</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Now</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">names</span><span class="err">&#39;</span><span class="w"> </span><span class="n">values</span><span class="o">.</span><span class="w">  </span><span class="nc">Which</span><span class="w"> </span><span class="n">includes</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Pipe</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">flatten</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">flatten</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span><span class="w">  </span><span class="nc">So</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">flat</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">strings</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Next</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sorted</span><span class="p">,</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">names!</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flatten</span><span class="p">,</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">examples</span><span class="o">.</span></code></pre><p>   Export as environment variables (script), or any custom format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">document</span><span class="p">,</span><span class="w"> </span><span class="n">lets</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">approach</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">exporting</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">formats</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">var0</span><span class="p">:</span><span class="w"> </span><span class="n">string0</span><span class="w">
          </span><span class="ss">var1</span><span class="p">:</span><span class="w"> </span><span class="n">string1</span><span class="w">
          </span><span class="ss">fruit</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">peach</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.[] |(
              ( select(kind == &quot;scalar&quot;) | key + &quot;=&#39;</span><span class="err">\</span><span class="sc">&#39;&#39;</span><span class="s">&quot; + . + &quot;</span><span class="sc">&#39;</span><span class="se">\&#39;</span><span class="sc">&#39;</span><span class="s">&quot;),
              ( select(kind == &quot;</span><span class="n">seq</span><span class="s">&quot;) | key + &quot;</span><span class="o">=</span><span class="p" data-group-id="3912857028-1">(</span><span class="s">&quot; + (map(&quot;</span><span class="sc">&#39;</span><span class="se">\&#39;</span><span class="sc">&#39;</span><span class="s">&quot; + . + &quot;</span><span class="sc">&#39;</span><span class="se">\&#39;</span><span class="sc">&#39;</span><span class="s">&quot;) | join(&quot;</span><span class="p">,</span><span class="s">&quot;)) + &quot;</span><span class="p" data-group-id="3912857028-1">)</span><span class="err">&quot;</span><span class="p">)</span><span class="w">
          </span><span class="p">)</span><span class="sc">&#39; sample.yml

   will output

          var0=&#39;</span><span class="n">string0</span><span class="sc">&#39;
          var1=&#39;</span><span class="n">string1</span><span class="sc">&#39;
          fruit=(&#39;</span><span class="n">apple</span><span class="sc">&#39;,&#39;</span><span class="n">banana</span><span class="sc">&#39;,&#39;</span><span class="n">peach</span><span class="err">&#39;</span><span class="p">)</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="4826625269-1">[</span><span class="p" data-group-id="4826625269-1">]</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">elements</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">produce</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="n">syntax</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="err">’</span><span class="n">ll</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">union</span><span class="w"> </span><span class="n">operator</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">together</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Scalars</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">quoted</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4826625269-2">(</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="4826625269-3">(</span><span class="n">kind</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;scalar&quot;</span><span class="p" data-group-id="4826625269-3">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;=&#39;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;&#39;&quot;</span><span class="p" data-group-id="4826625269-2">)</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p" data-group-id="4826625269-4">(</span><span class="ow">or</span><span class="w"> </span><span class="n">arrays</span><span class="p" data-group-id="4826625269-4">)</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">trickier</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">quote</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="p">,</span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="p" data-group-id="4826625269-5">(</span><span class="s">&quot;&#39;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;&#39;&quot;</span><span class="p" data-group-id="4826625269-5">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">join</span><span class="p" data-group-id="4826625269-6">(</span><span class="s">&quot;,&quot;</span><span class="p" data-group-id="4826625269-6">)</span></code></pre><p>   Custom format with nested data</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">lets</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">structures</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="err">’</span><span class="n">re</span><span class="w"> </span><span class="n">going</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="bp">_</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">important</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">mind</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">that</span><span class="w">
   </span><span class="n">our</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">recursive</span><span class="w"> </span><span class="p" data-group-id="4856414229-1">(</span><span class="n">despite</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">so</span><span class="p" data-group-id="4856414229-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Instead</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">operate</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">them</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">simple</span><span class="p">:</span><span class="w"> </span><span class="n">string0</span><span class="w">
          </span><span class="ss">simpleArray</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">apple</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">banana</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">peach</span><span class="w">
          </span><span class="ss">deep</span><span class="p">:</span><span class="w">
            </span><span class="ss">property</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.. |(
              ( select(kind == &quot;scalar&quot; and parent | kind != &quot;seq&quot;) | (path | join(&quot;_&quot;)) + &quot;=&#39;</span><span class="err">\</span><span class="sc">&#39;&#39;</span><span class="s">&quot; + . + &quot;</span><span class="sc">&#39;</span><span class="se">\&#39;</span><span class="sc">&#39;</span><span class="s">&quot;),
              ( select(kind == &quot;</span><span class="n">seq</span><span class="s">&quot;) | (path | join(&quot;</span><span class="bp">_</span><span class="s">&quot;)) + &quot;</span><span class="o">=</span><span class="p" data-group-id="4856414229-2">(</span><span class="s">&quot; + (map(&quot;</span><span class="sc">&#39;</span><span class="se">\&#39;</span><span class="sc">&#39;</span><span class="s">&quot; + . + &quot;</span><span class="sc">&#39;</span><span class="se">\&#39;</span><span class="sc">&#39;</span><span class="s">&quot;) | join(&quot;</span><span class="p">,</span><span class="s">&quot;)) + &quot;</span><span class="p" data-group-id="4856414229-2">)</span><span class="err">&quot;</span><span class="p">)</span><span class="w">
          </span><span class="p">)</span><span class="sc">&#39; sample.yml

   will output

          simple=&#39;</span><span class="n">string0</span><span class="sc">&#39;
          deep_property=&#39;</span><span class="n">value</span><span class="sc">&#39;
          simpleArray=(&#39;</span><span class="n">apple</span><span class="sc">&#39;,&#39;</span><span class="n">banana</span><span class="sc">&#39;,&#39;</span><span class="n">peach</span><span class="sc">&#39;)
          deep_array=(&#39;</span><span class="n">cat</span><span class="err">&#39;</span><span class="p">)</span></code></pre><p>   Explanation:</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">•</span><span class="w"> </span><span class="nc">You</span><span class="err">’</span><span class="n">ll</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">understand</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">understand</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">extension</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">elements</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">.</span><span class="p" data-group-id="3381519074-1">[</span><span class="p" data-group-id="3381519074-1">]</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">elements</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Like</span><span class="w"> </span><span class="n">before</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">produce</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bash</span><span class="w"> </span><span class="n">syntax</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="err">’</span><span class="n">ll</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">union</span><span class="w"> </span><span class="n">operator</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">join</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">together</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">however</span><span class="p">,</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">structure</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">print</span><span class="w"> </span><span class="n">scalars</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="p" data-group-id="3381519074-2">(</span><span class="n">because</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">separately</span><span class="p" data-group-id="3381519074-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;seq&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">scalars</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">don</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">more</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="w">  </span><span class="nc">So</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">join</span><span class="p" data-group-id="3381519074-3">(</span><span class="s">&quot;_&quot;</span><span class="p" data-group-id="3381519074-3">)</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">sequences</span><span class="w"> </span><span class="n">follows</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">logic</span></code></pre><p>   Encode shell variables</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">dropped</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">enclosed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">quotes</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">needed</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1"># comment</span><span class="w">
          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Wazowski</span><span class="w">
          </span><span class="ss">eyes</span><span class="p">:</span><span class="w">
            </span><span class="ss">color</span><span class="p">:</span><span class="w"> </span><span class="n">turquoise</span><span class="w">
            </span><span class="ss">number</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="ss">friends</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="nc">James</span><span class="w"> </span><span class="nc">P</span><span class="o">.</span><span class="w"> </span><span class="nc">Sullivan</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="nc">Celia</span><span class="w"> </span><span class="nc">Mae</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">shell</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">name</span><span class="o">=</span><span class="sc">&#39;Mike Wazowski&#39;</span><span class="w">
          </span><span class="n">eyes_color</span><span class="o">=</span><span class="n">turquoise</span><span class="w">
          </span><span class="n">eyes_number</span><span class="o">=</span><span class="mi">1</span><span class="w">
          </span><span class="n">friends_0</span><span class="o">=</span><span class="sc">&#39;James P. Sullivan&#39;</span><span class="w">
          </span><span class="n">friends_1</span><span class="o">=</span><span class="sc">&#39;Celia Mae&#39;</span></code></pre><p>   Encode shell variables: illegal variable names as key.</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Keys</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">illegal</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">adapted</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">ascii_</span><span class="o">=</span><span class="ss">_symbols</span><span class="p">:</span><span class="w"> </span><span class="n">replaced</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="bp">_</span><span class="w">
          </span><span class="ss">&quot;ascii_ _controls&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">dropped</span><span class="w"> </span><span class="p" data-group-id="2905550604-1">(</span><span class="n">this</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="err">\</span><span class="n">t</span><span class="p" data-group-id="2905550604-1">)</span><span class="w">
          </span><span class="ss">nonascii_א_characters</span><span class="p">:</span><span class="w"> </span><span class="n">dropped</span><span class="w">
          </span><span class="ss">effort_expeñded_tò_preserve_accented_latin_letters</span><span class="p">:</span><span class="w"> </span><span class="n">moderate</span><span class="w"> </span><span class="p" data-group-id="2905550604-2">(</span><span class="n">via</span><span class="w"> </span><span class="n">unicode</span><span class="w"> </span><span class="nc">NFKD</span><span class="p" data-group-id="2905550604-2">)</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">shell</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">ascii___symbols</span><span class="o">=</span><span class="sc">&#39;replaced with _&#39;</span><span class="w">
          </span><span class="n">ascii__controls</span><span class="o">=</span><span class="sc">&#39;dropped (this example uses </span><span class="se">\t</span><span class="sc">)&#39;</span><span class="w">
          </span><span class="n">nonascii__characters</span><span class="o">=</span><span class="n">dropped</span><span class="w">
          </span><span class="n">effort_expended_to_preserve_accented_latin_letters</span><span class="o">=</span><span class="sc">&#39;moderate (via unicode NFKD)&#39;</span></code></pre><p>   Encode shell variables: empty values, arrays and maps</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Empty</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">variables</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">skipped</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">empty</span><span class="p">:</span><span class="w">
            </span><span class="ss">value</span><span class="p">:</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4626139923-1">[</span><span class="p" data-group-id="4626139923-1">]</span><span class="w">
            </span><span class="ss">map</span><span class="p">:</span><span class="w">   </span><span class="p" data-group-id="4626139923-2">{</span><span class="p" data-group-id="4626139923-2">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">shell</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">empty_value</span><span class="o">=</span></code></pre><p>   Encode shell variables: single quotes in values</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Single</span><span class="w"> </span><span class="n">quotes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="err">`</span><span class="err">“</span><span class="sc">&#39;“’ (close single quote, double-quoted single quote, open single quote).

   Given a sample.yml file of:

          name: Miles O&#39;</span><span class="nc">Brien</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">shell</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">name</span><span class="o">=</span><span class="sc">&#39;Miles O&#39;</span><span class="s">&quot;&#39;&quot;</span><span class="sc">&#39;Brien&#39;</span></code></pre><p>TOML</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Decode</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="nc">TOML</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">outputting</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">TOML</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="p" data-group-id="1295995846-1">(</span><span class="ow">and</span><span class="w"> </span><span class="n">therefore</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">roundtrip</span><span class="p" data-group-id="1295995846-1">)</span></code></pre><p>   Parse: Simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="nc">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="w">
          </span><span class="nc">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">A</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="w">
          </span><span class="ss">B</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span></code></pre><p>   Parse: Deep paths</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;12 cat st&quot;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">person</span><span class="p">:</span><span class="w">
            </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">hello</span><span class="w">
            </span><span class="ss">address</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">st</span></code></pre><p>   Encode: Scalar</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="w">
          </span><span class="n">person</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;12 cat st&quot;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.person.name&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="n">hello</span></code></pre><p>   Parse: inline table</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5313467326-1">{</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Tom&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Preston-Werner&quot;</span><span class="w"> </span><span class="p" data-group-id="5313467326-1">}</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">name</span><span class="p">:</span><span class="w">
            </span><span class="ss">first</span><span class="p">:</span><span class="w"> </span><span class="nc">Tom</span><span class="w">
            </span><span class="ss">last</span><span class="p">:</span><span class="w"> </span><span class="nc">Preston</span><span class="o">-</span><span class="nc">Werner</span></code></pre><p>   Parse: Array Table</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="3078686123-1">[</span><span class="n">owner</span><span class="o">.</span><span class="n">contact</span><span class="p" data-group-id="3078686123-1">]</span><span class="w">
          </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Tom Preston-Werner&quot;</span><span class="w">
          </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">36</span><span class="w">

          </span><span class="p" data-group-id="3078686123-2">[</span><span class="p" data-group-id="3078686123-3">[</span><span class="n">owner</span><span class="o">.</span><span class="n">addresses</span><span class="p" data-group-id="3078686123-3">]</span><span class="p" data-group-id="3078686123-2">]</span><span class="w">
          </span><span class="n">street</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;first street&quot;</span><span class="w">
          </span><span class="n">suburb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ok&quot;</span><span class="w">

          </span><span class="p" data-group-id="3078686123-4">[</span><span class="p" data-group-id="3078686123-5">[</span><span class="n">owner</span><span class="o">.</span><span class="n">addresses</span><span class="p" data-group-id="3078686123-5">]</span><span class="p" data-group-id="3078686123-4">]</span><span class="w">
          </span><span class="n">street</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;second street&quot;</span><span class="w">
          </span><span class="n">suburb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;nice&quot;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">owner</span><span class="p">:</span><span class="w">
            </span><span class="ss">contact</span><span class="p">:</span><span class="w">
              </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Tom</span><span class="w"> </span><span class="nc">Preston</span><span class="o">-</span><span class="nc">Werner</span><span class="w">
              </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="w">
            </span><span class="ss">addresses</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">street</span><span class="p">:</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">street</span><span class="w">
                </span><span class="ss">suburb</span><span class="p">:</span><span class="w"> </span><span class="n">ok</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">street</span><span class="p">:</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">street</span><span class="w">
                </span><span class="ss">suburb</span><span class="p">:</span><span class="w"> </span><span class="n">nice</span></code></pre><p>   Parse: Empty Table</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="p" data-group-id="5920576942-1">[</span><span class="n">dependencies</span><span class="p" data-group-id="5920576942-1">]</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">toml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">dependencies</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5920576942-2">{</span><span class="p" data-group-id="5920576942-2">}</span></code></pre><p>XML</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Encode</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">decode</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="nc">XML</span><span class="o">.</span><span class="w">  </span><span class="nc">Whitespace</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">conserved</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">round</span><span class="w"> </span><span class="n">trips</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">are</span><span class="o">.</span><span class="w">

   </span><span class="nc">Consecutive</span><span class="w"> </span><span class="n">xml</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span><span class="w">

   </span><span class="nc">XML</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">directives</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">plain</span><span class="w"> </span><span class="n">fields</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">controlled</span><span class="w"> </span><span class="ss">by</span><span class="p">:</span><span class="w">

   </span><span class="nc">Flag</span><span class="w">                      </span><span class="nc">Default</span><span class="w">                    </span><span class="nc">Sample</span><span class="w"> </span><span class="nc">XML</span><span class="w">
   </span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">attribute</span><span class="o">-</span><span class="n">prefix</span><span class="w">    </span><span class="o">+</span><span class="w"> </span><span class="p" data-group-id="1597214261-1">(</span><span class="n">changing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">+</span><span class="err">@</span><span class="w"> </span><span class="n">soon</span><span class="p" data-group-id="1597214261-1">)</span><span class="w">    </span><span class="nc">Legs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">&lt;</span><span class="n">cat</span><span class="w"> </span><span class="n">legs</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">name</span><span class="w">        </span><span class="o">+</span><span class="n">content</span><span class="w">                   </span><span class="nc">Meow</span><span class="w">    </span><span class="ow">in</span><span class="w">    </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="nc">Meow</span><span class="w">
                                                        </span><span class="o">&lt;</span><span class="n">fur</span><span class="o">&gt;</span><span class="no">true</span><span class="o">&lt;</span><span class="o">/</span><span class="no">true</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">directive</span><span class="o">-</span><span class="n">name</span><span class="w">      </span><span class="o">+</span><span class="n">directive</span><span class="w">                 </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">system</span><span class="w">
                                                        </span><span class="s">&quot;blah&quot;</span><span class="o">&gt;</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">proc</span><span class="o">-</span><span class="n">inst</span><span class="o">-</span><span class="n">prefix</span><span class="w">    </span><span class="o">+</span><span class="n">p_</span><span class="w">                        </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="sc">?&gt;</span><span class="w">

   </span><span class="p" data-group-id="1597214261-2">{</span><span class="p">%</span><span class="w"> </span><span class="n">hint</span><span class="w"> </span><span class="n">style</span><span class="o">=</span><span class="err">“</span><span class="n">warning</span><span class="err">”</span><span class="w"> </span><span class="p">%</span><span class="p" data-group-id="1597214261-2">}</span><span class="w"> </span><span class="nc">Default</span><span class="w"> </span><span class="nc">Attribute</span><span class="w"> </span><span class="nc">Prefix</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">v4</span><span class="o">.</span><span class="mi">30</span><span class="o">!</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">conflicts</span><span class="w"> </span><span class="p" data-group-id="1597214261-3">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="err">“</span><span class="n">content</span><span class="err">”</span><span class="w"> </span><span class="n">will</span><span class="w">  </span><span class="n">create</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">field</span><span class="w">  </span><span class="n">that</span><span class="w">
   </span><span class="n">clashes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">“</span><span class="o">+</span><span class="n">content</span><span class="err">”</span><span class="p" data-group-id="1597214261-3">)</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">“</span><span class="o">+</span><span class="err">@</span><span class="err">”</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">affect</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">roundtripping</span><span class="w"> </span><span class="nc">XML</span><span class="w"> </span><span class="n">changes</span><span class="o">.</span><span class="w">

   </span><span class="p" data-group-id="1597214261-4">{</span><span class="p">%</span><span class="w"> </span><span class="n">endhint</span><span class="w"> </span><span class="p">%</span><span class="p" data-group-id="1597214261-4">}</span></code></pre><p>   Encoder / Decoder flag options</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w"> </span><span class="n">addition</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">xml</span><span class="w"> </span><span class="n">encoder</span><span class="o">/</span><span class="n">decoder</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">controlled</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="ss">flags</span><span class="p">:</span><span class="w">

   </span><span class="nc">Flag</span><span class="w">                      </span><span class="nc">Default</span><span class="w">                    </span><span class="nc">Description</span><span class="w">
   </span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">strict</span><span class="o">-</span><span class="n">mode</span><span class="w">         </span><span class="no">false</span><span class="w">                      </span><span class="nc">Strict</span><span class="w">   </span><span class="n">mode</span><span class="w">  </span><span class="n">enforces</span><span class="w">
                                                        </span><span class="n">the</span><span class="w"> </span><span class="n">requirements</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w">
                                                        </span><span class="nc">XML</span><span class="w">      </span><span class="n">specification</span><span class="o">.</span><span class="w">
                                                        </span><span class="nc">When</span><span class="w">  </span><span class="n">switched</span><span class="w">  </span><span class="n">off</span><span class="w"> </span><span class="n">the</span><span class="w">
                                                        </span><span class="n">parser</span><span class="w">   </span><span class="n">allows</span><span class="w">   </span><span class="n">input</span><span class="w">
                                                        </span><span class="n">containing</span><span class="w">  </span><span class="n">common</span><span class="w"> </span><span class="n">mis</span><span class="err">‐</span><span class="w">
                                                        </span><span class="n">takes</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="nc">Golang</span><span class="w">
                                                        </span><span class="n">xml</span><span class="w">             </span><span class="n">decoder</span><span class="w">
                                                        </span><span class="err">⟨</span><span class="n">https</span><span class="ss">://</span><span class="n">pkg</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">dev</span><span class="o">/</span><span class="n">en</span><span class="err">‐</span><span class="w">
                                                        </span><span class="n">coding</span><span class="o">/</span><span class="n">xml</span><span class="c1">#Decoder⟩ for</span><span class="w">
                                                        </span><span class="n">more</span><span class="w"> </span><span class="n">details</span><span class="o">.</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">keep</span><span class="o">-</span><span class="n">namespace</span><span class="w">      </span><span class="no">true</span><span class="w">                       </span><span class="nc">Keeps</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespace</span><span class="w">  </span><span class="n">of</span><span class="w">
                                                        </span><span class="n">attributes</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">raw</span><span class="o">-</span><span class="n">token</span><span class="w">           </span><span class="no">true</span><span class="w">                       </span><span class="nc">Does</span><span class="w">  </span><span class="ow">not</span><span class="w">  </span><span class="n">verify</span><span class="w">  </span><span class="n">that</span><span class="w">
                                                        </span><span class="n">start</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">end</span><span class="w">  </span><span class="n">elements</span><span class="w">
                                                        </span><span class="n">match</span><span class="w">   </span><span class="ow">and</span><span class="w">   </span><span class="n">does</span><span class="w">  </span><span class="ow">not</span><span class="w">
                                                        </span><span class="n">translate</span><span class="w">  </span><span class="n">name</span><span class="w">   </span><span class="n">space</span><span class="w">
                                                        </span><span class="n">prefixes</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">cor</span><span class="err">‐</span><span class="w">
                                                        </span><span class="n">responding</span><span class="w"> </span><span class="nc">URLs</span><span class="o">.</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">skip</span><span class="o">-</span><span class="n">proc</span><span class="o">-</span><span class="n">inst</span><span class="w">      </span><span class="no">false</span><span class="w">                      </span><span class="nc">Skips</span><span class="w">  </span><span class="n">over</span><span class="w">  </span><span class="n">processing</span><span class="w">
                                                        </span><span class="n">instructions</span><span class="p">,</span><span class="w">
                                                        </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w">         </span><span class="n">ver</span><span class="err">‐</span><span class="w">
                                                        </span><span class="n">sion</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="sc">?&gt;</span><span class="w">
   </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">skip</span><span class="o">-</span><span class="n">directives</span><span class="w">     </span><span class="no">false</span><span class="w">                      </span><span class="nc">Skips</span><span class="w"> </span><span class="n">over</span><span class="w">  </span><span class="n">directives</span><span class="p">,</span><span class="w">
                                                        </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w">   </span><span class="n">config</span><span class="w">
                                                        </span><span class="n">system</span><span class="w"> </span><span class="s">&quot;blah&quot;</span><span class="o">&gt;</span><span class="w">

   </span><span class="nc">See</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">examples</span></code></pre><p>   Parse xml: simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Notice</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">strings</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">fix</span><span class="w"> </span><span class="n">that</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">says</span><span class="o">&gt;</span><span class="n">meow</span><span class="o">&lt;</span><span class="o">/</span><span class="n">says</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">legs</span><span class="o">&gt;</span><span class="mi">4</span><span class="o">&lt;</span><span class="o">/</span><span class="n">legs</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">cute</span><span class="o">&gt;</span><span class="no">true</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cute</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">+</span><span class="ss">p_xml</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="ss">says</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span><span class="w">
            </span><span class="ss">cute</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span></code></pre><p>   Parse xml: number</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">All</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="nc">XML</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">from_yaml</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">autoparse</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">says</span><span class="o">&gt;</span><span class="n">meow</span><span class="o">&lt;</span><span class="o">/</span><span class="n">says</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">legs</span><span class="o">&gt;</span><span class="mi">4</span><span class="o">&lt;</span><span class="o">/</span><span class="n">legs</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">cute</span><span class="o">&gt;</span><span class="no">true</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cute</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39; (.. | select(tag == &quot;!!str&quot;)) |= from_yaml&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">+</span><span class="ss">p_xml</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="ss">says</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
            </span><span class="ss">cute</span><span class="p">:</span><span class="w"> </span><span class="no">true</span></code></pre><p>   Parse xml: array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Consecutive</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">identical</span><span class="w"> </span><span class="n">xml</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">arrays</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">animal</span><span class="o">&gt;</span><span class="n">cat</span><span class="o">&lt;</span><span class="o">/</span><span class="n">animal</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">animal</span><span class="o">&gt;</span><span class="n">goat</span><span class="o">&lt;</span><span class="o">/</span><span class="n">animal</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">+</span><span class="ss">p_xml</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="w">
          </span><span class="ss">animal</span><span class="p">:</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span><span class="w">
            </span><span class="o">-</span><span class="w"> </span><span class="n">goat</span></code></pre><p>   Parse xml: force as an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w"> </span><span class="nc">XML</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">yq</span><span class="w"> </span><span class="n">doesn</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">consistently</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">handles</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">scenarios</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">having</span><span class="w">  </span><span class="n">nothing</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">multiple</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">zoo</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="n">animal</span><span class="o">&gt;</span><span class="n">cat</span><span class="o">&lt;</span><span class="o">/</span><span class="n">animal</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">zoo</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.zoo.animal |= ([] + .)&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">zoo</span><span class="p">:</span><span class="w">
            </span><span class="ss">animal</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cat</span></code></pre><p>   Parse xml: force all as an array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">zoo</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="n">thing</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="n">frog</span><span class="o">&gt;</span><span class="n">boing</span><span class="o">&lt;</span><span class="o">/</span><span class="n">frog</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">thing</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">zoo</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.. |= [] + .&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">-</span><span class="w"> </span><span class="ss">zoo</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="ss">thing</span><span class="p">:</span><span class="w">
                  </span><span class="o">-</span><span class="w"> </span><span class="ss">frog</span><span class="p">:</span><span class="w">
                      </span><span class="o">-</span><span class="w"> </span><span class="n">boing</span></code></pre><p>   Parse xml: attributes</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Attributes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">converted</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fields</span><span class="p">,</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="err">`</span><span class="o">+</span><span class="sc">&#39;.  Use ’–xml-attribute-prefix` to set your own.

   Given a sample.xml file of:

          &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
          &lt;cat legs=&quot;4&quot;&gt;
            &lt;legs&gt;7&lt;/legs&gt;
          &lt;/cat&gt;

   then

          yq -oy &#39;</span><span class="o">.</span><span class="err">&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">+</span><span class="ss">p_xml</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="o">+</span><span class="na">@legs</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span><span class="w">
            </span><span class="ss">legs</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7&quot;</span></code></pre><p>   Parse xml: attributes with content</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Content</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">+</span><span class="n">content</span><span class="o">.</span><span class="w">  </span><span class="nc">Use</span><span class="w"> </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">own</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="w"> </span><span class="n">legs</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="o">&gt;</span><span class="n">meow</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">+</span><span class="ss">p_xml</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="o">+</span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="n">meow</span><span class="w">
            </span><span class="o">+</span><span class="na">@legs</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span></code></pre><p>   Parse xml: content split between comments/children</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Multiple</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">texts</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">collected</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sequence</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">root</span><span class="o">&gt;</span><span class="w">  </span><span class="n">value</span><span class="w">  </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">comment</span><span class="o">--</span><span class="o">&gt;</span><span class="n">anotherValue</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="n">frog</span><span class="o">&lt;</span><span class="o">/</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cool!</span><span class="o">&lt;</span><span class="o">/</span><span class="n">root</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="ss">root</span><span class="p">:</span><span class="w">
            </span><span class="o">+</span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="c1"># comment</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">anotherValue</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">cool!</span><span class="w">
            </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">frog</span></code></pre><p>   Parse xml: custom dtd</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">DTD</span><span class="w"> </span><span class="n">entities</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">processed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">directives</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="p" data-group-id="4245796436-1">[</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">ENTITY</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="s">&quot;Blah.&quot;</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">ENTITY</span><span class="w"> </span><span class="n">copyright</span><span class="w"> </span><span class="s">&quot;Blah&quot;</span><span class="o">&gt;</span><span class="w">
          </span><span class="p" data-group-id="4245796436-1">]</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">root</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">item</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="n">writer</span><span class="p">;</span><span class="o">&amp;</span><span class="n">copyright</span><span class="p">;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">item</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">root</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="p" data-group-id="4245796436-2">[</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">ENTITY</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="s">&quot;Blah.&quot;</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">ENTITY</span><span class="w"> </span><span class="n">copyright</span><span class="w"> </span><span class="s">&quot;Blah&quot;</span><span class="o">&gt;</span><span class="w">
          </span><span class="p" data-group-id="4245796436-2">]</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">root</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">item</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">writer</span><span class="p">;</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">copyright</span><span class="p">;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">item</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">root</span><span class="o">&gt;</span></code></pre><p>   Parse xml: skip custom dtd</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">DTDs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">directives</span><span class="p">,</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">directives</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="nc">DTDs</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="p" data-group-id="8925156118-1">[</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">ENTITY</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="s">&quot;Blah.&quot;</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">ENTITY</span><span class="w"> </span><span class="n">copyright</span><span class="w"> </span><span class="s">&quot;Blah&quot;</span><span class="o">&gt;</span><span class="w">
          </span><span class="p" data-group-id="8925156118-1">]</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">root</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">item</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="n">writer</span><span class="p">;</span><span class="o">&amp;</span><span class="n">copyright</span><span class="p">;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">item</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">root</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">skip</span><span class="o">-</span><span class="n">directives</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">root</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">item</span><span class="o">&gt;</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">writer</span><span class="p">;</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">copyright</span><span class="p">;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">item</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">root</span><span class="o">&gt;</span></code></pre><p>   Parse xml: with comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">best</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">preserve</span><span class="w"> </span><span class="n">comments</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">3</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">multi</span><span class="w">
          </span><span class="n">line</span><span class="w"> </span><span class="n">comment</span><span class="w">
          </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">x</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">y</span><span class="o">&gt;</span><span class="w">
                  </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
                  </span><span class="o">&lt;</span><span class="n">d</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="n">z</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">d</span><span class="o">&gt;</span><span class="w">

                  </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">/</span><span class="n">y</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">in_cat_after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">oy</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="c1"># before cat</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="c1"># in cat before</span><span class="w">
            </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="c1"># multi</span><span class="w">
            </span><span class="c1"># line comment</span><span class="w">
            </span><span class="c1"># for x</span><span class="w">
            </span><span class="c1"># before y</span><span class="w">

            </span><span class="ss">y</span><span class="p">:</span><span class="w">
              </span><span class="c1"># in y before</span><span class="w">
              </span><span class="c1"># in d before</span><span class="w">
              </span><span class="ss">d</span><span class="p">:</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="c1"># in d after</span><span class="w">
              </span><span class="c1"># in y after</span><span class="w">
            </span><span class="c1"># in_cat_after</span><span class="w">
          </span><span class="c1"># after cat</span></code></pre><p>   Parse xml: keep attribute namespace</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">map</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;some-namespace&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="ss">:xsi</span><span class="o">=</span><span class="s">&quot;some-instance&quot;</span><span class="w"> </span><span class="n">xsi</span><span class="ss">:schemaLocation</span><span class="o">=</span><span class="s">&quot;some-url&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">map</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">keep</span><span class="o">-</span><span class="n">namespace</span><span class="o">=</span><span class="no">false</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">map</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;some-namespace&quot;</span><span class="w"> </span><span class="n">xsi</span><span class="o">=</span><span class="s">&quot;some-instance&quot;</span><span class="w"> </span><span class="n">schemaLocation</span><span class="o">=</span><span class="s">&quot;some-url&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">map</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">map</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;some-namespace&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="ss">:xsi</span><span class="o">=</span><span class="s">&quot;some-instance&quot;</span><span class="w"> </span><span class="n">xsi</span><span class="ss">:schemaLocation</span><span class="o">=</span><span class="s">&quot;some-url&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">map</span><span class="o">&gt;</span></code></pre><p>   Parse xml: keep raw attribute namespace</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">map</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;some-namespace&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="ss">:xsi</span><span class="o">=</span><span class="s">&quot;some-instance&quot;</span><span class="w"> </span><span class="n">xsi</span><span class="ss">:schemaLocation</span><span class="o">=</span><span class="s">&quot;some-url&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">map</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">--</span><span class="n">xml</span><span class="o">-</span><span class="n">raw</span><span class="o">-</span><span class="n">token</span><span class="o">=</span><span class="no">false</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">map</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;some-namespace&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="ss">:xsi</span><span class="o">=</span><span class="s">&quot;some-instance&quot;</span><span class="w"> </span><span class="n">some</span><span class="o">-</span><span class="n">instance</span><span class="ss">:schemaLocation</span><span class="o">=</span><span class="s">&quot;some-url&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">map</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">map</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;some-namespace&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="ss">:xsi</span><span class="o">=</span><span class="s">&quot;some-instance&quot;</span><span class="w"> </span><span class="n">xsi</span><span class="ss">:schemaLocation</span><span class="o">=</span><span class="s">&quot;some-url&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">map</span><span class="o">&gt;</span></code></pre><p>   Encode xml: simple</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="n">purrs</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">xml</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="n">purrs</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span></code></pre><p>   Encode xml: array</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">pets</span><span class="p">:</span><span class="w">
            </span><span class="ss">cat</span><span class="p">:</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">purrs</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">meows</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">xml</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">pets</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="n">purrs</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="n">meows</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">pets</span><span class="o">&gt;</span></code></pre><p>   Encode xml: attributes</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Fields</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">xml</span><span class="o">-</span><span class="n">attribute</span><span class="o">-</span><span class="n">prefix</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">attributes</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="o">+</span><span class="na">@name</span><span class="p">:</span><span class="w"> </span><span class="n">tiger</span><span class="w">
            </span><span class="ss">meows</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">xml</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">cat</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;tiger&quot;</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">meows</span><span class="o">&gt;</span><span class="no">true</span><span class="o">&lt;</span><span class="o">/</span><span class="n">meows</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span></code></pre><p>   Encode xml: attributes with content</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Fields</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">xml</span><span class="o">-</span><span class="n">content</span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="ss">cat</span><span class="p">:</span><span class="w">
            </span><span class="o">+</span><span class="na">@name</span><span class="p">:</span><span class="w"> </span><span class="n">tiger</span><span class="w">
            </span><span class="o">+</span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="n">cool</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">xml</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="n">cat</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;tiger&quot;</span><span class="o">&gt;</span><span class="n">cool</span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span></code></pre><p>   Encode xml: comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">best</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">xml</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="c1">#</span><span class="w">
          </span><span class="c1"># header comment</span><span class="w">
          </span><span class="c1"># above_cat</span><span class="w">
          </span><span class="c1">#</span><span class="w">
          </span><span class="ss">cat</span><span class="p">:</span><span class="w"> </span><span class="c1"># inline_cat</span><span class="w">
            </span><span class="c1"># above_array</span><span class="w">
            </span><span class="ss">array</span><span class="p">:</span><span class="w"> </span><span class="c1"># inline_array</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">val1</span><span class="w"> </span><span class="c1"># inline_val1</span><span class="w">
              </span><span class="c1"># above_val2</span><span class="w">
              </span><span class="o">-</span><span class="w"> </span><span class="n">val2</span><span class="w"> </span><span class="c1"># inline_val2</span><span class="w">
          </span><span class="c1"># below_cat</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">xml</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w">
          </span><span class="n">header</span><span class="w"> </span><span class="n">comment</span><span class="w">
          </span><span class="n">above_cat</span><span class="w">
          </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">inline_cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">above_array</span><span class="w"> </span><span class="n">inline_array</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="n">val1</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">inline_val1</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">array</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">above_val2</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="n">val2</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">inline_val2</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">array</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">below_cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span></code></pre><p>   Encode: doctype and xml declaration</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">xml</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="o">/</span><span class="n">modify</span><span class="w"> </span><span class="n">proc</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">directives</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">+</span><span class="ss">p_xml</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w">
          </span><span class="o">+</span><span class="ss">directive</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;DOCTYPE config SYSTEM &quot;/etc/iwatch/iwatch.dtd&quot; &#39;</span><span class="w">
          </span><span class="ss">apple</span><span class="p">:</span><span class="w">
            </span><span class="o">+</span><span class="ss">p_coolioo</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w">
            </span><span class="o">+</span><span class="ss">directive</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;CATYPE meow purr puss &#39;</span><span class="w">
            </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">things</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="o">=</span><span class="n">xml</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">yml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="nc">SYSTEM</span><span class="w"> </span><span class="s">&quot;/etc/iwatch/iwatch.dtd&quot;</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">apple</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="sc">?c</span><span class="n">oolioo</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="nc">CATYPE</span><span class="w"> </span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w"> </span><span class="n">puss</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="n">things</span><span class="o">&lt;</span><span class="o">/</span><span class="n">b</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">apple</span><span class="o">&gt;</span></code></pre><p>   Round trip: with comments</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">best</span><span class="w"> </span><span class="n">effort</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">made</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">positions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">white</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">preserved</span><span class="w"> </span><span class="n">perfectly</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">3</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">multi</span><span class="w">
          </span><span class="n">line</span><span class="w"> </span><span class="n">comment</span><span class="w">
          </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">x</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">y</span><span class="o">&gt;</span><span class="w">
                  </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
                  </span><span class="o">&lt;</span><span class="n">d</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="n">z</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">d</span><span class="o">&gt;</span><span class="w">

                  </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">/</span><span class="n">y</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">in_cat_after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">cat</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">3</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">multi</span><span class="w">
          </span><span class="n">line</span><span class="w"> </span><span class="n">comment</span><span class="w">
          </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">x</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">y</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">before</span><span class="w">
          </span><span class="ow">in</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
              </span><span class="o">&lt;</span><span class="n">d</span><span class="o">&gt;</span><span class="n">z</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="n">d</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="o">/</span><span class="n">y</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="n">in_cat_after</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">cat</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="o">--</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span></code></pre><p>   Roundtrip: with doctype and declaration</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">yq</span><span class="w"> </span><span class="n">parses</span><span class="w"> </span><span class="nc">XML</span><span class="w"> </span><span class="n">proc</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">directives</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">nodes</span><span class="o">.</span><span class="w">  </span><span class="nc">Unfortunately</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="nc">XML</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="n">loses</span><span class="w"> </span><span class="n">whitespace</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="nc">SYSTEM</span><span class="w"> </span><span class="s">&quot;/etc/iwatch/iwatch.dtd&quot;</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">apple</span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="sc">?c</span><span class="n">oolioo</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">CATYPE</span><span class="w"> </span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w"> </span><span class="n">puss</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="n">things</span><span class="o">&lt;</span><span class="o">/</span><span class="n">b</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">apple</span><span class="o">&gt;</span><span class="w">

   </span><span class="n">then</span><span class="w">

          </span><span class="n">yq</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="n">sample</span><span class="o">.</span><span class="n">xml</span><span class="w">

   </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w">

          </span><span class="o">&lt;</span><span class="sc">?x</span><span class="n">ml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">!</span><span class="nc">DOCTYPE</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="nc">SYSTEM</span><span class="w"> </span><span class="s">&quot;/etc/iwatch/iwatch.dtd&quot;</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">apple</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="sc">?c</span><span class="n">oolioo</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="sc">?&gt;</span><span class="o">&lt;</span><span class="o">!</span><span class="nc">CATYPE</span><span class="w"> </span><span class="n">meow</span><span class="w"> </span><span class="n">purr</span><span class="w"> </span><span class="n">puss</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
            </span><span class="o">&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="n">things</span><span class="o">&lt;</span><span class="o">/</span><span class="n">b</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="o">/</span><span class="n">apple</span><span class="o">&gt;</span></code></pre><p>AUTHORS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Mike</span><span class="w"> </span><span class="nc">Farah</span><span class="o">.</span><span class="w">

                                                                                                                                                                                     </span><span class="nc">YQ</span><span class="p" data-group-id="8212106984-1">(</span><span class="mi">1</span><span class="p" data-group-id="8212106984-1">)</span></code></pre>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="yamllint.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
yamllint
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="zbackup.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
zbackup
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Manpages v3.0.0">


    <title>lxc.container.conf — Manpages v3.0.0</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-23381D40.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>
<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Manpages" />
        </a>

      <div>
        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v3.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="MANUALS"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Manpages</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>lxc.container.conf</h1>


  </div>


<p>lxc.container.conf(5)                                                                                                                                                    lxc.container.conf(5)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">lxc</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">LXC</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">well</span><span class="o">-</span><span class="n">known</span><span class="w">  </span><span class="ow">and</span><span class="w"> </span><span class="n">heavily</span><span class="w"> </span><span class="n">tested</span><span class="w"> </span><span class="n">low</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="nc">Linux</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">runtime</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">development</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">2008</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">proven</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">critical</span><span class="w"> </span><span class="n">production</span><span class="w"> </span><span class="n">environments</span><span class="w"> </span><span class="n">world</span><span class="o">-</span><span class="w">
   </span><span class="n">wide</span><span class="o">.</span><span class="w"> </span><span class="nc">Some</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">contributors</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">people</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">helped</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">well</span><span class="o">-</span><span class="n">known</span><span class="w"> </span><span class="n">containerization</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Linux</span><span class="w"> </span><span class="n">kernel</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC</span><span class="sc">&#39;s main focus is system containers. That is, containers which offer an environment as close as possible as the one you&#39;</span><span class="n">d</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">VM</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">overhead</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">run</span><span class="err">‐</span><span class="w">
   </span><span class="n">ning</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">simulating</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hardware</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">achieved</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">combination</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">namespaces</span><span class="p">,</span><span class="w"> </span><span class="n">mandatory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">groups</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">unprivileged</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w"> </span><span class="nc">Unprivileged</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">privilege</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="ow">in</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">kernel</span><span class="w">  </span><span class="n">that</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">on</span><span class="o">.</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">unprivileged</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mainline</span><span class="w"> </span><span class="n">kernel</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w">  </span><span class="n">essence</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">isolate</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GIDs</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">achieved</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">establishing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GIDs</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="p" data-group-id="8764959876-1">(</span><span class="n">unprivileged</span><span class="p" data-group-id="8764959876-1">)</span><span class="w">
   </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GIDs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">translate</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GIDs</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">you</span><span class="w">  </span><span class="n">would</span><span class="w">  </span><span class="n">expect</span><span class="w">  </span><span class="n">from</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">host</span><span class="w">
   </span><span class="n">whereas</span><span class="w">  </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="nc">UIDs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GIDs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">fact</span><span class="w"> </span><span class="n">unprivileged</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">
   </span><span class="nc">The</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">gathered</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">corresponding</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">man</span><span class="w"> </span><span class="n">page</span><span class="o">.</span><span class="w">  </span><span class="nc">UID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">GID</span><span class="w"> </span><span class="n">mappings</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">idmap</span><span class="w"> </span><span class="n">key</span><span class="o">.</span><span class="w">

   </span><span class="nc">Linux</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w"> </span><span class="nc">Each</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">fitting</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="s">&quot;#&quot;</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w">  </span><span class="n">is</span><span class="w">
   </span><span class="n">a</span><span class="w"> </span><span class="n">comment</span><span class="o">.</span><span class="w"> </span><span class="nc">List</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">cgroups</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">previously</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC</span><span class="w">  </span><span class="n">namespaces</span><span class="w">  </span><span class="n">configuration</span><span class="w">  </span><span class="n">keys</span><span class="w">  </span><span class="kn">use</span><span class="w">  </span><span class="n">single</span><span class="w">  </span><span class="n">dots</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w">  </span><span class="n">means</span><span class="w">  </span><span class="n">complex</span><span class="w">  </span><span class="n">configuration</span><span class="w">  </span><span class="n">keys</span><span class="w">  </span><span class="n">such</span><span class="w">  </span><span class="n">as</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="n">expose</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">subkeys</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">link</span><span class="p">,</span><span class="w">
   </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">address</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">others</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">fine</span><span class="o">-</span><span class="n">grained</span><span class="w"> </span><span class="n">configuration</span><span class="o">.</span></code></pre><p>   CONFIGURATION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ease</span><span class="w"> </span><span class="n">administration</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">containers</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">instance</span><span class="p">,</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">configura</span><span class="err">‐</span><span class="w">
   </span><span class="n">tion</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w"> </span><span class="nc">Then</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">moved</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">updated</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">include</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">format</span><span class="o">.</span></code></pre><p>   ARCHITECTURE</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Allows</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">32</span><span class="n">bits</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="mi">32</span><span class="n">bits</span><span class="w"> </span><span class="n">binaries</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">64</span><span class="n">bits</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">fixes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">scripts</span><span class="w">
   </span><span class="n">which</span><span class="w"> </span><span class="n">rely</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="9095307641-1">do</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">downloading</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">packages</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">arch</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

          </span><span class="nc">Some</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">x86</span><span class="p">,</span><span class="w"> </span><span class="n">i686</span><span class="p">,</span><span class="w"> </span><span class="n">x86_64</span><span class="p">,</span><span class="w"> </span><span class="n">amd64</span></code></pre><p>   HOSTNAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">utsname</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">defines</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">That</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w"> </span><span class="nc">That</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="err">‐</span><span class="w">
   </span><span class="n">name</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">uts</span><span class="o">.</span><span class="n">name</span><span class="w">
          </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span></code></pre><p>   HALT SIGNAL</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Allows</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cleanly</span><span class="w"> </span><span class="n">shutdown</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Different</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">systems</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">signals</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">clean</span><span class="w">
   </span><span class="n">shutdown</span><span class="w"> </span><span class="n">sequence</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">kill</span><span class="p" data-group-id="6628744742-1">(</span><span class="mi">1</span><span class="p" data-group-id="6628744742-1">)</span><span class="w"> </span><span class="n">fashion</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">  </span><span class="nc">SIGPWR</span><span class="p">,</span><span class="w"> </span><span class="nc">SIGRTMIN</span><span class="o">+</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="nc">SIGRTMAX</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">plain</span><span class="w"> </span><span class="n">number</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nc">SIGPWR</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">halt</span><span class="w">
          </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">halt</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span></code></pre><p>   REBOOT SIGNAL</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Allows</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reboot</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">kill</span><span class="p" data-group-id="9288775592-1">(</span><span class="mi">1</span><span class="p" data-group-id="9288775592-1">)</span><span class="w"> </span><span class="n">fashion</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">  </span><span class="nc">SIGTERM</span><span class="p">,</span><span class="w"> </span><span class="nc">SIGRTMIN</span><span class="o">+</span><span class="mi">14</span><span class="p">,</span><span class="w">  </span><span class="nc">SIGRTMAX</span><span class="o">-</span><span class="mi">10</span><span class="w">  </span><span class="ow">or</span><span class="w">  </span><span class="n">plain</span><span class="w">
   </span><span class="n">number</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nc">SIGINT</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">reboot</span><span class="w">
          </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reboot</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span></code></pre><p>   STOP SIGNAL</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Allows</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">forcibly</span><span class="w"> </span><span class="n">shutdown</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">kill</span><span class="p" data-group-id="2484702431-1">(</span><span class="mi">1</span><span class="p" data-group-id="2484702431-1">)</span><span class="w"> </span><span class="n">fashion</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="nc">SIGKILL</span><span class="p">,</span><span class="w"> </span><span class="nc">SIGRTMIN</span><span class="o">+</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="nc">SIGRTMAX</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="ow">or</span><span class="w">
   </span><span class="n">plain</span><span class="w"> </span><span class="n">number</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nc">SIGKILL</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">stop</span><span class="w">
          </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span></code></pre><p>   INIT COMMAND</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">execute</span><span class="o">.</span><span class="n">cmd</span><span class="w">
          </span><span class="nc">Absolute</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">mostly</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">sense</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">execute</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">cmd</span><span class="w">
          </span><span class="nc">Absolute</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">init</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">mostly</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">sense</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">start</span><span class="o">.</span><span class="w"> </span><span class="nc">Default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">init</span><span class="o">.</span></code></pre><p>   INIT WORKING DIRECTORY</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">absolute</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w">  </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">init</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">cwd</span><span class="w">
          </span><span class="nc">Absolute</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span></code></pre><p>   INIT ID</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Sets</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="nc">UID</span><span class="o">/</span><span class="nc">GID</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">system</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">subsequent</span><span class="w"> </span><span class="n">commands</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">root</span><span class="w"> </span><span class="nc">UID</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">booting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">privileges</span><span class="o">.</span><span class="w">
   </span><span class="nc">Setting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">UID</span><span class="o">/</span><span class="nc">GID</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">mostly</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w">  </span><span class="nc">Defaults</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="nc">UID</span><span class="p" data-group-id="2003901980-1">(</span><span class="mi">0</span><span class="p" data-group-id="2003901980-1">)</span><span class="p">,</span><span class="w"> </span><span class="nc">GID</span><span class="p" data-group-id="2003901980-2">(</span><span class="mi">0</span><span class="p" data-group-id="2003901980-2">)</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">uid</span><span class="w">
          </span><span class="nc">UID</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">init</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">gid</span><span class="w">
          </span><span class="nc">GID</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">init</span><span class="o">.</span></code></pre><p>   CORE SCHEDULING</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Core</span><span class="w"> </span><span class="n">scheduling</span><span class="w"> </span><span class="n">defines</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">payload</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">marked</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">schedulable</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">core</span><span class="o">.</span><span class="w"> </span><span class="nc">Doing</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">scheduler</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">tasks</span><span class="w"> </span><span class="n">that</span><span class="w">  </span><span class="n">are</span><span class="w">  </span><span class="ow">not</span><span class="w">  </span><span class="ow">in</span><span class="w">  </span><span class="n">the</span><span class="w">
   </span><span class="n">same</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">never</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">simultaneously</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">core</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">serve</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">measure</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">prevent</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">payload</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cross</span><span class="w"> </span><span class="n">hyper</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="n">attacks</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">sched</span><span class="o">.</span><span class="n">core</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">scheduling</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">one</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">scheduling</span><span class="w"> </span><span class="n">domain</span><span class="w">
          </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span></code></pre><p>   PROC</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Configure</span><span class="w"> </span><span class="n">proc</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">proc</span><span class="o">.</span><span class="p" data-group-id="2058488366-1">[</span><span class="n">proc</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="2058488366-1">]</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">proc</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">listed</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="nc">PID</span><span class="o">/</span><span class="o">.</span><span class="w">  </span><span class="ss">Example</span><span class="p">:</span><span class="w">

                        </span><span class="n">lxc</span><span class="o">.</span><span class="n">proc</span><span class="o">.</span><span class="n">oom_score_adj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span></code></pre><p>   EPHEMERAL</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Allows</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">destroyed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">shutdown</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">ephemeral</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">destroy</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">shutdown</span><span class="o">.</span></code></pre><p>   NETWORK</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w">  </span><span class="n">network</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">defines</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">virtualized</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">virtualization</span><span class="w"> </span><span class="n">acts</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="n">two</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">virtualization</span><span class="p">,</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="n">must</span><span class="w">
   </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Several</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="ow">in</span><span class="err">‐</span><span class="w">
   </span><span class="n">terface</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="w">
          </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">options</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-1">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-1">]</span><span class="o">.</span><span class="n">type</span><span class="w">
          </span><span class="n">specify</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">virtualization</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">Must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">option</span><span class="p" data-group-id="4155059973-2">(</span><span class="n">s</span><span class="p" data-group-id="4155059973-2">)</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">net</span><span class="w"> </span><span class="n">device</span><span class="o">.</span><span class="w">  </span><span class="nc">Multiple</span><span class="w"> </span><span class="n">networks</span><span class="w"> </span><span class="n">can</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">specified</span><span class="w">
          </span><span class="n">by</span><span class="w">  </span><span class="n">using</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="o">*</span><span class="w"> </span><span class="n">keys</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">networks</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">type</span><span class="o">.</span><span class="w"> </span><span class="nc">All</span><span class="w"> </span><span class="n">keys</span><span class="w">
          </span><span class="n">sharing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">treated</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">belonging</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">network</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">br0</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">belong</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="w">  </span><span class="nc">Currently</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">different</span><span class="w">  </span><span class="n">virtual</span><span class="err">‐</span><span class="w">
          </span><span class="n">ization</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="ss">be</span><span class="p">:</span><span class="w">

          </span><span class="ss">empty</span><span class="p">:</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">loopback</span><span class="w"> </span><span class="n">interface</span><span class="o">.</span><span class="w">

          </span><span class="ss">veth</span><span class="p">:</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">ethernet</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-3">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-3">]</span><span class="o">.</span><span class="n">veth</span><span class="o">.</span><span class="n">mode</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="n">par</span><span class="err">‐</span><span class="w">
          </span><span class="n">ent</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">accepted</span><span class="w"> </span><span class="n">modes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">router</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specified</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">attached</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">speci</span><span class="err">‐</span><span class="w">
          </span><span class="n">fied</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-4">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-4">]</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">attached</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">bridge</span><span class="o">.</span><span class="w">  </span><span class="nc">Otherwise</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bridge</span><span class="w">  </span><span class="n">has</span><span class="w">
          </span><span class="n">to</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">created</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="w"> </span><span class="n">won</span><span class="sc">&#39;t handle any configuration outside of the container.  In router mode static routes are created on the host
          for the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">IP</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="n">pointing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="n">interface</span><span class="o">.</span><span class="w">  </span><span class="nc">Additionally</span><span class="w"> </span><span class="nc">Proxy</span><span class="w"> </span><span class="nc">ARP</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Proxy</span><span class="w"> </span><span class="nc">NDP</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">gate</span><span class="err">‐</span><span class="w">
          </span><span class="n">way</span><span class="w"> </span><span class="nc">IPs</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reach</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">chooses</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">belonging</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">outside</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w">
          </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">wish</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">yourselves</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-5">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-5">]</span><span class="o">.</span><span class="n">veth</span><span class="o">.</span><span class="n">pair</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="p" data-group-id="4155059973-6">(</span><span class="n">except</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">unprivileged</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">this</span><span class="w">  </span><span class="n">option</span><span class="w">
          </span><span class="n">is</span><span class="w">  </span><span class="n">ignored</span><span class="w">  </span><span class="k">for</span><span class="w">  </span><span class="n">security</span><span class="w"> </span><span class="n">reasons</span><span class="p" data-group-id="4155059973-6">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Static</span><span class="w"> </span><span class="n">routes</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">pointing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-7">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-7">]</span><span class="o">.</span><span class="n">veth</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">route</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-8">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-8">]</span><span class="o">.</span><span class="n">veth</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">route</span><span class="w"> </span><span class="n">op</span><span class="err">‐</span><span class="w">
          </span><span class="n">tions</span><span class="o">.</span><span class="w">  </span><span class="nc">Several</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">routes</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">in</span><span class="w">  </span><span class="n">format</span><span class="w">  </span><span class="n">x</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">t</span><span class="o">/</span><span class="n">m</span><span class="p">,</span><span class="w">  </span><span class="n">eg</span><span class="o">.</span><span class="w">  </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span><span class="o">.</span><span class="w">   </span><span class="nc">In</span><span class="w">  </span><span class="n">bridge</span><span class="w">  </span><span class="n">mode</span><span class="w">  </span><span class="n">untagged</span><span class="w">  </span><span class="nc">VLAN</span><span class="w">  </span><span class="n">membership</span><span class="w">  </span><span class="n">can</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">set</span><span class="w">  </span><span class="k">with</span><span class="w">  </span><span class="n">the</span><span class="w">
          </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-9">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-9">]</span><span class="o">.</span><span class="n">veth</span><span class="o">.</span><span class="n">vlan</span><span class="o">.</span><span class="n">id</span><span class="w">  </span><span class="n">option</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w">  </span><span class="n">accepts</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">special</span><span class="w">  </span><span class="n">value</span><span class="w">  </span><span class="n">of</span><span class="w">  </span><span class="sc">&#39;none&#39;</span><span class="w"> </span><span class="n">indicating</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">removed</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bridge</span><span class="sc">&#39;s default untagged VLAN.  The
          lxc.net.[i].veth.vlan.tagged.id option can be specified multiple times to set the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">membership</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">tagged</span><span class="w"> </span><span class="nc">VLANs</span><span class="o">.</span><span class="w">

          </span><span class="ss">vlan</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">vlan</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">linked</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-10">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-10">]</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">assigned</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w">  </span><span class="n">vlan</span><span class="w">  </span><span class="n">identifier</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">specified</span><span class="w">  </span><span class="k">with</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">option</span><span class="w">
          </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-11">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-11">]</span><span class="o">.</span><span class="n">vlan</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="w">

          </span><span class="ss">macvlan</span><span class="p">:</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">macvlan</span><span class="w">  </span><span class="n">interface</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">linked</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-12">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-12">]</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-13">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-13">]</span><span class="o">.</span><span class="n">macvlan</span><span class="o">.</span><span class="n">mode</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">macvlan</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">communicate</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">macvlan</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">upper</span><span class="w"> </span><span class="n">device</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">accepted</span><span class="w"> </span><span class="n">modes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">private</span><span class="p">,</span><span class="w"> </span><span class="n">vepa</span><span class="p">,</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">passthru</span><span class="o">.</span><span class="w">   </span><span class="nc">In</span><span class="w">  </span><span class="n">private</span><span class="w">  </span><span class="n">mode</span><span class="p">,</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">device</span><span class="w">
          </span><span class="n">never</span><span class="w">  </span><span class="n">communicates</span><span class="w">  </span><span class="k">with</span><span class="w">  </span><span class="n">any</span><span class="w">  </span><span class="n">other</span><span class="w">  </span><span class="n">device</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">upper_dev</span><span class="w"> </span><span class="p" data-group-id="4155059973-14">(</span><span class="n">default</span><span class="p" data-group-id="4155059973-14">)</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">vepa</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nc">Virtual</span><span class="w"> </span><span class="nc">Ethernet</span><span class="w"> </span><span class="nc">Port</span><span class="w"> </span><span class="nc">Aggregator</span><span class="w"> </span><span class="p" data-group-id="4155059973-15">(</span><span class="nc">VEPA</span><span class="p" data-group-id="4155059973-15">)</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">assumes</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">adjacent</span><span class="w">
          </span><span class="n">bridge</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">macvlan</span><span class="w"> </span><span class="n">port</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reflective</span><span class="w"> </span><span class="n">relay</span><span class="o">.</span><span class="w"> </span><span class="nc">Broadcast</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">coming</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">from</span><span class="w">  </span><span class="n">the</span><span class="w">
          </span><span class="n">upper_dev</span><span class="w">  </span><span class="n">get</span><span class="w">  </span><span class="n">flooded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">macvlan</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">VEPA</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">delivered</span><span class="w"> </span><span class="n">locally</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">provides</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">behavior</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">dif</span><span class="err">‐</span><span class="w">
          </span><span class="n">ferent</span><span class="w"> </span><span class="n">macvlan</span><span class="w"> </span><span class="n">interfaces</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">port</span><span class="o">.</span><span class="w"> </span><span class="nc">Frames</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">delivered</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">externally</span><span class="o">.</span><span class="w"> </span><span class="nc">Broadcast</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">flooded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w">
          </span><span class="n">other</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">ports</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">external</span><span class="w"> </span><span class="n">interface</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">come</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reflective</span><span class="w"> </span><span class="n">relay</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">don</span><span class="sc">&#39;t deliver them again. Since we know all the MAC addresses, the macvlan
          bridge mode does not require learning or STP like the bridge module does. In passthru mode, all frames received by the physical interface are forwarded to  the  macvlan  inter‐
          face. Only one macvlan interface in passthru mode is possible for one physical interface.

          ipvlan: an ipvlan interface is linked with the interface specified by the lxc.net.[i].link and assigned to the container.  lxc.net.[i].ipvlan.mode specifies the mode the ipvlan
          will  use  to  communicate  between different ipvlan on the same upper device. The accepted modes are l3, l3s and l2. It defaults to l3 mode.  In l3 mode TX processing up to L3
          happens on the stack instance attached to the dependent device and packets are switched to the stack instance of the parent device for the L2 processing and routing  from  that
          instance  will be used before packets are queued on the outbound device. In this mode the dependent devices will not receive nor can send multicast / broadcast traffic.  In l3s
          mode TX processing is very similar to the L3 mode except that iptables (conn-tracking) works in this mode and hence it is L3-symmetric (L3s).  This will have slightly less per‐
          formance but that shouldn&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">matter</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">choosing</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">plain</span><span class="o">-</span><span class="nc">L3</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">conn</span><span class="o">-</span><span class="n">tracking</span><span class="w"> </span><span class="n">work</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">l2</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="nc">TX</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">happens</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span><span class="w">  </span><span class="n">instance</span><span class="w">  </span><span class="n">at</span><span class="err">‐</span><span class="w">
          </span><span class="n">tached</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependent</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">packets</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">switched</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">queued</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">out</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependent</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="nc">RX</span><span class="o">/</span><span class="nc">TX</span><span class="w"> </span><span class="n">multicast</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">broad</span><span class="err">‐</span><span class="w">
          </span><span class="n">cast</span><span class="w"> </span><span class="p" data-group-id="4155059973-16">(</span><span class="k">if</span><span class="w"> </span><span class="n">applicable</span><span class="p" data-group-id="4155059973-16">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="p" data-group-id="4155059973-17">[</span><span class="n">i</span><span class="p" data-group-id="4155059973-17">]</span><span class="o">.</span><span class="n">ipvlan</span><span class="o">.</span><span class="n">isolation</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">isolation</span><span class="w"> </span><span class="n">mode</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">accepted</span><span class="w"> </span><span class="n">isolation</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">bridge</span><span class="p">,</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">vepa</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">defaults</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">bridge</span><span class="o">.</span><span class="w">
          </span><span class="nc">In</span><span class="w">  </span><span class="n">bridge</span><span class="w">  </span><span class="n">isolation</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">dependent</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">cross</span><span class="o">-</span><span class="n">talk</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="n">themselves</span><span class="w"> </span><span class="n">apart</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">talking</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">device</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">isolation</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">private</span><span class="w">
          </span><span class="n">mode</span><span class="o">.</span><span class="w">  </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">won</span><span class="sc">&#39;t allow cross communication between dependent devices.  In vepa isolation mode the port is set in VEPA mode.  i.e. port will offload switching  functional‐
          ity to the external entity as described in 802.1Qbg.

          phys: an already existing interface specified by the lxc.net.[i].link is assigned to the container.

   lxc.net.[i].flags
          Specify an action to do for the network.

          up: activates the interface.

   lxc.net.[i].link
          Specify the interface to be used for real network traffic.

   lxc.net.[i].l2proxy
          Controls whether layer 2 IP neighbour proxy entries will be added to the lxc.net.[i].link interface for the IP addresses of the container.  Can be set to 0 or 1. Defaults to 0.
          When  used with IPv4 addresses, the following sysctl values need to be set: net.ipv4.conf.[link].forwarding=1 When used with IPv6 addresses, the following sysctl values need to
          be set: net.ipv6.conf.[link].proxy_ndp=1 net.ipv6.conf.[link].forwarding=1

   lxc.net.[i].mtu
          Specify the maximum transfer unit for this interface.

   lxc.net.[i].name
          The interface name is dynamically allocated, but if another name is needed because the configuration files being used by the container use a generic name, eg. eth0, this option
          will rename the interface in the container.

   lxc.net.[i].hwaddr
          The interface mac address is dynamically allocated by default to the virtual interface, but in some cases, this is needed to resolve a mac address conflict or  to  always  have
          the same link-local ipv6 address. Any &quot;x&quot; in address will be replaced by random value, this allows setting hwaddr templates.

   lxc.net.[i].ipv4.address
          Specify  the  ipv4 address to assign to the virtualized interface.  Several lines specify several ipv4 addresses. The address is in format x.y.z.t/m, eg. 192.168.1.123/24.  You
          can optionally specify the broadcast address after the IP address, e.g. 192.168.1.123/24 255.255.255.255.  Otherwise it is automatically calculated from the IP address.

   lxc.net.[i].ipv4.gateway
          Specify the ipv4 address to use as the gateway inside the container. The address is in format x.y.z.t, eg. 192.168.1.123.  Can also have the special value auto, which means  to
          take  the  primary  address  from  the  bridge  interface (as specified by the lxc.net.[i].link option) and use that as the gateway. auto is only available when using the veth,
          macvlan and ipvlan network types.  Can also have the special value of dev, which means to set the default gateway as a device route.  This is primarily for  use  with  layer  3
          network modes, such as IPVLAN.

   lxc.net.[i].ipv6.address
          Specify   the   ipv6   address   to   assign   to   the  virtualized  interface.  Several  lines  specify  several  ipv6  addresses.  The  address  is  in  format  x::y/m,  eg.
          2003:db8:1:0:214:1234:fe0b:3596/64

   lxc.net.[i].ipv6.gateway
          Specify the ipv6 address to use as the gateway inside the container. The address is in format x::y, eg. 2003:db8:1:0::1 Can also have the special value  auto,  which  means  to
          take  the  primary  address  from  the  bridge  interface (as specified by the lxc.net.[i].link option) and use that as the gateway. auto is only available when using the veth,
          macvlan and ipvlan network types.  Can also have the special value of dev, which means to set the default gateway as a device route.  This is primarily for  use  with  layer  3
          network modes, such as IPVLAN.

   lxc.net.[i].script.up
          Add a configuration option to specify a script to be executed after creating and configuring the network used from the host side.

          In addition to the information available to all hooks. The following information is provided to the script:

          • LXC_HOOK_TYPE: the hook type. This is either &#39;</span><span class="n">up</span><span class="sc">&#39; or &#39;</span><span class="n">down</span><span class="sc">&#39;.

          • LXC_HOOK_SECTION: the section type &#39;</span><span class="n">net</span><span class="sc">&#39;.

          • LXC_NET_TYPE: the network type. This is one of the valid network types listed here (e.g. &#39;</span><span class="n">vlan</span><span class="sc">&#39;, &#39;</span><span class="n">macvlan</span><span class="sc">&#39;, &#39;</span><span class="n">ipvlan</span><span class="sc">&#39;, &#39;</span><span class="n">veth</span><span class="sc">&#39;).

          • LXC_NET_PARENT: the parent device on the host. This is only set for network types &#39;</span><span class="n">mavclan</span><span class="sc">&#39;, &#39;</span><span class="n">veth</span><span class="sc">&#39;, &#39;</span><span class="n">phys</span><span class="sc">&#39;.

          • LXC_NET_PEER: the name of the peer device on the host. This is only set for &#39;</span><span class="n">veth</span><span class="sc">&#39; network types. Note that this information is only available when lxc.hook.version is set to
            1.

   Whether  this information is provided in the form of environment variables or as arguments to the script depends on the value of lxc.hook.version. If set to 1 then information is pro‐
   vided in the form of environment variables. If set to 0 information is provided as arguments to the script.

   Standard output from the script is logged at debug level.  Standard error is not logged, but can be captured by the hook redirecting its standard error to standard output.

   lxc.net.[i].script.down
          Add a configuration option to specify a script to be executed before destroying the network used from the host side.

          In addition to the information available to all hooks. The following information is provided to the script:

          • LXC_HOOK_TYPE: the hook type. This is either &#39;</span><span class="n">up</span><span class="sc">&#39; or &#39;</span><span class="n">down</span><span class="sc">&#39;.

          • LXC_HOOK_SECTION: the section type &#39;</span><span class="n">net</span><span class="sc">&#39;.

          • LXC_NET_TYPE: the network type. This is one of the valid network types listed here (e.g. &#39;</span><span class="n">vlan</span><span class="sc">&#39;, &#39;</span><span class="n">macvlan</span><span class="sc">&#39;, &#39;</span><span class="n">ipvlan</span><span class="sc">&#39;, &#39;</span><span class="n">veth</span><span class="sc">&#39;).

          • LXC_NET_PARENT: the parent device on the host. This is only set for network types &#39;</span><span class="n">mavclan</span><span class="sc">&#39;, &#39;</span><span class="n">veth</span><span class="sc">&#39;, &#39;</span><span class="n">phys</span><span class="sc">&#39;.

          • LXC_NET_PEER: the name of the peer device on the host. This is only set for &#39;</span><span class="n">veth</span><span class="err">&#39;</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">types</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">version</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w">
            </span><span class="mi">1</span><span class="o">.</span><span class="w">

   </span><span class="nc">Whether</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">is</span><span class="w">  </span><span class="n">pro</span><span class="err">‐</span><span class="w">
   </span><span class="n">vided</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="o">.</span><span class="w">

   </span><span class="nc">Standard</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">logged</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="w">  </span><span class="nc">Standard</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">logged</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">captured</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">redirecting</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">output</span><span class="o">.</span></code></pre><p>   NEW PSEUDO TTY INSTANCE (DEVPTS)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">For</span><span class="w"> </span><span class="n">stricter</span><span class="w"> </span><span class="n">isolation</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pseudo</span><span class="w"> </span><span class="n">tty</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">pty</span><span class="o">.</span><span class="n">max</span><span class="w">
          </span><span class="nc">If</span><span class="w">  </span><span class="n">set</span><span class="p">,</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">container</span><span class="w">  </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">pseudo</span><span class="w"> </span><span class="n">tty</span><span class="w"> </span><span class="n">instance</span><span class="p">,</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">pseudo</span><span class="w"> </span><span class="n">ttys</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pty</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="p" data-group-id="9800385545-1">(</span><span class="n">this</span><span class="w">
          </span><span class="n">limitation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="n">yet</span><span class="p" data-group-id="9800385545-1">)</span><span class="o">.</span></code></pre><p>   CONTAINER SYSTEM CONSOLE</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">inittab</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">console</span><span class="w"> </span><span class="n">goes</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">size</span><span class="w">
          </span><span class="nc">Setting</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">instructs</span><span class="w"> </span><span class="n">liblxc</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allocate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="ow">in</span><span class="o">-</span><span class="n">memory</span><span class="w"> </span><span class="n">ringbuffer</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s console output will be written to the ringbuffer. Note  that  ringbuffer  must  be  at
          least  as  big as a standard page size. When passed a value smaller than a single page size liblxc will allocate a ringbuffer of a single page size. A page size is usually 4KB.
          The keyword &#39;</span><span class="n">auto</span><span class="sc">&#39; will cause liblxc to allocate a ringbuffer of 128KB.  When manually specifying a size for the ringbuffer the value should be a power of 2 when  converted  to
          bytes.  Valid  size prefixes are &#39;</span><span class="nc">KB</span><span class="sc">&#39;, &#39;</span><span class="nc">MB</span><span class="sc">&#39;, &#39;</span><span class="nc">GB</span><span class="sc">&#39;. (Note that all conversions are based on multiples of 1024. That means &#39;</span><span class="nc">KB</span><span class="sc">&#39; == &#39;</span><span class="nc">KiB</span><span class="sc">&#39;, &#39;</span><span class="nc">MB</span><span class="sc">&#39; == &#39;</span><span class="nc">MiB</span><span class="sc">&#39;, &#39;</span><span class="nc">GB</span><span class="sc">&#39; == &#39;</span><span class="nc">GiB</span><span class="sc">&#39;.  Addition‐
          ally, the case of the suffix is ignored, i.e. &#39;</span><span class="n">kB</span><span class="sc">&#39;, &#39;</span><span class="nc">KB</span><span class="sc">&#39; and &#39;</span><span class="nc">Kb</span><span class="sc">&#39; are treated equally.)

   lxc.console.size
          Setting this option instructs liblxc to place a limit on the size of the console log file specified in lxc.console.logfile. Note that size of the log file must be at  least  as
          big  as  a  standard page size. When passed a value smaller than a single page size liblxc will set the size of log file to a single page size. A page size is usually 4KB.  The
          keyword &#39;</span><span class="n">auto</span><span class="sc">&#39; will cause liblxc to place a limit of 128KB on the log file.  When manually specifying a size for the log file the value should be a power of 2 when converted to
          bytes. Valid size prefixes are &#39;</span><span class="nc">KB</span><span class="sc">&#39;, &#39;</span><span class="nc">MB</span><span class="sc">&#39;, &#39;</span><span class="nc">GB</span><span class="sc">&#39;. (Note that all conversions are based on multiples of 1024. That means &#39;</span><span class="nc">KB</span><span class="sc">&#39; == &#39;</span><span class="nc">KiB</span><span class="sc">&#39;, &#39;</span><span class="nc">MB</span><span class="sc">&#39; == &#39;</span><span class="nc">MiB</span><span class="sc">&#39;, &#39;</span><span class="nc">GB</span><span class="sc">&#39; ==  &#39;</span><span class="nc">GiB</span><span class="sc">&#39;.   Addition‐
          ally, the case of the suffix is ignored, i.e. &#39;</span><span class="n">kB</span><span class="sc">&#39;, &#39;</span><span class="nc">KB</span><span class="sc">&#39; and &#39;</span><span class="nc">Kb</span><span class="sc">&#39; are treated equally.)  If users want to mirror the console ringbuffer on disk they should set lxc.console.size
          equal to lxc.console.buffer.size.

   lxc.console.logfile
          Specify  a  path to a file where the console output will be written.  Note that in contrast to the on-disk ringbuffer logfile this file will keep growing potentially filling up
          the users disks if not rotated and deleted. This problem can also be avoided by using the in-memory ringbuffer options lxc.console.buffer.size and lxc.console.buffer.logfile.

   lxc.console.rotate
          Whether to rotate the console logfile specified in lxc.console.logfile. Users can send an API request to rotate the logfile. Note that the old logfile will have the  same  name
          as  the  original  with the suffix &quot;.1&quot; appended.  Users wishing to prevent the console log file from filling the disk should rotate the logfile and delete it if unneeded. This
          problem can also be avoided by using the in-memory ringbuffer options lxc.console.buffer.size and lxc.console.buffer.logfile.

   lxc.console.path
          Specify a path to a device to which the console will be attached. The keyword &#39;</span><span class="n">none</span><span class="sc">&#39; will simply disable the console. Note, when specifying &#39;</span><span class="n">none</span><span class="sc">&#39; and creating  a  device  node
          for  the  console  in  the  container  at /dev/console or bind-mounting the hosts&#39;</span><span class="n">s</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">console</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">console</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">direct</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">hosts</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">console</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">dangerous</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">thus</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">caution</span><span class="o">.</span></code></pre><p>   CONSOLE THROUGH THE TTYS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">inittab</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">launch</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">getty</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ttys</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">ttys</span><span class="w"> </span><span class="n">to</span><span class="w">  </span><span class="n">be</span><span class="w">
   </span><span class="n">available</span><span class="w">  </span><span class="k">for</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">gettys</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">inittab</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">greater</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">ttys</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">option</span><span class="p">,</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">excess</span><span class="w">
   </span><span class="n">getty</span><span class="w"> </span><span class="n">sessions</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">die</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">respawn</span><span class="w"> </span><span class="n">indefinitely</span><span class="w"> </span><span class="n">giving</span><span class="w"> </span><span class="n">annoying</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">messages</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">tty</span><span class="o">.</span><span class="n">max</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">tty</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span></code></pre><p>   CONSOLE DEVICES LOCATION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">LXC</span><span class="w"> </span><span class="n">consoles</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="nc">Unix98</span><span class="w"> </span><span class="nc">PTYs</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">bind</span><span class="o">-</span><span class="n">mounted</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">bind</span><span class="o">-</span><span class="n">mounted</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">console</span><span class="w"> </span><span class="ow">and</span><span class="w">
   </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyN</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">prevent</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">upgrades</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">guest</span><span class="o">.</span><span class="w"> </span><span class="nc">Therefore</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="p" data-group-id="3454919337-1">(</span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">bind</span><span class="o">-</span><span class="n">mount</span><span class="w">  </span><span class="n">over</span><span class="w">  </span><span class="n">them</span><span class="o">.</span><span class="w">
   </span><span class="nc">These</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">symbolically</span><span class="w"> </span><span class="n">linked</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">console</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyN</span><span class="o">.</span><span class="w">  </span><span class="nc">A</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">succeed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">symbolic</span><span class="w"> </span><span class="n">links</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">tty</span><span class="o">.</span><span class="n">dir</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">directory</span><span class="w">  </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">console</span><span class="w"> </span><span class="n">devices</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">bind</span><span class="o">-</span><span class="n">mounts</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">console</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">direc</span><span class="err">‐</span><span class="w">
          </span><span class="n">tory</span><span class="o">.</span></code></pre><p>   /DEV DIRECTORY</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">few</span><span class="w"> </span><span class="n">symbolic</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="p" data-group-id="8131704303-1">(</span><span class="n">fd</span><span class="p">,</span><span class="n">stdin</span><span class="p">,</span><span class="n">stdout</span><span class="p">,</span><span class="n">stderr</span><span class="p" data-group-id="8131704303-1">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s /dev directory but does not automatically create device node entries.  This  allows  the  con‐
   tainer&#39;</span><span class="n">s</span><span class="w">  </span><span class="o">/</span><span class="n">dev</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">rootfs</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">autodev</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fresh</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="p" data-group-id="8131704303-2">(</span><span class="n">limited</span><span class="w">
   </span><span class="n">to</span><span class="w"> </span><span class="mi">500</span><span class="nc">K</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="k">unless</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">autodev</span><span class="o">.</span><span class="n">tmpfs</span><span class="o">.</span><span class="n">size</span><span class="p" data-group-id="8131704303-2">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">minimal</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">devices</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">generally</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w">  </span><span class="n">containing</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="s">&quot;sys‐
   temd&quot;</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="s">&quot;init&quot;</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">times</span><span class="o">.</span><span class="w"> </span><span class="nc">Additional</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">autodev</span><span class="w"> </span><span class="n">hook</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">autodev</span><span class="w">
          </span><span class="nc">Set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">populating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">minimal</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">autodev</span><span class="o">.</span><span class="n">tmpfs</span><span class="o">.</span><span class="n">size</span><span class="w">
          </span><span class="nc">Set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="n">tmpfs</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">500000</span><span class="w"> </span><span class="p" data-group-id="8131704303-3">(</span><span class="mi">500</span><span class="nc">K</span><span class="p" data-group-id="8131704303-3">)</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="o">.</span></code></pre><p>   MOUNT POINTS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">places</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">mounted</span><span class="o">.</span><span class="w"> </span><span class="nc">These</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">won</span><span class="sc">&#39;t be visible by the processes running outside of the
   container. This is useful to mount /etc, /var or /home for examples.

   NOTE  -  LXC will generally ensure that mount targets and relative bind-mount sources are properly confined under the container root, to avoid attacks involving over-mounting host di‐
   rectories and files. (Symbolic links in absolute mount sources are ignored) However, if the container configuration first mounts a directory which is under the  control  of  the  con‐
   tainer  user, such as /home/joe, into the container at some path, and then mounts under path, then a TOCTTOU attack would be possible where the container user modifies a symbolic link
   under their home directory at just the right time.

   lxc.mount.fstab
          specify a file location in the fstab format, containing the mount information. The mount target location can and in most cases should be a relative path, which will become rel‐
          ative to the mounted container root. For instance,

                       proc proc proc nodev,noexec,nosuid 0 0

          Will mount a proc filesystem under the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="p">,</span><span class="w"> </span><span class="n">regardless</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="n">from</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">resilient</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">backed</span><span class="w"> </span><span class="n">filesystems</span><span class="w">  </span><span class="n">as</span><span class="w">  </span><span class="n">well</span><span class="w">  </span><span class="n">as</span><span class="w">
          </span><span class="n">container</span><span class="w"> </span><span class="n">cloning</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">third</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="p" data-group-id="6502811659-1">(</span><span class="n">fs_vfstype</span><span class="p" data-group-id="6502811659-1">)</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">auto</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">mount</span><span class="p" data-group-id="6502811659-2">(</span><span class="mi">8</span><span class="p" data-group-id="6502811659-2">)</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">specified</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">mount</span><span class="o">.</span><span class="n">entry</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">mount</span><span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">corresponding</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fstab</span><span class="w"> </span><span class="n">format</span><span class="o">.</span><span class="w">  </span><span class="nc">Moreover</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">propagation</span><span class="p">,</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">rshared</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">rprivate</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">adds</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">op</span><span class="err">‐</span><span class="w">
          </span><span class="n">tions</span><span class="o">.</span><span class="w">  </span><span class="n">optional</span><span class="w"> </span><span class="n">don</span><span class="sc">&#39;t fail if mount does not work.  create=dir or create=file to create dir (or file) when the point will be mounted.  relative source path is taken to be rel‐
          ative to the mounted container root. For instance,

                       dev/null proc/kcore none bind,relative 0 0

          Will expand dev/null to ${LXC_ROOTFS_MOUNT}/dev/null, and mount it to proc/kcore inside the container.

   lxc.mount.auto
          specify which standard kernel file systems should be automatically mounted. This may dramatically simplify the configuration. The file systems are:

          • proc:mixed (or proc): mount /proc as read-write, but remount /proc/sys and /proc/sysrq-trigger read-only for security / container isolation purposes.

          • proc:rw: mount /proc as read-write

          • sys:mixed (or sys): mount /sys as read-only but with /sys/devices/virtual/net writable.

          • sys:ro: mount /sys as read-only for security / container isolation purposes.

          • sys:rw: mount /sys as read-write

          • cgroup:mixed: Mount a tmpfs to /sys/fs/cgroup, create directories for all hierarchies to which the container is added, create subdirectories in  those  hierarchies  with  the
            name of the cgroup, and bind-mount the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">directory</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parents</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w">
            </span><span class="n">they</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">remounted</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:mixed</span><span class="ss">:force</span><span class="p">:</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">mounts</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">circumstances</span><span class="o">.</span><span class="w">  </span><span class="nc">Otherwise</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:mixed</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w">
            </span><span class="n">mainly</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">enabled</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">cgroups</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">perfectly</span><span class="w"> </span><span class="n">safe</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="6502811659-3">do</span><span class="w"> </span><span class="n">so</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:ro</span><span class="p">:</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:mixed</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:ro</span><span class="ss">:force</span><span class="p">:</span><span class="w">  </span><span class="nc">The</span><span class="w">  </span><span class="n">force</span><span class="w">  </span><span class="n">option</span><span class="w">  </span><span class="n">will</span><span class="w">  </span><span class="n">cause</span><span class="w">  </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">mounts</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">circumstances</span><span class="o">.</span><span class="w">  </span><span class="nc">Otherwise</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:ro</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w">
            </span><span class="n">mainly</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">enabled</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">cgroups</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">perfectly</span><span class="w"> </span><span class="n">safe</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="6502811659-4">do</span><span class="w"> </span><span class="n">so</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:rw</span><span class="p">:</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cgroup</span><span class="ss">:mixed</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">write</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">leading</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s own cgroup will be writable, but will not  be
            a cgroup filesystem but just part of the tmpfs of /sys/fs/cgroup

          • cgroup:rw:force:  The  force  option  will  cause  LXC to perform the cgroup mounts for the container under all circumstances.  Otherwise it is similar to cgroup:rw.  This is
            mainly useful when the cgroup namespaces are enabled where LXC will normally leave mounting cgroups to the init binary of the container since it is perfectly safe to do so.

          • cgroup (without specifier): defaults to cgroup:rw if the container retains the CAP_SYS_ADMIN capability, cgroup:mixed otherwise.

          • cgroup-full:mixed: mount a tmpfs to /sys/fs/cgroup, create directories for all hierarchies to which the container is added, bind-mount the hierarchies from the  host  to  the
            container  and  make  everything  read-only except the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">cgroup</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">compared</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cgroup</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">leading</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s own cgroup are just
            simple directories in the underlying tmpfs, here /sys/fs/cgroup/$hierarchy will contain the host&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">hierarchy</span><span class="p">,</span><span class="w"> </span><span class="n">albeit</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">outside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s own cgroup.
            This may leak quite a bit of information into the container.

          • cgroup-full:mixed:force: The force option will  cause  LXC  to  perform  the  cgroup  mounts  for  the  container  under  all  circumstances.   Otherwise  it  is  similar  to
            cgroup-full:mixed.   This  is mainly useful when the cgroup namespaces are enabled where LXC will normally leave mounting cgroups to the init binary of the container since it
            is perfectly safe to do so.

          • cgroup-full:ro: similar to cgroup-full:mixed, but everything will be mounted read-only.

          • cgroup-full:ro:force: The force option will cause LXC to perform the cgroup mounts for the container under all circumstances.  Otherwise  it  is  similar  to  cgroup-full:ro.
            This  is mainly useful when the cgroup namespaces are enabled where LXC will normally leave mounting cgroups to the init binary of the container since it is perfectly safe to
            do so.

          • cgroup-full:rw: similar to cgroup-full:mixed, but everything will be mounted read-write. Note that in this case, the container may escape its own cgroup. (Note also  that  if
            the container has CAP_SYS_ADMIN support and can mount the cgroup filesystem itself, it may do so anyway.)

          • cgroup-full:rw:force:  The  force  option  will  cause LXC to perform the cgroup mounts for the container under all circumstances.  Otherwise it is similar to cgroup-full:rw.
            This is mainly useful when the cgroup namespaces are enabled where LXC will normally leave mounting cgroups to the init binary of the container since it is perfectly safe  to
            do so.

          • cgroup-full (without specifier): defaults to cgroup-full:rw if the container retains the CAP_SYS_ADMIN capability, cgroup-full:mixed otherwise.

   If  cgroup  namespaces  are enabled, then any cgroup auto-mounting request will be ignored, since the container can mount the filesystems itself, and automounting can confuse the con‐
   tainer init.

   Note that if automatic mounting of the cgroup filesystem is enabled, the tmpfs under /sys/fs/cgroup will always be mounted read-write (but for the :mixed and :ro cases, the individual
   hierarchies, /sys/fs/cgroup/$hierarchy, will be read-only). This is in order to work around a quirk in Ubuntu&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">mountall</span><span class="p" data-group-id="6502811659-5">(</span><span class="mi">8</span><span class="p" data-group-id="6502811659-5">)</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="k">for</span><span class="w">  </span><span class="n">user</span><span class="w">  </span><span class="n">input</span><span class="w">
   </span><span class="n">at</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">fs</span><span class="o">/</span><span class="n">cgroup</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">remount</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">write</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lack</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">CAP_SYS_ADMIN</span><span class="o">.</span><span class="w">

   </span><span class="ss">Examples</span><span class="p">:</span><span class="w">

                 </span><span class="n">lxc</span><span class="o">.</span><span class="n">mount</span><span class="o">.</span><span class="n">auto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">proc</span><span class="w"> </span><span class="n">sys</span><span class="w"> </span><span class="n">cgroup</span><span class="w">
                 </span><span class="n">lxc</span><span class="o">.</span><span class="n">mount</span><span class="o">.</span><span class="n">auto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">proc</span><span class="ss">:rw</span><span class="w"> </span><span class="n">sys</span><span class="ss">:rw</span><span class="w"> </span><span class="n">cgroup</span><span class="o">-</span><span class="n">full</span><span class="ss">:rw</span></code></pre><p>   ROOT FILE SYSTEM</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">path</span><span class="w">
          </span><span class="n">specify</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">root</span><span class="w">  </span><span class="n">file</span><span class="w">  </span><span class="n">system</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">device</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">shares</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">host</span><span class="o">.</span><span class="w">

          </span><span class="nc">For</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">block</span><span class="o">-</span><span class="n">device</span><span class="w"> </span><span class="n">backed</span><span class="w"> </span><span class="n">containers</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pathname</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">backed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nbd</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">nbd</span><span class="ss">:file</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w">  </span><span class="n">attached</span><span class="w">
          </span><span class="n">to</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">nbd</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">partition</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="o">.</span><span class="w">  </span><span class="n">nbd</span><span class="ss">:file</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nbd</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">mounted</span><span class="o">.</span><span class="w"> </span><span class="n">overlayfs</span><span class="ss">:/</span><span class="n">lower</span><span class="ss">:/</span><span class="n">upper</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">rootfs</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">/</span><span class="n">upper</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">write</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">/</span><span class="n">lower</span><span class="o">.</span><span class="w">  </span><span class="nc">For</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="o">/</span><span class="n">lower</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="o">.</span><span class="w">  </span><span class="n">loop</span><span class="ss">:/</span><span class="n">file</span><span class="w">  </span><span class="n">tells</span><span class="w">
          </span><span class="n">lxc</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">attach</span><span class="w"> </span><span class="o">/</span><span class="n">file</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="n">device</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">mount</span><span class="w">
          </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">recursively</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">pivoting</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pivot_root</span><span class="p" data-group-id="3735473029-1">(</span><span class="mi">8</span><span class="p" data-group-id="3735473029-1">)</span><span class="w"> </span><span class="n">syscall</span><span class="o">.</span><span class="w"> </span><span class="nc">Any</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">suffices</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">generally</span><span class="w"> </span><span class="n">work</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">options</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">extra</span><span class="w">  </span><span class="n">mount</span><span class="w">  </span><span class="n">options</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="kn">use</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">corresponds</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">fstab</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">addition</span><span class="p">,</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">custom</span><span class="w">
          </span><span class="n">idmap</span><span class="o">=</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">idmapped</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s rootfs. This is useful when the user doesn&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">recursively</span><span class="w">  </span><span class="n">chown</span><span class="w">
          </span><span class="n">the</span><span class="w">  </span><span class="n">rootfs</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">idmapping</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">going</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="o">.</span><span class="w"> </span><span class="nc">Instead</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">idmapped</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="k">for</span><span class="w">
          </span><span class="n">idmap</span><span class="o">=</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">pointing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">idmap</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="s">&quot;container&quot;</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">instruct</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">container</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">idmap</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">managed</span><span class="w">
          </span><span class="nc">Set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">indicate</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">managing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">storage</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">storage</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span></code></pre><p>   CONTROL GROUPS (&quot;CGROUPS&quot;)</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">subsystem</span><span class="o">.</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correctness</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subsystem</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">disadvantage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="ow">not</span><span class="w">  </span><span class="n">detecting</span><span class="w">
   </span><span class="n">configuration</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">started</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">advantage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">permitting</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">subsystem</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w">  </span><span class="n">kernel</span><span class="w">  </span><span class="n">implementation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">cgroups</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">changed</span><span class="w"> </span><span class="n">significantly</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">years</span><span class="o">.</span><span class="w"> </span><span class="nc">With</span><span class="w"> </span><span class="nc">Linux</span><span class="w"> </span><span class="mf">4.5</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">usually</span><span class="w"> </span><span class="n">referred</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="s">&quot;cgroup2&quot;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s">&quot;uni‐
   fied hierarchy&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">Since</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">usually</span><span class="w"> </span><span class="n">referred</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="s">&quot;cgroup1&quot;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;legacy hierarchies&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">Please</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroups</span><span class="w"> </span><span class="n">manual</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">detailed</span><span class="w"> </span><span class="n">explanation</span><span class="w"> </span><span class="n">of</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">differences</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">versions</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC</span><span class="w"> </span><span class="n">distinguishes</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">hierarchy</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">prefixes</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">alter</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">controllers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">hierarchy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">pre</span><span class="err">‐</span><span class="w">
   </span><span class="n">fix</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">alter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">hierarchy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">ignore</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="w"> </span><span class="n">set</span><span class="err">‐</span><span class="w">
   </span><span class="n">tings</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">systems</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">hierarchy</span><span class="o">.</span><span class="w"> </span><span class="nc">Conversely</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">ignore</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">systems</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">hierarchies</span><span class="o">.</span><span class="w">

   </span><span class="nc">At</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">hierarchy</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">hierarchically</span><span class="w"> </span><span class="n">organize</span><span class="w"> </span><span class="n">processes</span><span class="o">.</span><span class="w"> </span><span class="nc">Usually</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">hierarchy</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="s">&quot;controllers&quot;</span><span class="w"> </span><span class="n">enabled</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="s">&quot;controller&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">cgroup</span><span class="w">  </span><span class="n">hier</span><span class="err">‐</span><span class="w">
   </span><span class="n">archy</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">usually</span><span class="w">  </span><span class="n">responsible</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">distributing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">along</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hierarchy</span><span class="o">.</span><span class="w"> </span><span class="nc">Controllers</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;pids&quot;</span><span class="w"> </span><span class="n">controller</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;cpu&quot;</span><span class="w"> </span><span class="n">controller</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;memory&quot;</span><span class="w">
   </span><span class="n">controller</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">others</span><span class="o">.</span><span class="w"> </span><span class="nc">Some</span><span class="w"> </span><span class="n">controllers</span><span class="w"> </span><span class="n">however</span><span class="w"> </span><span class="k" data-group-id="4300937489-1">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">fall</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">category</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">distributing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">resource</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">referred</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">as</span><span class="w">  </span><span class="s">&quot;utility&quot;</span><span class="w">  </span><span class="n">controllers</span><span class="o">.</span><span class="w">   </span><span class="nc">One</span><span class="w">
   </span><span class="n">utility</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="o">.</span><span class="w"> </span><span class="nc">Instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">distributing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">manage</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">access</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">hierarchy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">controllers</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="n">to</span><span class="o">.</span><span class="w"> </span><span class="nc">These</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="s">&quot;devices.allow&quot;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="s">&quot;de‐
   vices.deny&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="s">&quot;allowlists&quot;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="s">&quot;denylists&quot;</span><span class="o">.</span><span class="w">

   </span><span class="nc">An</span><span class="w"> </span><span class="n">allowlist</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="s">&quot;allow rules&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">spec</span><span class="err">‐</span><span class="w">
   </span><span class="n">ified</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">contrast</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">restrict</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="s">&quot;deny rules&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">or</span><span class="w">
   </span><span class="n">device</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">cgroup</span><span class="w">  </span><span class="n">hierarchy</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">implementation</span><span class="w">  </span><span class="n">of</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">device</span><span class="w">  </span><span class="n">controller</span><span class="w">  </span><span class="n">has</span><span class="w">  </span><span class="n">completely</span><span class="w">  </span><span class="n">changed</span><span class="o">.</span><span class="w">  </span><span class="nc">Instead</span><span class="w">  </span><span class="n">of</span><span class="w">  </span><span class="n">files</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">read</span><span class="w">  </span><span class="n">from</span><span class="w">  </span><span class="ow">and</span><span class="w">  </span><span class="n">write</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">eBPF</span><span class="w">  </span><span class="n">program</span><span class="w">  </span><span class="n">of</span><span class="w">
   </span><span class="nc">BPF_PROG_TYPE_CGROUP_DEVICE</span><span class="w">  </span><span class="n">can</span><span class="w">  </span><span class="n">be</span><span class="w"> </span><span class="n">attached</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">cgroup</span><span class="o">.</span><span class="w"> </span><span class="nc">Even</span><span class="w"> </span><span class="n">though</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">changed</span><span class="w"> </span><span class="n">completely</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">tries</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">semantics</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">followed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">legacy</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">eBPF</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">paragraphs</span><span class="w"> </span><span class="n">explain</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">semantics</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">eBPF</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="o">.</span><span class="w">

   </span><span class="nc">As</span><span class="w"> </span><span class="n">mentioned</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">eBPF</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="p">;</span><span class="w">  </span><span class="n">only</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">configuration</span><span class="w">  </span><span class="n">key</span><span class="w">
   </span><span class="n">prefix</span><span class="w">  </span><span class="n">has</span><span class="w"> </span><span class="n">changed</span><span class="o">.</span><span class="w">  </span><span class="nc">Specifically</span><span class="p">,</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="n">whereas</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup2</span><span class="w">
   </span><span class="n">eBPF</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">rule</span><span class="w">

                  </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">

     </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instruct</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">grant</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w">  </span><span class="n">key</span><span class="o">.</span><span class="w">
     </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">referred</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">An</span><span class="w"> </span><span class="n">allowlist</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">rule</span><span class="w">

                  </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">

     </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instruct</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">deny</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">deny</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="n">key</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w">
     </span><span class="n">referred</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;denylist&quot;</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">Specifying</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">aforementioned</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">cleared</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">reset</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">allowlist</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">requested</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">blocked</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">deny</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">ignored</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">requested</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">ignored</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="ss">rules</span><span class="p">:</span><span class="w">

             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="n">rwm</span><span class="w">

   </span><span class="n">implements</span><span class="w">  </span><span class="n">an</span><span class="w">  </span><span class="n">allowlist</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specifically</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">list</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">states</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="ow">and</span><span class="w">
   </span><span class="n">block</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">written</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="ss">rules</span><span class="p">:</span><span class="w">

             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="n">rwm</span><span class="w">

   </span><span class="n">then</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">instruct</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">denylist</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specifically</span><span class="w"> </span><span class="n">denied</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">list</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">states</span><span class="w">  </span><span class="n">that</span><span class="w">
   </span><span class="n">no</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">read</span><span class="p">,</span><span class="w"> </span><span class="n">written</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">created</span><span class="o">.</span><span class="w">

   </span><span class="nc">Now</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">followed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;global rule&quot;</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">determines</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="p" data-group-id="4300937489-2">(</span><span class="n">allowlist</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">denylist</span><span class="p" data-group-id="4300937489-2">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">explained</span><span class="w"> </span><span class="ss">above</span><span class="p">:</span><span class="w">

             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="n">rwm</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">program</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="ss">specify</span><span class="p">:</span><span class="w">

             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">*</span><span class="ss">:*</span><span class="w"> </span><span class="n">m</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="n">rwm</span><span class="w">
             </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">

   </span><span class="n">instead</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">allowlist</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="n">program</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="p" data-group-id="4300937489-3">[</span><span class="n">controller</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="4300937489-3">]</span><span class="o">.</span><span class="p" data-group-id="4300937489-4">[</span><span class="n">controller</span><span class="w"> </span><span class="n">file</span><span class="p" data-group-id="4300937489-4">]</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">control</span><span class="w">  </span><span class="n">group</span><span class="w">  </span><span class="n">value</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">legacy</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">hierarchy</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">literal</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">group</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">permitted</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">of</span><span class="w">
          </span><span class="n">their</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">dictated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">LXC</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Linux</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">started</span><span class="p">,</span><span class="w"> </span><span class="n">eg</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">cpuset</span><span class="o">.</span><span class="n">cpus</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="p" data-group-id="4300937489-5">[</span><span class="n">controller</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="4300937489-5">]</span><span class="o">.</span><span class="p" data-group-id="4300937489-6">[</span><span class="n">controller</span><span class="w"> </span><span class="n">file</span><span class="p" data-group-id="4300937489-6">]</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unified</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">hierarchy</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">literal</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">group</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">permitted</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">syntax</span><span class="w">  </span><span class="n">of</span><span class="w">
          </span><span class="n">their</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">dictated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">LXC</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Linux</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">started</span><span class="p">,</span><span class="w"> </span><span class="n">eg</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup2</span><span class="o">.</span><span class="n">memory</span><span class="o">.</span><span class="n">high</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="w">
          </span><span class="n">specify</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">directory</span><span class="w">  </span><span class="ow">or</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s cgroup will be created. For example, setting lxc.cgroup.dir = my-cgroup/first for a container named &quot;c1&quot; will create the
          container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">cgroup</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s">&quot;my-cgroup&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="sc">&#39;s current cgroup &quot;my-user&quot; is located in the root cgroup of the cpuset controller in a cgroup v1 hi‐
          erarchy this would create the cgroup &quot;/sys/fs/cgroup/cpuset/my-user/my-cgroup/first/c1&quot; for the container. Any missing cgroups will be created by LXC. This presupposes that the
          user has write access to its current cgroup.

   lxc.cgroup.dir.container
          This is similar to lxc.cgroup.dir, but must be used together with lxc.cgroup.dir.monitor and affects only the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">is</span><span class="w">  </span><span class="n">mutually</span><span class="w">  </span><span class="n">exclusive</span><span class="w">  </span><span class="k">with</span><span class="w">
          </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">attaches</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">extended</span><span class="w"> </span><span class="n">further</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">inner</span><span class="w"> </span><span class="n">option</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">monitor</span><span class="w">
          </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">monitor</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">counterpart</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">monitor</span><span class="o">.</span><span class="n">pivot</span><span class="w">
          </span><span class="nc">On</span><span class="w">  </span><span class="n">container</span><span class="w">  </span><span class="n">termination</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">PID</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">monitor</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">attached</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">cgroup</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subpath</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">proper</span><span class="w"> </span><span class="n">re</span><span class="err">‐</span><span class="w">
          </span><span class="n">moval</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">termination</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">inner</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">subdirectory</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="o">.</span><span class="w">  </span><span class="nc">With</span><span class="w">  </span><span class="n">this</span><span class="w">  </span><span class="n">option</span><span class="p">,</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">cgroup</span><span class="w">  </span><span class="n">limits</span><span class="w">  </span><span class="n">will</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">applied</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">outer</span><span class="w">  </span><span class="n">path</span><span class="w">  </span><span class="n">specified</span><span class="w">  </span><span class="ow">in</span><span class="w">
          </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">accessible</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">better</span><span class="w"> </span><span class="n">enforce</span><span class="w"> </span><span class="n">limits</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">privileged</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">override</span><span class="w">
          </span><span class="n">them</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">conjunction</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">container</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">monitor</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">effect</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">relative</span><span class="w">
          </span><span class="nc">Set</span><span class="w">  </span><span class="n">this</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="mi">1</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">instruct</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">never</span><span class="w"> </span><span class="n">escape</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">cgroup</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">easy</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">adhere</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">restrictions</span><span class="w"> </span><span class="n">enforced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">cgroup2</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">systemd</span><span class="o">.</span><span class="w"> </span><span class="nc">Specifically</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w">
          </span><span class="n">makes</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">services</span><span class="o">.</span></code></pre><p>   CAPABILITIES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">dropped</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">root</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">drop</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">dropped</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">defining</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">allowed</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capa</span><span class="err">‐</span><span class="w">
          </span><span class="n">bility</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;CAP_&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">eg</span><span class="o">.</span><span class="w"> </span><span class="nc">CAP_SYS_MODULE</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">sys_module</span><span class="o">.</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">capabilities</span><span class="p" data-group-id="6438295670-1">(</span><span class="mi">7</span><span class="p" data-group-id="6438295670-1">)</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="n">capabil</span><span class="err">‐</span><span class="w">
          </span><span class="n">ities</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">keep</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">kept</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">All</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">dropped</span><span class="o">.</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">encountered</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">keep</span><span class="w">  </span><span class="n">capabilities</span><span class="w">
          </span><span class="n">specified</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="n">alone</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">capabilities</span><span class="o">.</span></code></pre><p>   NAMESPACES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">cloned</span><span class="w"> </span><span class="p" data-group-id="2227084503-1">(</span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">clone</span><span class="p" data-group-id="2227084503-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">kept</span><span class="w"> </span><span class="p" data-group-id="2227084503-2">(</span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">keep</span><span class="p" data-group-id="2227084503-2">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="p" data-group-id="2227084503-3">(</span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="p" data-group-id="2227084503-4">[</span><span class="n">namespace</span><span class="w"> </span><span class="n">identifier</span><span class="p" data-group-id="2227084503-4">]</span><span class="p" data-group-id="2227084503-3">)</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">clone</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">namespaces</span><span class="w">  </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">supposed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">with</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">list</span><span class="o">.</span><span class="w"> </span><span class="nc">Each</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">correspond</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">one</span><span class="w">
          </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">identifiers</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">seen</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="nc">PID</span><span class="o">/</span><span class="n">ns</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">clone</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cur</span><span class="err">‐</span><span class="w">
          </span><span class="n">rent</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">

          </span><span class="nc">To</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">mount</span><span class="p">,</span><span class="w"> </span><span class="n">net</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">ipc</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">clone</span><span class="o">=</span><span class="n">mount</span><span class="w"> </span><span class="n">net</span><span class="w"> </span><span class="n">ipc</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">keep</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">supposed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">list</span><span class="o">.</span><span class="w">  </span><span class="nc">Each</span><span class="w">  </span><span class="n">namespace</span><span class="w">
          </span><span class="n">must</span><span class="w"> </span><span class="n">correspond</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">identifiers</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">seen</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="nc">PID</span><span class="o">/</span><span class="n">ns</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">keep</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="n">option</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">enforc</span><span class="err">‐</span><span class="w">
          </span><span class="n">ing</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">namespaces</span><span class="o">.</span><span class="w">

          </span><span class="nc">To</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">ipc</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">keep</span><span class="o">=</span><span class="n">user</span><span class="w"> </span><span class="n">net</span><span class="w"> </span><span class="n">ipc</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">sharing</span><span class="w"> </span><span class="n">pid</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">systems</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="p" data-group-id="2227084503-5">[</span><span class="n">namespace</span><span class="w"> </span><span class="n">identifier</span><span class="p" data-group-id="2227084503-5">]</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">namespace</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">inherit</span><span class="w">  </span><span class="n">from</span><span class="w">  </span><span class="n">another</span><span class="w">  </span><span class="n">container</span><span class="w">  </span><span class="ow">or</span><span class="w">  </span><span class="n">process</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="p" data-group-id="2227084503-6">[</span><span class="n">namespace</span><span class="w"> </span><span class="n">identifier</span><span class="p" data-group-id="2227084503-6">]</span><span class="w"> </span><span class="n">suffix</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">replaced</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="nc">PID</span><span class="o">/</span><span class="n">ns</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">

          </span><span class="nc">To</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="p" data-group-id="2227084503-7">[</span><span class="n">namespace</span><span class="w"> </span><span class="n">identifier</span><span class="p" data-group-id="2227084503-7">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">PID</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">process</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="n">net</span><span class="o">=</span><span class="mi">42</span><span class="o">.</span><span class="w">

          </span><span class="nc">To</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="p" data-group-id="2227084503-8">[</span><span class="n">namespace</span><span class="w"> </span><span class="n">identifier</span><span class="p" data-group-id="2227084503-8">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="n">pid</span><span class="o">=</span><span class="n">c3</span><span class="o">.</span><span class="w">

          </span><span class="nc">To</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">located</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">liblxc</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="p" data-group-id="2227084503-9">[</span><span class="n">namespace</span><span class="w"> </span><span class="n">identifier</span><span class="p" data-group-id="2227084503-9">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w">
          </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">share</span><span class="o">.</span><span class="n">user</span><span class="o">=</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">c3</span><span class="o">.</span><span class="w">

          </span><span class="nc">In</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">sufficient</span><span class="w"> </span><span class="n">privilege</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">sharing</span><span class="w"> </span><span class="n">pid</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">systems</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">other</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">usually</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">user</span><span class="w">  </span><span class="n">namespace</span><span class="w">  </span><span class="n">as</span><span class="w">
          </span><span class="n">well</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">careful</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nc">LSM</span><span class="p">,</span><span class="w"> </span><span class="n">sharing</span><span class="w"> </span><span class="n">user</span><span class="o">+</span><span class="n">pid</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">escalate</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">calling</span><span class="w"> </span><span class="n">li</span><span class="err">‐</span><span class="w">
          </span><span class="n">blxc</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">offset</span><span class="o">.</span><span class="n">boot</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">positive</span><span class="w">  </span><span class="ow">or</span><span class="w">  </span><span class="n">negative</span><span class="w">  </span><span class="n">offset</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">boottime</span><span class="w"> </span><span class="n">clock</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="p" data-group-id="2227084503-10">(</span><span class="n">h</span><span class="p" data-group-id="2227084503-10">)</span><span class="p">,</span><span class="w"> </span><span class="n">minutes</span><span class="w"> </span><span class="p" data-group-id="2227084503-11">(</span><span class="n">m</span><span class="p" data-group-id="2227084503-11">)</span><span class="p">,</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="p" data-group-id="2227084503-12">(</span><span class="n">s</span><span class="p" data-group-id="2227084503-12">)</span><span class="p">,</span><span class="w"> </span><span class="n">milliseconds</span><span class="w"> </span><span class="p" data-group-id="2227084503-13">(</span><span class="n">ms</span><span class="p" data-group-id="2227084503-13">)</span><span class="p">,</span><span class="w"> </span><span class="n">microseconds</span><span class="w"> </span><span class="p" data-group-id="2227084503-14">(</span><span class="n">us</span><span class="p" data-group-id="2227084503-14">)</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">nanoseconds</span><span class="w">
          </span><span class="p" data-group-id="2227084503-15">(</span><span class="n">ns</span><span class="p" data-group-id="2227084503-15">)</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">offset</span><span class="o">.</span><span class="n">monotonic</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">positive</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">negative</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">monotonic</span><span class="w"> </span><span class="n">clock</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="p" data-group-id="2227084503-16">(</span><span class="n">h</span><span class="p" data-group-id="2227084503-16">)</span><span class="p">,</span><span class="w"> </span><span class="n">minutes</span><span class="w"> </span><span class="p" data-group-id="2227084503-17">(</span><span class="n">m</span><span class="p" data-group-id="2227084503-17">)</span><span class="p">,</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="p" data-group-id="2227084503-18">(</span><span class="n">s</span><span class="p" data-group-id="2227084503-18">)</span><span class="p">,</span><span class="w"> </span><span class="n">milliseconds</span><span class="w"> </span><span class="p" data-group-id="2227084503-19">(</span><span class="n">ms</span><span class="p" data-group-id="2227084503-19">)</span><span class="p">,</span><span class="w">  </span><span class="n">microseconds</span><span class="w">  </span><span class="p" data-group-id="2227084503-20">(</span><span class="n">us</span><span class="p" data-group-id="2227084503-20">)</span><span class="p">,</span><span class="w">  </span><span class="ow">and</span><span class="w">  </span><span class="n">nanoseconds</span><span class="w">
          </span><span class="p" data-group-id="2227084503-21">(</span><span class="n">ns</span><span class="p" data-group-id="2227084503-21">)</span><span class="o">.</span></code></pre><p>   RESOURCE LIMITS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">hard</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">limits</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">changed</span><span class="o">.</span><span class="w">  </span><span class="nc">Unprivileged</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">them</span><span class="o">.</span><span class="w"> </span><span class="nc">Resources</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">inherited</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">prlimit</span><span class="o">.</span><span class="p" data-group-id="0320007171-1">[</span><span class="n">limit</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="0320007171-1">]</span><span class="w">
          </span><span class="nc">Specify</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">resource</span><span class="w">  </span><span class="n">limit</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">set</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">colon</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">numeric</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="sc">&#39;unlimited&#39;</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w">
          </span><span class="n">shortcut</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">hard</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">permitted</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;RLIMIT_&quot;</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">lowercase</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;RLIMIT_&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">eg</span><span class="o">.</span><span class="w"> </span><span class="nc">RLIMIT_NOFILE</span><span class="w"> </span><span class="n">should</span><span class="w">
          </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="s">&quot;nofile&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">setrlimit</span><span class="p" data-group-id="0320007171-2">(</span><span class="mi">2</span><span class="p" data-group-id="0320007171-2">)</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">limi</span><span class="err">‐</span><span class="w">
          </span><span class="n">tation</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">inherited</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span></code></pre><p>   SYSCTL</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Configure</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">sysctl</span><span class="o">.</span><span class="p" data-group-id="8990193379-1">[</span><span class="n">kernel</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="8990193379-1">]</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">listed</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">sysctls</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">namespaced</span><span class="o">.</span><span class="w"> </span><span class="nc">Changing</span><span class="w"> </span><span class="nc">Non</span><span class="o">-</span><span class="n">namespaced</span><span class="w">  </span><span class="n">sysctls</span><span class="w">
          </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="o">-</span><span class="n">wide</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">modified</span><span class="o">.</span><span class="w">  </span><span class="n">sysctl</span><span class="p" data-group-id="8990193379-2">(</span><span class="mi">8</span><span class="p" data-group-id="8990193379-2">)</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span><span class="o">.</span></code></pre><p>   APPARMOR PROFILE</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w">  </span><span class="n">lxc</span><span class="w">  </span><span class="n">was</span><span class="w"> </span><span class="n">compiled</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">support</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">enabled</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">configuration</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">container</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">cgns</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">aware</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">container</span><span class="o">-</span><span class="n">default</span><span class="w"> </span><span class="n">otherwise</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">profile</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">unconfined</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w">

          </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unconfined</span><span class="w">

          </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">remain</span><span class="w"> </span><span class="n">unchanged</span><span class="w"> </span><span class="p" data-group-id="1834730789-1">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">nesting</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">confined</span><span class="p" data-group-id="1834730789-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="kn">use</span><span class="w">

          </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unchanged</span><span class="w">

          </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">instruct</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profile</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="kn">use</span><span class="w">

          </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generated</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">allow_incomplete</span><span class="w">
          </span><span class="nc">Apparmor</span><span class="w"> </span><span class="n">profiles</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">pathname</span><span class="w"> </span><span class="n">based</span><span class="o">.</span><span class="w"> </span><span class="nc">Therefore</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">restrictions</span><span class="w"> </span><span class="kn">require</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">restrictions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">effective</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">determined</span><span class="w"> </span><span class="n">attacker</span><span class="o">.</span><span class="w"> </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">these</span><span class="w">  </span><span class="n">mount</span><span class="w">  </span><span class="n">restric</span><span class="err">‐</span><span class="w">
          </span><span class="n">tions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">upstream</span><span class="w"> </span><span class="n">kernel</span><span class="o">.</span><span class="w"> </span><span class="nc">Without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">restrictions</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profiles</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">protect</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">accidental</span><span class="w"> </span><span class="n">damager</span><span class="o">.</span><span class="w">

          </span><span class="nc">If</span><span class="w">  </span><span class="n">this</span><span class="w">  </span><span class="n">flag</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="p" data-group-id="1834730789-2">(</span><span class="n">default</span><span class="p" data-group-id="1834730789-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">lacks</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">features</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">regression</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">de</span><span class="err">‐</span><span class="w">
          </span><span class="n">tected</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">partial</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">protection</span><span class="p">,</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">allow_nesting</span><span class="w">
          </span><span class="nc">If</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">causes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">changes</span><span class="o">.</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">generated</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profiles</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">necessary</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w">  </span><span class="n">ad</span><span class="err">‐</span><span class="w">
          </span><span class="n">dition</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usual</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">points</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="o">.</span><span class="n">lxc</span><span class="o">/</span><span class="n">proc</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="o">.</span><span class="n">lxc</span><span class="o">/</span><span class="n">sys</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">procfs</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sysfs</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxcfs</span><span class="w"> </span><span class="n">overlays</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">generated</span><span class="w"> </span><span class="n">apparmor</span><span class="w"> </span><span class="n">profiles</span><span class="w">
          </span><span class="n">are</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">read</span><span class="o">/</span><span class="n">writable</span><span class="w"> </span><span class="n">directly</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">apparmor</span><span class="o">.</span><span class="n">raw</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="nc">AppArmor</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">profile</span><span class="o">.</span><span class="w"> </span><span class="nc">Only</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">generated</span><span class="w"> </span><span class="n">profiles</span><span class="o">.</span></code></pre><p>   SELINUX CONTEXT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">compiled</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">support</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">enabled</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w">  </span><span class="n">specified</span><span class="w">  </span><span class="ow">in</span><span class="w">
   </span><span class="n">the</span><span class="w">  </span><span class="n">container</span><span class="w">  </span><span class="n">configuration</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">unconfined_t</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">contexts</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span><span class="n">selinux</span><span class="o">/</span><span class="n">lxc</span><span class="o">.</span><span class="n">te</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">policy</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">more</span><span class="w">
   </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">selinux</span><span class="o">.</span><span class="n">context</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">unconfined_t</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">example</span><span class="w">

          </span><span class="n">lxc</span><span class="o">.</span><span class="n">selinux</span><span class="o">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">system_u</span><span class="ss">:system_r</span><span class="ss">:lxc_t</span><span class="ss">:s0</span><span class="ss">:c22</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">selinux</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">keyring</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">keyring</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">selinux</span><span class="o">.</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w">  </span><span class="n">lxc</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">executed</span><span class="w">  </span><span class="n">under</span><span class="w">  </span><span class="k">if</span><span class="w">
          </span><span class="n">lxc</span><span class="o">.</span><span class="n">selinux</span><span class="o">.</span><span class="n">context</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w">

          </span><span class="n">lxc</span><span class="o">.</span><span class="n">selinux</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">keyring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">system_u</span><span class="ss">:system_r</span><span class="ss">:lxc_t</span><span class="ss">:s0</span><span class="ss">:c22</span></code></pre><p>   KERNEL KEYRING</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w">  </span><span class="nc">Linux</span><span class="w">  </span><span class="nc">Keyring</span><span class="w">  </span><span class="n">facility</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">primarily</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">components</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retain</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="n">encryption</span><span class="w"> </span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w">
   </span><span class="n">default</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">keyring</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">application</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">keyring</span><span class="o">.</span><span class="n">session</span><span class="w">
          </span><span class="nc">Disable</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">creation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">keyring</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">keyring</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">when</span><span class="w">  </span><span class="n">passing</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">value</span><span class="w">  </span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">new</span><span class="w">
          </span><span class="n">keyring</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="o">.</span><span class="w">

          </span><span class="n">lxc</span><span class="o">.</span><span class="n">keyring</span><span class="o">.</span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span></code></pre><p>   SECCOMP CONFIGURATION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">startup</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">first</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">policy</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">followed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configuration</span><span class="o">.</span><span class="w">

   </span><span class="nc">Versions</span><span class="w">  </span><span class="mi">1</span><span class="w">  </span><span class="ow">and</span><span class="w">  </span><span class="mi">2</span><span class="w">  </span><span class="n">are</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">supported</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">policy</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">allowlist</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">therefore</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">one</span><span class="w">
   </span><span class="p" data-group-id="5294101449-1">(</span><span class="n">numeric</span><span class="p" data-group-id="5294101449-1">)</span><span class="w"> </span><span class="n">syscall</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="w"> </span><span class="nc">Each</span><span class="w"> </span><span class="n">syscall</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">allowlisted</span><span class="p">,</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">unlisted</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">denylisted</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">policy</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">allowlist</span><span class="p">,</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">rule</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">policy</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">actions</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">architecture</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">resolution</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">textual</span><span class="w"> </span><span class="n">names</span><span class="o">.</span><span class="w">

   </span><span class="nc">An</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">denylist</span><span class="w"> </span><span class="n">policy</span><span class="p">,</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">mknod</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="k" data-group-id="5294101449-2">do</span><span class="w"> </span><span class="n">nothing</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p" data-group-id="5294101449-3">(</span><span class="n">success</span><span class="p" data-group-id="5294101449-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">looks</span><span class="w"> </span><span class="ss">like</span><span class="p">:</span><span class="w">

         </span><span class="mi">2</span><span class="w">
         </span><span class="n">denylist</span><span class="w">
         </span><span class="n">mknod</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="mi">0</span><span class="w">
         </span><span class="n">ioctl</span><span class="w"> </span><span class="n">notify</span><span class="w">

   </span><span class="nc">Specifying</span><span class="w"> </span><span class="s">&quot;errno&quot;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">caller</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="k" data-group-id="5294101449-2">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;er‐
   rno&quot;</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="n">word</span><span class="o">.</span><span class="w">

   </span><span class="nc">Specifying</span><span class="w"> </span><span class="s">&quot;notify&quot;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">descriptor</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="o">.</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">syscall</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="n">as</span><span class="w">  </span><span class="s">&quot;no‐
   tify&quot;</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">poll</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">descriptor</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">inspect</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">syscalls</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">arguments</span><span class="o">.</span><span class="w"> </span><span class="nc">Based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">this</span><span class="w">
   </span><span class="n">information</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">informing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">take</span><span class="o">.</span><span class="w"> </span><span class="nc">Until</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">calling</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w">  </span><span class="n">format</span><span class="w">
   </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">documented</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">itself</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">seccomp</span><span class="o">.</span><span class="n">profile</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">starts</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">seccomp</span><span class="o">.</span><span class="n">allow_nesting</span><span class="w">
          </span><span class="nc">If</span><span class="w">  </span><span class="n">this</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">filters</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">stacked</span><span class="w"> </span><span class="n">regardless</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">loaded</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">nested</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">load</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">sec</span><span class="err">‐</span><span class="w">
          </span><span class="n">comp</span><span class="w"> </span><span class="n">profile</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">seccomp</span><span class="o">.</span><span class="n">notify</span><span class="o">.</span><span class="n">proxy</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">unix</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">forward</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="n">to</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">unix</span><span class="ss">:/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">socket</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">unix</span><span class="p">:</span><span class="na">@socket</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">former</span><span class="w"> </span><span class="n">specifies</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">path</span><span class="o">-</span><span class="w">
          </span><span class="n">bound</span><span class="w"> </span><span class="n">unix</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">latter</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">abstract</span><span class="w"> </span><span class="n">unix</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">socket</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">seccomp</span><span class="o">.</span><span class="n">notify</span><span class="o">.</span><span class="n">cookie</span><span class="w">
          </span><span class="nc">An</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">along</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">proxied</span><span class="w"> </span><span class="n">seccomp</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">requests</span><span class="o">.</span></code></pre><p>   PR_SET_NO_NEW_PRIVS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">With</span><span class="w">  </span><span class="nc">PR_SET_NO_NEW_PRIVS</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">execve</span><span class="p" data-group-id="1908711886-1">(</span><span class="p" data-group-id="1908711886-1">)</span><span class="w"> </span><span class="n">promises</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">grant</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="1908711886-2">do</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">execve</span><span class="p" data-group-id="1908711886-3">(</span><span class="p" data-group-id="1908711886-3">)</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="p" data-group-id="1908711886-4">(</span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">rendering</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">set</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="w">
   </span><span class="nc">ID</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">set</span><span class="o">-</span><span class="n">group</span><span class="o">-</span><span class="nc">ID</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">bits</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">functional</span><span class="p" data-group-id="1908711886-4">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Once</span><span class="w"> </span><span class="n">set</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">bit</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">unset</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">bit</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">inherited</span><span class="w">  </span><span class="n">by</span><span class="w">  </span><span class="n">children</span><span class="w">  </span><span class="n">created</span><span class="w">  </span><span class="n">by</span><span class="w">  </span><span class="n">fork</span><span class="p" data-group-id="1908711886-5">(</span><span class="p" data-group-id="1908711886-5">)</span><span class="w">  </span><span class="ow">and</span><span class="w">
   </span><span class="n">clone</span><span class="p" data-group-id="1908711886-6">(</span><span class="p" data-group-id="1908711886-6">)</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">preserved</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">execve</span><span class="p" data-group-id="1908711886-7">(</span><span class="p" data-group-id="1908711886-7">)</span><span class="o">.</span><span class="w">  </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="nc">PR_SET_NO_NEW_PRIVS</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">applied</span><span class="w"> </span><span class="k" data-group-id="1908711886-2">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">changed</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">intended</span><span class="w"> </span><span class="nc">AppArmor</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">SElinux</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">no_new_privs</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">PR_SET_NO_NEW_PRIVS</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">activate</span><span class="o">.</span></code></pre><p>   UID MAPPINGS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="n">mappings</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">instance</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">userid</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">userid</span><span class="w"> </span><span class="mi">200000</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">user</span><span class="w">
   </span><span class="ow">in</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">container</span><span class="w">  </span><span class="n">will</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">privileged</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">unprivileged</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w"> </span><span class="nc">Normally</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">ids</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">instance</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">and</span><span class="w">
   </span><span class="n">group</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="mi">000</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">idmap</span><span class="w">
          </span><span class="nc">Four</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">provided</span><span class="o">.</span><span class="w"> </span><span class="nc">First</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">character</span><span class="p">,</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="sc">&#39;u&#39;</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="sc">&#39;g&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">mapped</span><span class="o">.</span><span class="w"> </span><span class="nc">Next</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">userid</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">seen</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">user</span><span class="w">  </span><span class="n">name</span><span class="err">‐</span><span class="w">
          </span><span class="n">space</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Next</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">userid</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">seen</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w"> </span><span class="nc">Finally</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">indicating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">consecutive</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">map</span><span class="o">.</span></code></pre><p>   CONTAINER HOOKS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Container</span><span class="w"> </span><span class="n">hooks</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">programs</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">scripts</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s lifetime.

   When a container hook is executed, additional information is passed along. The lxc.hook.version argument can be used to determine if the following arguments are passed as command line
   arguments or through environment variables. The arguments are:

   • Container name.

   • Section (always &#39;</span><span class="n">lxc</span><span class="sc">&#39;).

   • The hook type (i.e. &#39;</span><span class="n">clone</span><span class="sc">&#39; or &#39;</span><span class="n">pre</span><span class="o">-</span><span class="n">mount</span><span class="sc">&#39;).

   • Additional  arguments. In the case of the clone hook, any extra arguments passed will appear as further arguments to the hook. In the case of the stop hook, paths to filedescriptors
     for each of the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">along</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">passed</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ss">set</span><span class="p">:</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_CGNS_AWARE</span><span class="p">:</span><span class="w"> </span><span class="n">indicator</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">aware</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_CONFIG_FILE</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_HOOK_TYPE</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p" data-group-id="7820632671-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="sc">&#39;clone&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;mount&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;pre-mount&#39;</span><span class="p" data-group-id="7820632671-1">)</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">existence</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">conditional</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w">
     </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="nc">LXC_HOOK_TYPE</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_HOOK_SECTION</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p" data-group-id="7820632671-2">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="sc">&#39;lxc&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;net&#39;</span><span class="p" data-group-id="7820632671-2">)</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">existence</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">conditional</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">then</span><span class="w">
     </span><span class="nc">LXC_HOOK_SECTION</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_HOOK_VERSION</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hooks</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">identical</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s lxc.hook.version config item. If it is set to 0 then old-style hooks are used. If
     it is set to 1 then new-style hooks are used.

   • LXC_LOG_LEVEL: the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_NAME</span><span class="p">:</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s name.

   • LXC_[NAMESPACE IDENTIFIER]_NS: path under /proc/PID/fd/ to a file descriptor referring to the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespace</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">preserved</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">envi</span><span class="err">‐</span><span class="w">
     </span><span class="n">ronment</span><span class="w"> </span><span class="n">variable</span><span class="o">.</span><span class="w"> </span><span class="nc">These</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">version</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_ROOTFS_MOUNT</span><span class="p">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">filesystem</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_ROOTFS_PATH</span><span class="p">:</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="nc">LXC_ROOTFS_MOUNT</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">that</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w"> </span><span class="ss">LXC_SRC_NAME</span><span class="p">:</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">hook</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s name.

   Standard output from the hooks is logged at debug level.  Standard error is not logged, but can be captured by the hook redirecting its standard error to standard output.

   lxc.hook.version
          To  pass  the arguments in new style via environment variables set to 1 otherwise set to 0 to pass them as arguments.  This setting affects all hooks arguments that were tradi‐
          tionally passed as arguments to the script. Specifically, it affects the container name, section (e.g. &#39;</span><span class="n">lxc</span><span class="sc">&#39;, &#39;</span><span class="n">net</span><span class="sc">&#39;) and hook type (e.g.  &#39;</span><span class="n">clone</span><span class="sc">&#39;, &#39;</span><span class="n">mount</span><span class="sc">&#39;,  &#39;</span><span class="n">pre</span><span class="o">-</span><span class="n">mount</span><span class="sc">&#39;)  argu‐
          ments. If new-style hooks are used then the arguments will be available as environment variables.  The container name will be set in LXC_NAME. (This is set independently of the
          value used for this config item.) The section will be set in LXC_HOOK_SECTION and the hook type will be set in LXC_HOOK_TYPE.  It also affects how the paths to file descriptors
          referring  to  the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">passed</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="nc">LXC_</span><span class="p" data-group-id="7820632671-3">[</span><span class="nc">NAMESPACE</span><span class="w"> </span><span class="nc">IDENTIFIER</span><span class="p" data-group-id="7820632671-3">]</span><span class="c">_NS</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">hook</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pre</span><span class="o">-</span><span class="n">start</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="sc">&#39;s namespace before the container ttys, consoles, or mounts are up.

   lxc.hook.pre-mount
          A hook to be run in the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">up</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">manipulation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="p">,</span><span class="w">  </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="n">mount</span><span class="w">  </span><span class="n">an</span><span class="w">  </span><span class="n">encrypted</span><span class="w">  </span><span class="n">filesystem</span><span class="o">.</span><span class="w">
          </span><span class="nc">Mounts</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">reflected</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="p" data-group-id="7820632671-4">(</span><span class="n">apart</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">mounts</span><span class="w"> </span><span class="n">propagation</span><span class="p" data-group-id="7820632671-4">)</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">cleaned</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">shuts</span><span class="w"> </span><span class="n">down</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">mount</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s namespace after mounting has been done, but before the pivot_root.

   lxc.hook.autodev
          A  hook  to be run in the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">hooks</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">run</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pivot_root</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">autodev</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">purpose</span><span class="w"> </span><span class="n">of</span><span class="w">
          </span><span class="n">this</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">assist</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">populating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">autodev</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">containers</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s /dev directory is  relative
          to the ${LXC_ROOTFS_MOUNT} environment variable available when the hook is run.

   lxc.hook.start-host
          A hook to be run in the host&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">setup</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">immediately</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">init</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">start</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="sc">&#39;s namespace immediately before executing the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">init</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">stop</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="sc">&#39;s namespace with references to the container&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">shut</span><span class="w"> </span><span class="n">down</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">to</span><span class="w">
          </span><span class="n">the</span><span class="w">  </span><span class="n">hook</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">namespace</span><span class="sc">&#39;s type and a filename that can be used to obtain a file descriptor to the corresponding namespace, separated by a colon. The type is the name
          as it would appear in the /proc/PID/ns directory.  For instance for the mount namespace the argument usually looks like mnt:/proc/PID/fd/12.

   lxc.hook.post-stop
          A hook to be run in the host&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">shut</span><span class="w"> </span><span class="n">down</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">clone</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">cloned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">one</span><span class="o">.</span><span class="w">  </span><span class="nc">See</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">clone</span><span class="p" data-group-id="7820632671-5">(</span><span class="mi">1</span><span class="p" data-group-id="7820632671-5">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">destroy</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">destroyed</span><span class="o">.</span></code></pre><p>   CONTAINER HOOKS ENVIRONMENT VARIABLES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">startup</span><span class="w"> </span><span class="n">hooks</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">assist</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">functioning</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hooks</span><span class="o">.</span><span class="w"> </span><span class="nc">Not</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">are</span><span class="w">  </span><span class="n">valid</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">contexts</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">particular</span><span class="p">,</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="ow">and</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">such</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">start</span><span class="w"> </span><span class="n">hook</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC_NAME</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">environments</span><span class="o">.</span><span class="w"> </span><span class="p" data-group-id="6443872997-1">[</span><span class="o">-</span><span class="n">n</span><span class="p" data-group-id="6443872997-1">]</span><span class="w">

   </span><span class="nc">LXC_CONFIG_FILE</span><span class="w">
          </span><span class="nc">Host</span><span class="w">  </span><span class="n">relative</span><span class="w">  </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">gives</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="p">,</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">level</span><span class="p">,</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">locate</span><span class="w">
          </span><span class="n">any</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">available</span><span class="o">.</span><span class="w"> </span><span class="p" data-group-id="6443872997-2">[</span><span class="o">-</span><span class="n">f</span><span class="p" data-group-id="6443872997-2">]</span><span class="w">

   </span><span class="nc">LXC_CONSOLE</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nc">NULL</span><span class="o">.</span><span class="w">  </span><span class="p" data-group-id="6443872997-3">[</span><span class="o">-</span><span class="n">c</span><span class="p" data-group-id="6443872997-3">]</span><span class="w"> </span><span class="p" data-group-id="6443872997-4">[</span><span class="n">lxc</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">path</span><span class="p" data-group-id="6443872997-4">]</span><span class="w">

   </span><span class="nc">LXC_CONSOLE_LOGPATH</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nc">NULL</span><span class="o">.</span><span class="w">  </span><span class="p" data-group-id="6443872997-5">[</span><span class="o">-</span><span class="nc">L</span><span class="p" data-group-id="6443872997-5">]</span><span class="w">

   </span><span class="nc">LXC_ROOTFS_MOUNT</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">initially</span><span class="w"> </span><span class="n">bound</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">rootfs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">where</span><span class="w">
          </span><span class="n">changes</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">instance</span><span class="o">.</span><span class="w">  </span><span class="p" data-group-id="6443872997-6">[</span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">mount</span><span class="p" data-group-id="6443872997-6">]</span><span class="w">

   </span><span class="nc">LXC_ROOTFS_PATH</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rootfs</span><span class="o">.</span><span class="n">mount</span><span class="w"> </span><span class="n">location</span><span class="o">.</span><span class="w">  </span><span class="p" data-group-id="6443872997-7">[</span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">path</span><span class="p" data-group-id="6443872997-7">]</span><span class="w">

   </span><span class="nc">LXC_SRC_NAME</span><span class="w">
          </span><span class="nc">Only</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">hook</span><span class="o">.</span><span class="w"> </span><span class="nc">Is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC_TARGET</span><span class="w">
          </span><span class="nc">Only</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">hook</span><span class="o">.</span><span class="w"> </span><span class="nc">Is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;stop&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">shutdown</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s">&quot;reboot&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">reboot</span><span class="o">.</span><span class="w">

   </span><span class="nc">LXC_CGNS_AWARE</span><span class="w">
          </span><span class="nc">If</span><span class="w"> </span><span class="n">unset</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">aware</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespaces</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">set</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">aware</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespaces</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w">  </span><span class="n">this</span><span class="w">  </span><span class="n">does</span><span class="w">  </span><span class="ow">not</span><span class="w">  </span><span class="n">guarantee</span><span class="w">  </span><span class="n">that</span><span class="w">
          </span><span class="n">cgroup</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">enabled</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxcfs</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">hook</span><span class="o">.</span></code></pre><p>   LOGGING</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Logging</span><span class="w">  </span><span class="n">can</span><span class="w">  </span><span class="n">be</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">container</span><span class="w"> </span><span class="n">basis</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">upon</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">compiled</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">startup</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">logged</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">ERROR</span><span class="w"> </span><span class="n">level</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">logged</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w">
   </span><span class="n">file</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="p" data-group-id="4647403855-1">(</span><span class="k">with</span><span class="w"> </span><span class="sc">&#39;.log&#39;</span><span class="w"> </span><span class="n">appended</span><span class="p" data-group-id="4647403855-1">)</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">lxc</span><span class="o">.</span><span class="w">

   </span><span class="nc">Both</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">overriding</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">behavior</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">turn</span><span class="w">
   </span><span class="n">be</span><span class="w"> </span><span class="n">overridden</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">start</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">level</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">log</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="mi">8</span><span class="w"> </span><span class="n">inclusive</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">verbose</span><span class="w"> </span><span class="n">debugging</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trace</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">debug</span><span class="p">,</span><span class="w">  </span><span class="mi">2</span><span class="w">
          </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notice</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">warn</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">critical</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alert</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fatal</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">unspecified</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p" data-group-id="4647403855-2">(</span><span class="n">error</span><span class="p" data-group-id="4647403855-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">logged</span><span class="o">.</span><span class="w">

          </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="p" data-group-id="4647403855-3">(</span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="n">script</span><span class="p" data-group-id="4647403855-3">)</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">called</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">logged</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">debug</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">file</span><span class="w">
          </span><span class="nc">The</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">written</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">syslog</span><span class="w">
          </span><span class="nc">Send</span><span class="w">  </span><span class="n">logging</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">syslog</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">respects</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">syslog</span><span class="w"> </span><span class="n">facility</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="p">,</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">ones</span><span class="w"> </span><span class="ss">are</span><span class="p">:</span><span class="w"> </span><span class="n">daemon</span><span class="p">,</span><span class="w"> </span><span class="n">local0</span><span class="p">,</span><span class="w"> </span><span class="n">local1</span><span class="p">,</span><span class="w"> </span><span class="n">lo</span><span class="err">‐</span><span class="w">
          </span><span class="n">cal2</span><span class="p">,</span><span class="w"> </span><span class="n">local3</span><span class="p">,</span><span class="w"> </span><span class="n">local4</span><span class="p">,</span><span class="w"> </span><span class="n">local5</span><span class="p">,</span><span class="w"> </span><span class="n">local5</span><span class="p">,</span><span class="w"> </span><span class="n">local6</span><span class="p">,</span><span class="w"> </span><span class="n">local7</span><span class="o">.</span></code></pre><p>   AUTOSTART</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">autostart</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">marking</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">auto</span><span class="o">-</span><span class="n">started</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="w"> </span><span class="nc">These</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">external</span><span class="w"> </span><span class="n">tooling</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">distributions</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">auto</span><span class="w">
          </span><span class="nc">Whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">auto</span><span class="o">-</span><span class="n">started</span><span class="o">.</span><span class="w">  </span><span class="nc">Valid</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p" data-group-id="6994168693-1">(</span><span class="n">off</span><span class="p" data-group-id="6994168693-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p" data-group-id="6994168693-2">(</span><span class="n">on</span><span class="p" data-group-id="6994168693-2">)</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">delay</span><span class="w">
          </span><span class="nc">How</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="p" data-group-id="6994168693-3">(</span><span class="ow">in</span><span class="w"> </span><span class="n">seconds</span><span class="p" data-group-id="6994168693-3">)</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">one</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">order</span><span class="w">
          </span><span class="nc">An</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">auto</span><span class="o">-</span><span class="n">starting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">once</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">earlier</span><span class="w"> </span><span class="n">start</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">monitor</span><span class="o">.</span><span class="n">unshare</span><span class="w">
          </span><span class="nc">If</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">unshared</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">initializing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="p" data-group-id="6994168693-4">(</span><span class="n">before</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">pre</span><span class="o">-</span><span class="n">start</span><span class="w"> </span><span class="n">hooks</span><span class="p" data-group-id="6994168693-4">)</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">CAP_SYS_ADMIN</span><span class="w">  </span><span class="n">capabil</span><span class="err">‐</span><span class="w">
          </span><span class="n">ity</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">startup</span><span class="o">.</span><span class="w">  </span><span class="nc">Default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">monitor</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">pdeath</span><span class="w">
          </span><span class="nc">Set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">monitor</span><span class="w"> </span><span class="n">exits</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">SIGKILL</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">killed</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lxc</span><span class="w">
          </span><span class="n">monitor</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">dies</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">stay</span><span class="w"> </span><span class="n">alive</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">lxc</span><span class="w"> </span><span class="n">monitor</span><span class="w"> </span><span class="n">dies</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">group</span><span class="w">
          </span><span class="nc">A</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">value</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p" data-group-id="6994168693-5">(</span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">times</span><span class="p" data-group-id="6994168693-5">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">put</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">group</span><span class="o">.</span><span class="w"> </span><span class="nc">Those</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="p" data-group-id="6994168693-6">(</span><span class="n">amongst</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">things</span><span class="p" data-group-id="6994168693-6">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">con</span><span class="err">‐</span><span class="w">
          </span><span class="n">tainers</span><span class="o">.</span></code></pre><p>   AUTOSTART AND SYSTEM BOOT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Each</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">all</span><span class="o">.</span><span class="w">  </span><span class="nc">Two</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">special</span><span class="o">.</span><span class="w"> </span><span class="nc">One</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">NULL</span><span class="w"> </span><span class="n">group</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">belong</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">group</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">group</span><span class="w">
   </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;onboot&quot;</span><span class="w"> </span><span class="n">group</span><span class="o">.</span><span class="w">

   </span><span class="nc">When</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">system</span><span class="w"> </span><span class="n">boots</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">enabled</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">auto</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;onboot&quot;</span><span class="w"> </span><span class="n">group</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">startup</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">order</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">delay</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">delay</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">honored</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">attempting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">time</span><span class="w">  </span><span class="n">to</span><span class="w">
   </span><span class="n">begin</span><span class="w">  </span><span class="n">initialization</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">overloading</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w"> </span><span class="nc">After</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">members</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;onboot&quot;</span><span class="w"> </span><span class="n">group</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">LXC</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">proceed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">auto</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w">
   </span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">members</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="p" data-group-id="6685785778-1">(</span><span class="n">the</span><span class="w"> </span><span class="nc">NULL</span><span class="w"> </span><span class="n">group</span><span class="p" data-group-id="6685785778-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">proceed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">onboot</span><span class="w"> </span><span class="n">group</span><span class="o">.</span></code></pre><p>   CONTAINER ENVIRONMENT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="p" data-group-id="7003793345-1">(</span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">descendents</span><span class="p" data-group-id="7003793345-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w">  </span><span class="kn">use</span><span class="w">  </span><span class="n">lxc</span><span class="o">.</span><span class="n">environment</span><span class="w">
   </span><span class="n">parameters</span><span class="w">  </span><span class="n">to</span><span class="w">  </span><span class="k" data-group-id="7003793345-2">do</span><span class="w"> </span><span class="n">so</span><span class="o">.</span><span class="w"> </span><span class="nc">Be</span><span class="w"> </span><span class="n">careful</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k" data-group-id="7003793345-3">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">sensitive</span><span class="p">;</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">doesn</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">scrubbed</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">avail</span><span class="err">‐</span><span class="w">
   </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="nc">PID</span><span class="o">/</span><span class="n">environ</span><span class="o">.</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">times</span><span class="p">;</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">wish</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">configure</span><span class="o">.</span><span class="w">

   </span><span class="n">lxc</span><span class="o">.</span><span class="n">environment</span><span class="w">
          </span><span class="nc">Specify</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">  </span><span class="ss">Example</span><span class="p">:</span><span class="w">

                        </span><span class="n">lxc</span><span class="o">.</span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APP_ENV</span><span class="o">=</span><span class="n">production</span><span class="w">
                        </span><span class="n">lxc</span><span class="o">.</span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">SYSLOG_SERVER</span><span class="o">=</span><span class="mf">192.0</span><span class="o">.</span><span class="mf">2.42</span><span class="w">

          </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inherit</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;=&quot;</span><span class="w"> </span><span class="n">sign</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="ss">example</span><span class="p">:</span><span class="w">

                        </span><span class="n">lxc</span><span class="o">.</span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">PATH</span></code></pre><p>EXAMPLES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w"> </span><span class="n">addition</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">few</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">below</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">lxc</span><span class="o">/</span><span class="n">examples</span></code></pre><p>   NETWORK</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">veth</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">plugged</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bridge</span><span class="w"> </span><span class="n">br0</span><span class="w"> </span><span class="p" data-group-id="6767153447-1">(</span><span class="n">which</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">administrator</span><span class="p" data-group-id="6767153447-1">)</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w">  </span><span class="n">vir</span><span class="err">‐</span><span class="w">
   </span><span class="n">tual</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">visible</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">renamed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">eth0</span><span class="o">.</span><span class="w">

           </span><span class="n">lxc</span><span class="o">.</span><span class="n">uts</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myhostname</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">veth</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">up</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">br0</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eth0</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">hwaddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">a</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">79</span><span class="ss">:bf</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.2</span><span class="o">.</span><span class="mf">3.5</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="mf">10.2</span><span class="o">.</span><span class="mf">3.255</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2003</span><span class="ss">:db8</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">214</span><span class="p">:</span><span class="mi">1234</span><span class="ss">:fe0b</span><span class="p">:</span><span class="mi">3597</span></code></pre><p>   UID/GID MAPPING</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">0</span><span class="o">-</span><span class="mi">9999</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="mi">100000</span><span class="o">-</span><span class="mi">109999</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">.</span><span class="w">

           </span><span class="n">lxc</span><span class="o">.</span><span class="n">idmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="mi">10000</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">idmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="mi">10000</span></code></pre><p>   CONTROL GROUP</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w">  </span><span class="n">configuration</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">groups</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">application</span><span class="p">,</span><span class="w"> </span><span class="n">cpuset</span><span class="o">.</span><span class="n">cpus</span><span class="w"> </span><span class="n">restricts</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">cpu</span><span class="p">,</span><span class="w"> </span><span class="n">cpus</span><span class="o">.</span><span class="n">share</span><span class="w"> </span><span class="n">prioritize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">group</span><span class="p">,</span><span class="w"> </span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="n">makes</span><span class="w">
   </span><span class="n">usable</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">devices</span><span class="o">.</span><span class="w">

           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">cpuset</span><span class="o">.</span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">shares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="n">rw</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="n">rw</span></code></pre><p>   COMPLEX CONFIGURATION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">complex</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">stack</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">groups</span><span class="p">,</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">hostname</span><span class="p">,</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="w">

           </span><span class="n">lxc</span><span class="o">.</span><span class="n">uts</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">complex</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">veth</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">up</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">br0</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">hwaddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">a</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">79</span><span class="ss">:bf</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.2</span><span class="o">.</span><span class="mf">3.5</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="mf">10.2</span><span class="o">.</span><span class="mf">3.255</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2003</span><span class="ss">:db8</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">214</span><span class="p">:</span><span class="mi">1234</span><span class="ss">:fe0b</span><span class="p">:</span><span class="mi">3597</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2003</span><span class="ss">:db8</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">214</span><span class="p">:</span><span class="mi">5432</span><span class="ss">:feab</span><span class="p">:</span><span class="mi">3588</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">macvlan</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">up</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eth0</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">hwaddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">a</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">79</span><span class="ss">:bd</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.2</span><span class="o">.</span><span class="mf">3.4</span><span class="o">/</span><span class="mi">24</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">10.125</span><span class="o">/</span><span class="mi">24</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2003</span><span class="ss">:db8</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">214</span><span class="p">:</span><span class="mi">1234</span><span class="ss">:fe0b</span><span class="p">:</span><span class="mi">3596</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">phys</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">up</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random0</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="n">hwaddr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">a</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">79</span><span class="ss">:ff</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="n">ipv4</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.2</span><span class="o">.</span><span class="mf">3.6</span><span class="o">/</span><span class="mi">24</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="n">ipv6</span><span class="o">.</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2003</span><span class="ss">:db8</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">214</span><span class="p">:</span><span class="mi">1234</span><span class="ss">:fe0b</span><span class="p">:</span><span class="mi">3297</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">cpuset</span><span class="o">.</span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">shares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">deny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="w"> </span><span class="n">rw</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cgroup</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="n">rw</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">mount</span><span class="o">.</span><span class="n">fstab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span><span class="o">.</span><span class="n">complex</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">mount</span><span class="o">.</span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">myrootfs</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="n">none</span><span class="w"> </span><span class="n">ro</span><span class="p">,</span><span class="n">bind</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="ss">:/</span><span class="n">mnt</span><span class="o">/</span><span class="n">rootfs</span><span class="o">.</span><span class="n">complex</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">rootfs</span><span class="o">.</span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">idmap</span><span class="o">=</span><span class="n">container</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">drop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sys_module</span><span class="w"> </span><span class="n">mknod</span><span class="w"> </span><span class="n">setuid</span><span class="w"> </span><span class="n">net_raw</span><span class="w">
           </span><span class="n">lxc</span><span class="o">.</span><span class="n">cap</span><span class="o">.</span><span class="n">drop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mac_override</span></code></pre><p>SEE ALSO</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">chroot</span><span class="p" data-group-id="0748049244-1">(</span><span class="mi">1</span><span class="p" data-group-id="0748049244-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">pivot_root</span><span class="p" data-group-id="0748049244-2">(</span><span class="mi">8</span><span class="p" data-group-id="0748049244-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">fstab</span><span class="p" data-group-id="0748049244-3">(</span><span class="mi">5</span><span class="p" data-group-id="0748049244-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">capabilities</span><span class="p" data-group-id="0748049244-4">(</span><span class="mi">7</span><span class="p" data-group-id="0748049244-4">)</span></code></pre><p>SEE ALSO</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">lxc</span><span class="p" data-group-id="1406755835-1">(</span><span class="mi">7</span><span class="p" data-group-id="1406755835-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">create</span><span class="p" data-group-id="1406755835-2">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">copy</span><span class="p" data-group-id="1406755835-3">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">destroy</span><span class="p" data-group-id="1406755835-4">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-4">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">start</span><span class="p" data-group-id="1406755835-5">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-5">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">stop</span><span class="p" data-group-id="1406755835-6">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-6">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">execute</span><span class="p" data-group-id="1406755835-7">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-7">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">console</span><span class="p" data-group-id="1406755835-8">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-8">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">monitor</span><span class="p" data-group-id="1406755835-9">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-9">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">wait</span><span class="p" data-group-id="1406755835-10">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-10">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">cgroup</span><span class="p" data-group-id="1406755835-11">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-11">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">ls</span><span class="p" data-group-id="1406755835-12">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-12">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">info</span><span class="p" data-group-id="1406755835-13">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-13">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="w">
   </span><span class="n">freeze</span><span class="p" data-group-id="1406755835-14">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-14">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">unfreeze</span><span class="p" data-group-id="1406755835-15">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-15">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">-</span><span class="n">attach</span><span class="p" data-group-id="1406755835-16">(</span><span class="mi">1</span><span class="p" data-group-id="1406755835-16">)</span><span class="p">,</span><span class="w"> </span><span class="n">lxc</span><span class="o">.</span><span class="n">conf</span><span class="p" data-group-id="1406755835-17">(</span><span class="mi">5</span><span class="p" data-group-id="1406755835-17">)</span><span class="w">

                                                                                      </span><span class="mi">2025</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">30</span><span class="w">                                                                     </span><span class="n">lxc</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">conf</span><span class="p" data-group-id="1406755835-18">(</span><span class="mi">5</span><span class="p" data-group-id="1406755835-18">)</span></code></pre>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="lxc-conf.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
lxc.conf
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="lxc-system-conf.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
lxc.system.conf
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>

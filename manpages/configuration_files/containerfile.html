<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Manpages v3.0.0">


    <title>Containerfile — Manpages v3.0.0</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-23381D40.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>
<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Manpages" />
        </a>

      <div>
        <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v3.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="MANUALS"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Manpages</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Containerfile</h1>


  </div>


<p>CONTAINERFILE(5)                                                                    Container User Manuals                                                                    CONTAINERFILE(5)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Containerfile</span><span class="p" data-group-id="0090741471-1">(</span><span class="nc">Dockerfile</span><span class="p" data-group-id="0090741471-1">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">automate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span></code></pre><p>INTRODUCTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w">  </span><span class="nc">Containerfile</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">automates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Makefile</span><span class="o">.</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="n">engines</span><span class="w"> </span><span class="p" data-group-id="4628036529-1">(</span><span class="nc">Podman</span><span class="p">,</span><span class="w"> </span><span class="nc">Buildah</span><span class="p">,</span><span class="w"> </span><span class="nc">Docker</span><span class="p" data-group-id="4628036529-1">)</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="ow">in</span><span class="err">‐</span><span class="w">
   </span><span class="n">structions</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">automate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">performed</span><span class="w"> </span><span class="n">manually</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w"> </span><span class="nc">To</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="nc">Containerfile</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">describes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">taken</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">assemble</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">created</span><span class="p">,</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buildah</span><span class="w"> </span><span class="n">build</span><span class="p">,</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="p">,</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">path</span><span class="w">
   </span><span class="n">of</span><span class="w">  </span><span class="n">context</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">argument</span><span class="o">.</span><span class="w"> </span><span class="nc">Podman</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Buildah</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">fall</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="o">.</span><span class="w"> </span><span class="nc">Docker</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">

   </span><span class="nc">Dockerfile</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">alternate</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">object</span><span class="o">.</span><span class="w">  </span><span class="nc">Containerfile</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">syntax</span><span class="o">.</span></code></pre><p>SYNOPSIS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">INSTRUCTION</span><span class="w"> </span><span class="n">arguments</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="ss">example</span><span class="p">:</span><span class="w">

   </span><span class="nc">FROM</span><span class="w"> </span><span class="n">image</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">automates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">A</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Makefile</span><span class="o">.</span></code></pre><p>USAGE</p><pre><code class="makeup elixir" translate="no"><span class="w">     </span><span class="n">buildah</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">.</span><span class="w">
     </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">Runs</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="n">them</span><span class="p">,</span><span class="w"> </span><span class="n">building</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">
     </span><span class="nc">The</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="n">defines</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w">
     </span><span class="n">build</span><span class="o">.</span><span class="w">

     </span><span class="n">buildah</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">repository</span><span class="o">/</span><span class="n">tag</span><span class="w"> </span><span class="o">.</span><span class="w">
     </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">repository</span><span class="o">/</span><span class="n">tag</span><span class="w"> </span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">save</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w">
     </span><span class="n">succeeds</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">one</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">one</span><span class="p">,</span><span class="w"> </span><span class="n">committing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w">
     </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">necessary</span><span class="p">,</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">finally</span><span class="w"> </span><span class="n">outputting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">ID</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w">
     </span><span class="n">image</span><span class="o">.</span><span class="w">

   </span><span class="nc">Container</span><span class="w"> </span><span class="n">engines</span><span class="w"> </span><span class="n">reuse</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="n">whenever</span><span class="w"> </span><span class="n">possible</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">significantly</span><span class="w">
     </span><span class="n">accelerates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">process</span><span class="o">.</span></code></pre><p>FORMAT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">FROM</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="p" data-group-id="8160803320-1">[</span><span class="nc">AS</span><span class="w"> </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p" data-group-id="8160803320-1">]</span><span class="w">

   </span><span class="nc">FROM</span><span class="w"> </span><span class="n">image</span><span class="ss">:tag</span><span class="w"> </span><span class="p" data-group-id="8160803320-2">[</span><span class="nc">AS</span><span class="w"> </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p" data-group-id="8160803320-2">]</span><span class="w">

   </span><span class="nc">FROM</span><span class="w"> </span><span class="n">image</span><span class="na">@digest</span><span class="w"> </span><span class="p" data-group-id="8160803320-3">[</span><span class="nc">AS</span><span class="w"> </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p" data-group-id="8160803320-3">]</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">subsequent</span><span class="w"> </span><span class="n">instructions</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w">
     </span><span class="n">valid</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="nc">ARG</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">instruction</span><span class="o">.</span><span class="w">
     </span><span class="nc">If</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">preceded</span><span class="w"> </span><span class="n">by</span><span class="w">
     </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="nc">ARG</span><span class="w"> </span><span class="n">instructions</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">declare</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Containerfile</span><span class="o">.</span><span class="w">
     </span><span class="nc">The</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">easy</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">pulling</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">public</span><span class="w">
     </span><span class="n">repositories</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Containerfile</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">come</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="ow">in</span><span class="w">
     </span><span class="n">the</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="nc">ARG</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w">
     </span><span class="n">multiple</span><span class="w"> </span><span class="n">images</span><span class="o">.</span><span class="w"> </span><span class="nc">Make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="nc">ID</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">before</span><span class="w">
     </span><span class="n">each</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">command</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">instruction</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">engines</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">the</span><span class="w">
     </span><span class="n">latest</span><span class="w"> </span><span class="n">tag</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">digest</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="n">instruction</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">engines</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">the</span><span class="w">
     </span><span class="n">latest</span><span class="w"> </span><span class="n">tag</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">stage</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="nc">AS</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">instruction</span><span class="o">.</span><span class="w">
     </span><span class="nc">The</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">FROM</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">COPY</span><span class="w"> </span><span class="o">--</span><span class="n">from</span><span class="o">=</span><span class="w"> </span><span class="n">instructions</span><span class="o">.</span><span class="w">

   </span><span class="nc">MAINTAINER</span><span class="w">
     </span><span class="o">--</span><span class="w"> </span><span class="nc">MAINTAINER</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Author</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">generated</span><span class="w"> </span><span class="n">images</span><span class="o">.</span><span class="w">
     </span><span class="nc">Useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">providing</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">support</span><span class="o">.</span><span class="w">

   </span><span class="nc">RUN</span><span class="w">
     </span><span class="o">--</span><span class="w"> </span><span class="nc">RUN</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="ss">forms</span><span class="p">:</span><span class="w">

     </span><span class="c1"># the command is run in a shell - /bin/sh -c</span><span class="w">
     </span><span class="nc">RUN</span><span class="w"> </span><span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span><span class="w">

     </span><span class="c1"># Executable form</span><span class="w">
     </span><span class="nc">RUN</span><span class="w"> </span><span class="p" data-group-id="8160803320-4">[</span><span class="s">&quot;executable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param2&quot;</span><span class="p" data-group-id="8160803320-4">]</span><span class="w">

   </span><span class="nc">RUN</span><span class="w"> </span><span class="n">mounts</span><span class="w">

   </span><span class="o">--</span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="nc">TYPE</span><span class="p">,</span><span class="nc">TYPE</span><span class="o">-</span><span class="nc">SPECIFIC</span><span class="o">-</span><span class="nc">OPTION</span><span class="p" data-group-id="8160803320-5">[</span><span class="p">,</span><span class="n">...</span><span class="p" data-group-id="8160803320-5">]</span><span class="w">

   </span><span class="nc">Attach</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w">

   </span><span class="nc">Current</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="nc">TYPES</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">bind</span><span class="p">,</span><span class="w"> </span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">tmpfs</span><span class="o">.</span><span class="w">

      </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w">

      </span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="n">bind</span><span class="p">,</span><span class="n">source</span><span class="o">=</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">on</span><span class="o">/</span><span class="n">host</span><span class="p">,</span><span class="n">destination</span><span class="o">=</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="ow">in</span><span class="o">/</span><span class="n">container</span><span class="p">,</span><span class="n">relabel</span><span class="o">=</span><span class="n">shared</span><span class="w">

      </span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="n">tmpfs</span><span class="p">,</span><span class="n">tmpfs</span><span class="o">-</span><span class="n">size</span><span class="o">=</span><span class="mi">512</span><span class="nc">M</span><span class="p">,</span><span class="n">destination</span><span class="o">=</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="ow">in</span><span class="o">/</span><span class="n">container</span><span class="w">

      </span><span class="n">mount</span><span class="o">=</span><span class="n">type</span><span class="o">=</span><span class="n">secret</span><span class="p">,</span><span class="n">id</span><span class="o">=</span><span class="n">mysecret</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">secrets</span><span class="o">/</span><span class="n">mysecret</span><span class="w">

      </span><span class="nc">Common</span><span class="w"> </span><span class="ss">Options</span><span class="p">:</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="ss">source</span><span class="p">:</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">volume</span><span class="o">.</span><span class="w"> </span><span class="nc">Mandatory</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bind</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="err">`</span><span class="n">from</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">src</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">subpath</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">from</span><span class="err">`</span><span class="w"> </span><span class="n">field</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="n">destination</span><span class="p">,</span><span class="w"> </span><span class="ss">target</span><span class="p">:</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">spec</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">ro</span><span class="p">,</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="p" data-group-id="8160803320-6">(</span><span class="n">default</span><span class="p" data-group-id="8160803320-6">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="no">false</span><span class="o">.</span><span class="w">

      </span><span class="nc">Options</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">bind</span><span class="p">:</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">bind</span><span class="o">-</span><span class="ss">propagation</span><span class="p">:</span><span class="w"> </span><span class="n">shared</span><span class="p">,</span><span class="w"> </span><span class="n">slave</span><span class="p">,</span><span class="w"> </span><span class="n">private</span><span class="p">,</span><span class="w"> </span><span class="n">rshared</span><span class="p">,</span><span class="w"> </span><span class="n">rslave</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">rprivate</span><span class="p" data-group-id="8160803320-7">(</span><span class="n">default</span><span class="p" data-group-id="8160803320-7">)</span><span class="o">.</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">mount</span><span class="p" data-group-id="8160803320-8">(</span><span class="mi">2</span><span class="p" data-group-id="8160803320-8">)</span><span class="o">.</span><span class="w">

         </span><span class="o">.</span><span class="w"> </span><span class="n">bind</span><span class="o">-</span><span class="ss">nonrecursive</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="8160803320-9">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">recursive</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">mount</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">recursive</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">from</span><span class="p">:</span><span class="w"> </span><span class="n">stage</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="o">.</span><span class="w"> </span><span class="nc">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">relabel</span><span class="o">=</span><span class="n">shared</span><span class="p">,</span><span class="w"> </span><span class="ss">z</span><span class="p">:</span><span class="w"> </span><span class="nc">Relabels</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">label</span><span class="o">.</span><span class="w">

         </span><span class="o">.</span><span class="w"> </span><span class="n">relabel</span><span class="o">=</span><span class="n">private</span><span class="p">,</span><span class="w"> </span><span class="ss">Z</span><span class="p">:</span><span class="w"> </span><span class="nc">Relabels</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">label</span><span class="o">.</span><span class="w">

         </span><span class="nc">Labeling</span><span class="w"> </span><span class="n">systems</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="nc">SELinux</span><span class="w"> </span><span class="kn">require</span><span class="w"> </span><span class="n">proper</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w"> </span><span class="nc">Without</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">label</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">prevent</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">engines</span><span class="w"> </span><span class="k" data-group-id="8160803320-10">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">OS</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">relabel</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">tells</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">relabel</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">mountz</span><span class="o">.</span><span class="w">

         </span><span class="nc">The</span><span class="w"> </span><span class="n">relabel</span><span class="o">=</span><span class="n">shared</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">containers</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">share</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">content</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">label</span><span class="o">.</span><span class="w">

         </span><span class="nc">The</span><span class="w"> </span><span class="n">relabel</span><span class="o">=</span><span class="n">private</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Z</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">unshared</span><span class="w"> </span><span class="n">label</span><span class="o">.</span><span class="w"> </span><span class="nc">Only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">mount</span><span class="o">.</span><span class="w">

         </span><span class="nc">Relabeling</span><span class="w"> </span><span class="n">walks</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">thousands</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">inodes</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">delaying</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">rw</span><span class="p">,</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="ss">write</span><span class="p">:</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">writes</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="o">.</span><span class="w">

      </span><span class="nc">Options</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">tmpfs</span><span class="p">:</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">tmpfs</span><span class="o">-</span><span class="ss">size</span><span class="p">:</span><span class="w"> </span><span class="nc">Size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">bytes</span><span class="o">.</span><span class="w"> </span><span class="nc">Unlimited</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">Linux</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">tmpfs</span><span class="o">-</span><span class="ss">mode</span><span class="p">:</span><span class="w"> </span><span class="nc">File</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">octal</span><span class="o">.</span><span class="w"> </span><span class="p" data-group-id="8160803320-11">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="mi">700</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0700</span><span class="o">.</span><span class="p" data-group-id="8160803320-11">)</span><span class="w"> </span><span class="nc">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1777</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">Linux</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">tmpcopyup</span><span class="p">:</span><span class="w"> </span><span class="nc">Path</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">shadowed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">recursively</span><span class="w"> </span><span class="n">copied</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="n">itself</span><span class="o">.</span><span class="w">

   </span><span class="nc">Options</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">cache</span><span class="p">:</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">id</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">mode</span><span class="p">:</span><span class="w"> </span><span class="nc">File</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">octal</span><span class="o">.</span><span class="w"> </span><span class="nc">Default</span><span class="w"> </span><span class="mi">0755</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">ro</span><span class="p">,</span><span class="w"> </span><span class="ss">readonly</span><span class="p">:</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">uid</span><span class="p">:</span><span class="w"> </span><span class="n">uid</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">gid</span><span class="p">:</span><span class="w"> </span><span class="n">gid</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="ss">from</span><span class="p">:</span><span class="w"> </span><span class="n">stage</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="o">.</span><span class="w"> </span><span class="nc">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span><span class="w">

         </span><span class="err">·</span><span class="w"> </span><span class="n">rw</span><span class="p">,</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="ss">write</span><span class="p">:</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">writes</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mount</span><span class="o">.</span><span class="w">

   </span><span class="nc">RUN</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="w">

   </span><span class="nc">RUN</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">networking</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="o">.</span><span class="w">

   </span><span class="ss">Syntax</span><span class="p">:</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="o">=</span><span class="o">&lt;</span><span class="nc">TYPE</span><span class="o">&gt;</span><span class="w">

   </span><span class="nc">Network</span><span class="w"> </span><span class="n">types</span><span class="w">

   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
   </span><span class="err">│</span><span class="w"> </span><span class="nc">Type</span><span class="w">                              </span><span class="err">│</span><span class="w"> </span><span class="nc">Description</span><span class="w">                            </span><span class="err">│</span><span class="w">
   </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
   </span><span class="err">│</span><span class="w">                                   </span><span class="err">│</span><span class="w">                                        </span><span class="err">│</span><span class="w">
   </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
   </span><span class="err">│</span><span class="w"> </span><span class="err">⟨</span><span class="c1">#run---networkdefault⟩ (default) │ Run in the default network.            │</span><span class="w">
   </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
   </span><span class="err">│</span><span class="w">                                   </span><span class="err">│</span><span class="w">                                        </span><span class="err">│</span><span class="w">
   </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
   </span><span class="err">│</span><span class="w"> </span><span class="err">⟨</span><span class="c1">#run---networknone⟩              │ Run with no network access.            │</span><span class="w">
   </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
   </span><span class="err">│</span><span class="w">                                   </span><span class="err">│</span><span class="w">                                        </span><span class="err">│</span><span class="w">
   </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
   </span><span class="err">│</span><span class="w"> </span><span class="err">⟨</span><span class="c1">#run---networkhost⟩              │ Run in the host&#39;s network environment. │</span><span class="w">
   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p>   RUN --network=default</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supplying</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">all</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="o">.</span></code></pre><p>   RUN --network=none</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="p" data-group-id="6186616119-1">(</span><span class="n">lo</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">available</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">isolated</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">process</span><span class="p" data-group-id="6186616119-1">)</span><span class="o">.</span></code></pre><p>   Example: isolating external effects</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">FROM</span><span class="w"> </span><span class="n">python</span><span class="p">:</span><span class="mf">3.6</span><span class="w">
   </span><span class="nc">ADD</span><span class="w"> </span><span class="n">mypackage</span><span class="o">.</span><span class="n">tgz</span><span class="w"> </span><span class="n">wheels</span><span class="o">/</span><span class="w">
   </span><span class="nc">RUN</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="o">=</span><span class="n">none</span><span class="w"> </span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">--</span><span class="n">find</span><span class="o">-</span><span class="n">links</span><span class="w"> </span><span class="n">wheels</span><span class="w"> </span><span class="n">mypackage</span><span class="w">

   </span><span class="n">pip</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tarfile</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">controlled</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">earlier</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">stage</span><span class="o">.</span></code></pre><p>   RUN --network=host</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="sc">&#39;s network environment (similar to buildah build --network=host, but on a per-instruction basis)

   RUN Secrets

   The RUN command has a feature to allow the passing of secret information into the image build. These secrets files can be used during the RUN command but are not committed to the  fi‐
   nal image. The RUN command supports the --mount option to identify the secret file. A secret file from the host is mounted into the container while the image is being built.

   Container engines pass secret the secret file into the build using the --secret flag.

   --mount=type=secret,TYPE-SPECIFIC-OPTION[,...]

          • id  is  the identifier for the secret passed into the buildah build --secret or podman build --secret. This identifier is associated with the RUN --mount identifier to use in
            the Containerfile.

          • dst|target|destination rename the secret file to a specific file in the Containerfile RUN command to use.

          • type=secret tells the --mount command that it is mounting in a secret file
            # shows secret from default secret location:
            RUN --mount=type=secret,id=mysecret cat /run/secrets/mysecret

            # shows secret from custom secret location:
            RUN --mount=type=secret,id=mysecret,dst=/foobar cat /foobar

   The secret needs to be passed to the build using the --secret flag. The final image built does not container the secret file:

    buildah build --no-cache --secret id=mysecret,src=mysecret.txt .

   -- The RUN instruction executes any commands in a new layer on top of the current
     image and commits the results. The committed image is used for the next step in
     Containerfile.

   -- Layering RUN instructions and generating commits conforms to the core
     concepts of container engines where commits are cheap and containers can be created from
     any point in the history of an image. This is similar to source control.  The
     exec form makes it possible to avoid shell string munging. The exec form makes
     it possible to RUN commands using a base image that does not contain /bin/sh.

   Note that the exec form is parsed as a JSON array, which means that you must
     use double-quotes (&quot;) around words, not single-quotes (&#39;</span><span class="p">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">CMD</span><span class="w">
     </span><span class="o">--</span><span class="w"> </span><span class="nc">CMD</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="ss">forms</span><span class="p">:</span><span class="w">

     </span><span class="c1"># Executable form</span><span class="w">
     </span><span class="nc">CMD</span><span class="w"> </span><span class="p" data-group-id="2716942620-1">[</span><span class="s">&quot;executable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param2&quot;</span><span class="p" data-group-id="2716942620-1">]</span><span class="err">`</span><span class="w">

     </span><span class="c1"># Provide default arguments to ENTRYPOINT</span><span class="w">
     </span><span class="nc">CMD</span><span class="w"> </span><span class="p" data-group-id="2716942620-2">[</span><span class="s">&quot;param1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param2&quot;</span><span class="p" data-group-id="2716942620-2">]</span><span class="err">`</span><span class="w">

     </span><span class="c1"># the command is run in a shell - /bin/sh -c</span><span class="w">
     </span><span class="nc">CMD</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">param1</span><span class="w"> </span><span class="n">param2</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">There</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="nc">CMD</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">Containerfile</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="nc">CMD</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">listed</span><span class="p">,</span><span class="w"> </span><span class="n">only</span><span class="w">
     </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="nc">CMD</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">effect</span><span class="o">.</span><span class="w">
     </span><span class="nc">The</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">purpose</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">CMD</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">
     </span><span class="nc">These</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">executable</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">omit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">executable</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w">
     </span><span class="n">they</span><span class="w"> </span><span class="n">omit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">executable</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="nc">ENTRYPOINT</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="o">.</span><span class="w">
     </span><span class="nc">When</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="n">formats</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">CMD</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">to</span><span class="w">
     </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">
     </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">CMD</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span><span class="w"> </span><span class="n">executes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span><span class="w"> </span><span class="o">-</span><span class="ss">c</span><span class="p">:</span><span class="w">

   </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">parsed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">must</span><span class="w">
     </span><span class="kn">use</span><span class="w"> </span><span class="n">double</span><span class="o">-</span><span class="n">quotes</span><span class="w"> </span><span class="p" data-group-id="2716942620-3">(</span><span class="s">&quot;) around words, not single-quotes (&#39;).

     FROM ubuntu
     CMD echo &quot;</span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">test</span><span class="o">.</span><span class="s">&quot; | wc -

   -- If you run command without a shell, then you must express the command as a
     JSON array and give the full path to the executable. This array form is the
     preferred form of CMD. All additional parameters must be individually expressed
     as strings in the array:

     FROM ubuntu
     CMD [&quot;</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">wc</span><span class="s">&quot;,&quot;</span><span class="o">--</span><span class="n">help</span><span class="s">&quot;]

   -- To make the container run the same executable every time, use ENTRYPOINT in
     combination with CMD.
     If the user specifies arguments to podman run or docker run, the specified commands
     override the default in CMD.
     Do not confuse RUN with CMD. RUN runs a command and commits the result.
     CMD executes nothing at build time, but specifies the intended command for
     the image.

   LABEL
     -- LABEL &lt;key&gt;=&lt;value&gt; [&lt;key&gt;=&lt;value&gt; ...]or

     LABEL &lt;key&gt;[ &lt;value&gt;]
     LABEL &lt;key&gt;[ &lt;value&gt;]
     ...

   The LABEL instruction adds metadata to an image. A LABEL is a
     key-value pair. To specify a LABEL without a value, simply use an empty
     string. To include spaces within a LABEL value, use quotes and
     backslashes as you would in command-line parsing.

     LABEL com.example.vendor=&quot;</span><span class="nc">ACME</span><span class="w"> </span><span class="nc">Incorporated</span><span class="s">&quot;
     LABEL com.example.vendor &quot;</span><span class="nc">ACME</span><span class="w"> </span><span class="nc">Incorporated</span><span class="s">&quot;
     LABEL com.example.vendor.is-beta &quot;</span><span class="s">&quot;
     LABEL com.example.vendor.is-beta=
     LABEL com.example.vendor.is-beta=&quot;</span><span class="s">&quot;

   An image can have more than one label. To specify multiple labels, separate
     each key-value pair by a space.

   Labels are additive including LABELs in FROM images. As the system
     encounters and then applies a new label, new keys override any previous
     labels with identical keys.

   To display an image&#39;s labels, use the buildah inspect command.

   EXPOSE
     -- EXPOSE &lt;port&gt; [&lt;port&gt;...]
     The EXPOSE instruction informs the container engine that the container listens on the
     specified network ports at runtime. The container engine uses this information to
     interconnect containers using links and to set up port redirection on the host
     system.

   ENV
     -- ENV &lt;key&gt; &lt;value&gt;
     The ENV instruction sets the environment variable  to
     the value &lt;value&gt;. This value is passed to all future
     RUN, ENTRYPOINT, and CMD instructions. This is
     functionally equivalent to prefixing the command with &lt;key&gt;=&lt;value&gt;.  The
     environment variables that are set with ENV persist when a container is run
     from the resulting image. Use podman inspect to inspect these values, and
     change them using podman run --env &lt;key&gt;=&lt;value&gt;.

   Note that setting &quot;</span><span class="nc">ENV</span><span class="w"> </span><span class="nc">DEBIAN_FRONTEND</span><span class="o">=</span><span class="n">noninteractive</span><span class="s">&quot; may cause
     unintended consequences, because it will persist when the container is run
     interactively, as with the following command: podman run -t -i image bash

   ADD
     -- ADD has two forms:

     ADD &lt;src&gt; &lt;dest&gt;

     # Required for paths with whitespace
     ADD [&quot;</span><span class="o">&lt;</span><span class="n">src</span><span class="o">&gt;</span><span class="s">&quot;,... &quot;</span><span class="o">&lt;</span><span class="n">dest</span><span class="o">&gt;</span><span class="s">&quot;]

   The ADD instruction copies new files, directories
     or remote file URLs to the filesystem of the container at path &lt;dest&gt;.
     Multiple &lt;src&gt; resources may be specified but if they are files or directories
     then they must be relative to the source directory that is being built
     (the context of the build). The &lt;dest&gt; is the absolute path, or path relative
     to WORKDIR, into which the source is copied inside the target container.
     If the &lt;src&gt; argument is a local file in a recognized compression format
     (tar, gzip, bzip2, etc) then it is unpacked at the specified &lt;dest&gt; in the
     container&#39;s filesystem.  Note that only local compressed files will be unpacked,
     i.e., the URL download and archive unpacking features cannot be used together.
     All new directories are created with mode 0755 and with the uid and gid of 0.

   COPY
     -- COPY has two forms:

     COPY [--chown=&lt;user&gt;:&lt;group&gt;] [--chmod=&lt;mode&gt;] &lt;src&gt; &lt;dest&gt;

     # Required for paths with whitespace
     COPY [--chown=&lt;user&gt;:&lt;group&gt;] [--chmod=&lt;mode&gt;] [&quot;</span><span class="o">&lt;</span><span class="n">src</span><span class="o">&gt;</span><span class="s">&quot;,... &quot;</span><span class="o">&lt;</span><span class="n">dest</span><span class="o">&gt;</span><span class="s">&quot;]

   The COPY instruction copies new files from &lt;src&gt; and
     adds them to the filesystem of the container at path . The &lt;src&gt; must be
     the path to a file or directory relative to the source directory that is
     being built (the context of the build) or a remote file URL. The &lt;dest&gt; is an
     absolute path, or a path relative to WORKDIR, into which the source will
     be copied inside the target container. If you COPY an archive file it will
     land in the container exactly as it appears in the build context without any
     attempt to unpack it.  All new files and directories are created with mode 0755
     and with the uid and gid of 0.

   --chown=&lt;user&gt;:&lt;group&gt; changes the ownership of new files and directories.
     Supports names, if defined in the containers /etc/passwd and /etc/groups files, or using
     uid and gid integers. The build will fail if a user or group name can&#39;t be mapped in the container.
     Numeric id&#39;s are set without looking them up in the container.

   --chmod=&lt;mode&gt; changes the mode of new files and directories.

   The optional flag --from=name can be used to copy files from a named previous build stage. It
     changes the context of &lt;src&gt; from the build context to the named build stage.

   ENTRYPOINT
     -- ENTRYPOINT has two forms:

     # executable form
     ENTRYPOINT [&quot;</span><span class="n">executable</span><span class="s">&quot;, &quot;</span><span class="n">param1</span><span class="s">&quot;, &quot;</span><span class="n">param2</span><span class="s">&quot;]`

     # run command in a shell - /bin/sh -c
     ENTRYPOINT command param1 param2

   -- An ENTRYPOINT helps you configure a
     container that can be run as an executable. When you specify an ENTRYPOINT,
     the whole container runs as if it was only that executable.  The ENTRYPOINT
     instruction adds an entry command that is not overwritten when arguments are
     passed to podman run. This is different from the behavior of CMD. This allows
     arguments to be passed to the entrypoint, for instance podman run &lt;image&gt; -d
     passes the -d argument to the ENTRYPOINT.  Specify parameters either in the
     ENTRYPOINT JSON array (as in the preferred exec form above), or by using a CMD
     statement.  Parameters in the ENTRYPOINT are not overwritten by the podman run arguments.  Parameters specified via CMD are overwritten by podman run  arguments.   Specify  a  plain
   string for the ENTRYPOINT, and it will execute in
     /bin/sh -c, like a CMD instruction:

     FROM ubuntu
     ENTRYPOINT wc -l -

   This means that the Containerfile&#39;s image always takes stdin as input (that&#39;s
     what &quot;</span><span class="o">-</span><span class="s">&quot; means), and prints the number of lines (that&#39;s what &quot;</span><span class="o">-</span><span class="n">l</span><span class="s">&quot; means). To
     make this optional but default, use a CMD:

     FROM ubuntu
     CMD [&quot;</span><span class="o">-</span><span class="n">l</span><span class="s">&quot;, &quot;</span><span class="o">-</span><span class="s">&quot;]
     ENTRYPOINT [&quot;</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">wc</span><span class="s">&quot;]

   VOLUME
     -- VOLUME [&quot;</span><span class="o">/</span><span class="n">data</span><span class="s">&quot;]
     The VOLUME instruction creates a mount point with the specified name and marks
     it as holding externally-mounted volumes from the native host or from other
     containers.

   USER
     -- USER daemon
     Sets the username or UID used for running subsequent commands.

   The USER instruction can optionally be used to set the group or GID. The
     following examples are all valid:
     USER [user | user:group | uid | uid:gid | user:gid | uid:group ]

   Until the USER instruction is set, instructions will be run as root. The USER
     instruction can be used any number of times in a Containerfile, and will only affect
     subsequent commands.

   WORKDIR
     -- WORKDIR /path/to/workdir
     The WORKDIR instruction sets the working directory for the RUN, CMD,
     ENTRYPOINT, COPY and ADD Containerfile commands that follow it. It can
     be used multiple times in a single Containerfile. Relative paths are defined
     relative to the path of the previous WORKDIR instruction. For example:

     WORKDIR /a
     WORKDIR b
     WORKDIR c
     RUN pwd

   In the above example, the output of the pwd command is a/b/c.

   ARG
      -- ARG &lt;name&gt;[=&lt;default value&gt;]

   The ARG instruction defines a variable that users can pass at build-time to
     the builder with the podman build and buildah build commands using the
     --build-arg &lt;varname&gt;=&lt;value&gt; flag. If a user specifies a build argument that
     was not defined in the Containerfile, the build outputs a warning.

   Note that a second FROM in a Containerfile sets the values associated with an
     Arg variable to nil and they must be reset if they are to be used later in
     the Containerfile

     [Warning] One or more build-args [foo] were not consumed

   The Containerfile author can define a single variable by specifying ARG once or many
     variables by specifying ARG more than once. For example, a valid Containerfile:

     FROM busybox
     ARG user1
     ARG buildno
     ...

   A Containerfile author may optionally specify a default value for an ARG instruction:

     FROM busybox
     ARG user1=someuser
     ARG buildno=1
     ...

   If an ARG value has a default and if there is no value passed at build-time, the
     builder uses the default.

   An ARG variable definition comes into effect from the line on which it is
     defined in the Containerfile not from the argument&#39;s use on the command-line or
     elsewhere.  For example, consider this Containerfile:

     1 FROM busybox
     2 USER ${user:-some_user}
     3 ARG user
     4 USER $user
     ...

   A user builds this file by calling:

     $ podman build --build-arg user=what_user Containerfile

   The USER at line 2 evaluates to some_user as the user variable is defined on the
     subsequent line 3. The USER at line 4 evaluates to what_user as user is
     defined and the what_user value was passed on the command line. Prior to its definition by an
     ARG instruction, any use of a variable results in an empty string.

          Warning: It is not recommended to use build-time variables for
           passing secrets like github keys, user credentials etc. Build-time variable
           values are visible to any user of the image with the podman history command.

   You can use an ARG or an ENV instruction to specify variables that are
     available to the RUN instruction. Environment variables defined using the
     ENV instruction always override an ARG instruction of the same name. Consider
     this Containerfile with an ENV and ARG instruction.

     1 FROM ubuntu
     2 ARG CONT_IMG_VER
     3 ENV CONT_IMG_VER=v1.0.0
     4 RUN echo $CONT_IMG_VER

   Then, assume this image is built with this command:

     $ podman build --build-arg CONT_IMG_VER=v2.0.1 Containerfile

   In this case, the RUN instruction uses v1.0.0 instead of the ARG setting
     passed by the user:v2.0.1 This behavior is similar to a shell
     script where a locally scoped variable overrides the variables passed as
     arguments or inherited from environment, from its point of definition.

   Using the example above but a different ENV specification you can create more
     useful interactions between ARG and ENV instructions:

     1 FROM ubuntu
     2 ARG CONT_IMG_VER
     3 ENV CONT_IMG_VER=${CONT_IMG_VER:-v1.0.0}
     4 RUN echo $CONT_IMG_VER

   Unlike an ARG instruction, ENV values are always persisted in the built
     image. Consider a podman build without the --build-arg flag:

     $ podman build Containerfile

   Using this Containerfile example, CONT_IMG_VER is still persisted in the image but
     its value would be v1.0.0 as it is the default set in line 3 by the ENV instruction.

   The variable expansion technique in this example allows you to pass arguments
     from the command line and persist them in the final image by leveraging the
     ENV instruction. Variable expansion is only supported for a limited set of
     Containerfile instructions.  ⟨#environment-replacement⟩

   Container engines have a set of predefined ARG variables that you can use without a
     corresponding ARG instruction in the Containerfile.

          • HTTP_PROXY

          • http_proxy

          • HTTPS_PROXY

          • https_proxy

          • FTP_PROXY

          • ftp_proxy

          • NO_PROXY

          • no_proxy

          • ALL_PROXY

          • all_proxy

   To use these, pass them on the command line using --build-arg flag, for
     example:

     $ podman build --build-arg HTTPS_PROXY=https://my-proxy.example.com .

   Platform/OS/Arch ARG
      -- ARG &lt;name&gt;

   When building multi-arch manifest-lists or images for a foreign-architecture,
     it&#39;s often helpful to have access to platform details within the Containerfile.
     For example, when using a RUN curl ... command to install OS/Arch specific
     binary into the image.  Or, if certain RUN operations are known incompatible
     or non-performant when emulating a specific architecture.

   There are several named ARG variables available. The purpose of each should be
     self-evident by its name.  However, in all cases these ARG values are not
     automatically populated.  You must always declare them within each FROM section
     of the Containerfile.

   The available ARG &lt;name&gt; variables are available with two prefixes:

          • TARGET... variable names represent details about the currently running build context (i.e. &quot;</span><span class="n">inside</span><span class="s">&quot; the container).  These are often the most useful:

            • TARGETOS: For example linux

            • TARGETARCH: For example amd64

            • TARGETPLATFORM: For example linux/amd64

            • TARGETVARIANT: Uncommonly used, specific to TARGETARCH

          • BUILD... variable names signify details about the host performing the build (i.e. &quot;</span><span class="n">outside</span><span class="err">&quot;</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p" data-group-id="2716942620-3">)</span><span class="p">:</span><span class="w">

            </span><span class="err">•</span><span class="w"> </span><span class="ss">BUILDOS</span><span class="p">:</span><span class="w"> </span><span class="nc">OS</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">performing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w">

            </span><span class="err">•</span><span class="w"> </span><span class="ss">BUILDARCH</span><span class="p">:</span><span class="w"> </span><span class="nc">Arch</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">performing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w">

            </span><span class="err">•</span><span class="w"> </span><span class="ss">BUILDPLATFORM</span><span class="p">:</span><span class="w"> </span><span class="nc">Combined</span><span class="w"> </span><span class="nc">OS</span><span class="o">/</span><span class="nc">Arch</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">performing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">build</span><span class="w">

            </span><span class="err">•</span><span class="w"> </span><span class="ss">BUILDVARIANT</span><span class="p">:</span><span class="w"> </span><span class="nc">Uncommonly</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">BUILDARCH</span><span class="w">

   </span><span class="nc">An</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="nc">TARGETARCH</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">arch</span><span class="o">-</span><span class="n">specific</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="ss">be</span><span class="p">:</span><span class="w">

     </span><span class="nc">FROM</span><span class="w"> </span><span class="n">busybox</span><span class="w">
     </span><span class="nc">ARG</span><span class="w"> </span><span class="nc">TARGETARCH</span><span class="w">
     </span><span class="nc">RUN</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">sSf</span><span class="w"> </span><span class="o">-</span><span class="nc">O</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">bin</span><span class="o">-</span><span class="err">$</span><span class="p" data-group-id="2716942620-4">{</span><span class="nc">TARGETARCH</span><span class="p" data-group-id="2716942620-4">}</span><span class="o">.</span><span class="n">zip</span><span class="w">

   </span><span class="nc">Assuming</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">linux</span><span class="o">/</span><span class="n">amd64</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">foreign</span><span class="o">-</span><span class="n">architecture</span><span class="w"> </span><span class="n">emulation</span><span class="w">
     </span><span class="n">enabled</span><span class="w"> </span><span class="p" data-group-id="2716942620-5">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">qemu</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">static</span><span class="p" data-group-id="2716942620-5">)</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">command</span><span class="p">:</span><span class="w">

     </span><span class="err">$</span><span class="w"> </span><span class="n">podman</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">platform</span><span class="w"> </span><span class="n">linux</span><span class="o">/</span><span class="n">s390x</span><span class="w"> </span><span class="o">.</span><span class="w">

   </span><span class="nc">Would</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">bin</span><span class="o">-</span><span class="n">s390x</span><span class="o">.</span><span class="n">zip</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">producing</span><span class="w">
     </span><span class="n">a</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">suited</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">linux</span><span class="o">/</span><span class="n">s390x</span><span class="w"> </span><span class="n">platform</span><span class="o">.</span><span class="w">  </span><span class="ss">Note</span><span class="p">:</span><span class="w"> </span><span class="nc">Emulation</span><span class="w"> </span><span class="n">isn</span><span class="sc">&#39;t
     strictly required, these special build-args will also function when building using
     podman farm build.

   ONBUILD
     -- ONBUILD [INSTRUCTION]
     The ONBUILD instruction adds a trigger instruction to an image. The
     trigger is executed at a later time, when the image is used as the base for
     another build. Container engines execute the trigger in the context of the downstream
     build, as if the trigger existed immediately after the FROM instruction in
     the downstream Containerfile.

   You can register any build instruction as a trigger. A trigger is useful if
     you are defining an image to use as a base for building other images. For
     example, if you are defining an application build environment or a daemon that
     is customized with a user-specific configuration.

   Consider an image intended as a reusable python application builder. It must
     add application source code to a particular directory, and might need a build
     script called after that. You can&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="nc">ADD</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">RUN</span><span class="w"> </span><span class="n">now</span><span class="p">,</span><span class="w"> </span><span class="n">because</span><span class="w">
     </span><span class="n">you</span><span class="w"> </span><span class="n">don</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">different</span><span class="w">
     </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">build</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="w"> </span><span class="nc">Providing</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">developers</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">boilerplate</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">copy</span><span class="o">-</span><span class="n">paste</span><span class="w">
     </span><span class="n">into</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">inefficient</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">prone</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w">
     </span><span class="n">difficult</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">mixes</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">application</span><span class="o">-</span><span class="n">specific</span><span class="w"> </span><span class="n">code</span><span class="o">.</span><span class="w">
     </span><span class="nc">The</span><span class="w"> </span><span class="n">solution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="nc">ONBUILD</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">advance</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w">
     </span><span class="n">run</span><span class="w"> </span><span class="n">later</span><span class="p">,</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">stage</span><span class="o">.</span></code></pre><p>SEE ALSO</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">buildah</span><span class="p" data-group-id="8190270672-1">(</span><span class="mi">1</span><span class="p" data-group-id="8190270672-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">podman</span><span class="p" data-group-id="8190270672-2">(</span><span class="mi">1</span><span class="p" data-group-id="8190270672-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">docker</span><span class="p" data-group-id="8190270672-3">(</span><span class="mi">1</span><span class="p" data-group-id="8190270672-3">)</span></code></pre><p>HISTORY</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">May</span><span class="w"> </span><span class="mi">2014</span><span class="p">,</span><span class="w"> </span><span class="nc">Compiled</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">Zac</span><span class="w"> </span><span class="nc">Dover</span><span class="w"> </span><span class="p" data-group-id="2519026205-1">(</span><span class="n">zdover</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">redhat</span><span class="w"> </span><span class="n">dot</span><span class="w"> </span><span class="n">com</span><span class="p" data-group-id="2519026205-1">)</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w"> </span><span class="n">documentation</span><span class="o">.</span><span class="w">
   </span><span class="nc">Feb</span><span class="w"> </span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">Brian</span><span class="w"> </span><span class="nc">Goff</span><span class="w"> </span><span class="p" data-group-id="2519026205-2">(</span><span class="n">cpuguy83</span><span class="na">@gmail</span><span class="o">.</span><span class="n">com</span><span class="p" data-group-id="2519026205-2">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">readability</span><span class="w">
   </span><span class="nc">Sept</span><span class="w"> </span><span class="mi">2015</span><span class="p">,</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">Sally</span><span class="w"> </span><span class="nc">O</span><span class="err">&#39;</span><span class="nc">Malley</span><span class="w"> </span><span class="p" data-group-id="2519026205-3">(</span><span class="n">somalley</span><span class="na">@redhat</span><span class="o">.</span><span class="n">com</span><span class="p" data-group-id="2519026205-3">)</span><span class="w">
   </span><span class="nc">Oct</span><span class="w"> </span><span class="mi">2016</span><span class="p">,</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">Addam</span><span class="w"> </span><span class="nc">Hardy</span><span class="w"> </span><span class="p" data-group-id="2519026205-4">(</span><span class="n">addam</span><span class="o">.</span><span class="n">hardy</span><span class="na">@gmail</span><span class="o">.</span><span class="n">com</span><span class="p" data-group-id="2519026205-4">)</span><span class="w">
   </span><span class="nc">Aug</span><span class="w"> </span><span class="mi">2021</span><span class="p">,</span><span class="w"> </span><span class="n">converted</span><span class="w"> </span><span class="nc">Dockerfile</span><span class="w"> </span><span class="n">man</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">Containerfile</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="nc">Dan</span><span class="w"> </span><span class="nc">Walsh</span><span class="w"> </span><span class="p" data-group-id="2519026205-5">(</span><span class="n">dwalsh</span><span class="na">@redhat</span><span class="o">.</span><span class="n">com</span><span class="p" data-group-id="2519026205-5">)</span><span class="w">

                                                                                       </span><span class="nc">Aug</span><span class="w"> </span><span class="mi">2021</span><span class="w">                                                                           </span><span class="nc">CONTAINERFILE</span><span class="p" data-group-id="2519026205-6">(</span><span class="mi">5</span><span class="p" data-group-id="2519026205-6">)</span></code></pre>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="containerd-config-toml.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
containerd-config.toml
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="containerignore.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
containerignore
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
